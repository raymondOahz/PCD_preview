window.__require=function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return r(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({Loader:[function(e,t,n){"use strict";cc._RF.push(t,"41aa1DVbDxJ/LH7BirP2kbI","Loader");var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(){function e(){}var t;return t=e,e.loadResImage=function(e,t){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){e?console.log("TODO",e):t(n)})},e.Load_music=function(e,t){var n=this;this.musicList[e]?t(this.musicList[e]):cc.loader.loadRes(e,function(o,r){o?console.log("lqr\u97f3\u6548\u5931\u8d25"+o):(n.musicList[e]=r,t&&t(r))})},e.loadSpriteAtlas=function(e,t){cc.loader.loadRes(e,cc.SpriteAtlas,function(e,n){e?console.log(e):t(n)})},e.loadResSkeleton=function(e,t){cc.loader.loadRes(e,function(e,n){e?console.log(e):t(n)})},e.loadResJson=function(e,t){cc.loader.loadRes(e,function(e,n){e?console.log("lqrerr",e):t(n.json)})},e.loadResTxt=function(e,t){cc.loader.loadRes(e,function(e,n){e?console.log("lqrerr",e):t(n.text)})},e.loadBytes=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var e=n.responseText;"{"!=e[0]&&(e=e.substr(1));var o=JSON.parse(e);t(o)}},n.open("GET",e,!0),n.send()},e.loadAddNode=function(e,t){cc.loader.loadRes(e,cc.Prefab,function(e,n){if(e)console.log(e);else{var o=cc.instantiate(n);t&&t(o)}})},e.loadAddPrefab=function(e,t){cc.loader.loadRes(e,cc.Prefab,function(e,n){e?console.log(e):t&&t(n)})},e.loadServerJosn=function(e,t){var n=new XMLHttpRequest;e+=".json",n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var e=n.responseText;"{"!=e[0]&&(e=e.substr(1));var o=JSON.parse(e);t(o)}},n.open("GET",e,!0),n.send()},e.loadResDir=function(e,t){cc.loader.loadResDir(e,cc.SpriteFrame,function(e,n){e?console.log(e):t(n)})},e.loadImageAsync=function(e,n){return r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,t.loadResAsync(e,cc.SpriteFrame,n)];case 1:return[2,o.sent()]}})})},e.asyncloadResJson=function(e){return r(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(t){cc.loader.loadRes(e,function(e,n){e?console.log("err",e):t(n.json)})})]})})},e.loadResAsync=function(e,t,n){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o){cc.loader.loadRes(e,t,function(e,t){e?console.log(e):(n&&n(t),o(t))})})]})})},e.asyncLoadFenBao=function(e,t,n){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o){cc.loader.loadRes(e,t,function(e,t){e?console.log(e):(n&&n(t),o(t))})})]})})},e.asyncLoadAddPrefab=function(e,t,n){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o){cc.loader.loadRes(e,t,function(e,t){if(e)console.log(e);else{var r=cc.instantiate(t);n&&n(r),o(r)}})})]})})},e.serverLoadTxt=function(e,t){cc.loader.load(e+".txt",function(e,n){e?console.log(e):t&&t(n)})},e.serverLoadJson=function(e,t){var n=this;cc.loader.load(e+".json",function(o,r){if(o)return console.log(o),void n.serverLoadJson(e,t);t&&t(r)})},e.async_server_Load_Res=function(e,n){return r(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,t.serverResAsync(e,n)];case 1:return[2,o.sent()]}})})},e.serverResAsync=function(e,t){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n){cc.loader.load(e,function(e,o){e?console.log(e):(t&&t(o),n(o))})})]})})},e.server_Load_Img=function(e,t){var n=this,o=this.imgList[e];o?t&&t(o):cc.loader.load(e+".png",function(o,r){if(o)return console.log("url>>>",JSON.stringify(o)),void n.server_Load_Img(e,t);var i=new cc.SpriteFrame;i.setTexture(r),i.name=e,n.imgList[e]=i,t&&t(i)})},e.asynsc_server_Load_Img=function(e,t){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(){cc.loader.load(e+".png",function(e,n){if(e)console.log(e);else{var o=new cc.SpriteFrame;o.setTexture(n),t&&t(o)}})})]})})},e.getSreverAudioClip=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,this.preload_WX_Res(e,t)];case 1:return[2,n.sent()]}})})},e.server_music=function(e,t){var n=this;this.musicList[e]?t(this.musicList[e]):cc.loader.load(e+".mp3",function(o,r){o?console.log("lqr\u97f3\u6548\u5931\u8d25"+o):(n.musicList[e]=r,t&&t(r))})},e.preload_WX_Res=function(e,t,n){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o){if(cc.sys.platform===cc.sys.WECHAT_GAME){var r=wx.getFileSystemManager(),i=wx.env.USER_DATA_PATH+"/"+t;r.access({path:i,success:function(){console.log("success>>>>>>>>>222"),cc.loader.load(i,function(e,t){e?console.log(e+">>>>>>111111111111"):(n&&n(t),console.log("\u8bfb\u53d6\u5fae\u4fe1\u672c\u5730"),o(t))})},fail:function(){window.wx.downloadFile({url:e,filePath:i,success:function(e){if(200===e.statusCode){var t=e.filePath;void 0===e.filePath&&(t=e.tempFilePath),console.log(t+"<><><>\u4e0b\u8f7d\u6210\u529f"),cc.loader.load(t,function(e,t){e?console.log(e):(console.log("\u6210\u529f\u300a\u300b\u300a\u300b\u300a\u300b\u300a\u300b"),n&&n(t),o(t))})}else console.log("download file failed --\x3e"+e.statusCode)},fail:function(){console.log("download file failed")}})}})}else cc.loader.load(e,function(e,t){e?console.log(e+"err_load"):(n&&n(t),o(t))})})]})})},e.asyncRpkLoadServerJosn=function(e){return r(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(console.log("xhr>>>",n.readyState),4==n.readyState&&n.status>=200&&n.status<400){var e=n.responseText;"{"!=e[0]&&(e=e.substr(1));var o=JSON.parse(e);t(o)}},n.open("GET",e,!0),n.send()})]})})},e.RpkLoadServerText=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(console.log("xhr>>>",n.readyState),4==n.readyState&&n.status>=200&&n.status<400){var e=n.responseText;t(e)}},n.open("GET",e+".txt",!0),n.send()},e.bundle=null,e.imgList={},e.musicList={},t=o([s],e)}());n.default=c,cc._RF.pop()},{}],SimulationInfo:[function(e,t,n){"use strict";var o;cc._RF.push(t,"1584eM1kd9FPYt1FNHbkaj4","SimulationInfo"),Object.defineProperty(n,"__esModule",{value:!0}),n.classify=n.CInfo=n.BInfo=void 0,function(e){e[e.FaceDecor=0]="FaceDecor",e[e.Clothes=1]="Clothes",e[e.Set=2]="Set",e[e.Pants=3]="Pants",e[e.Coat=4]="Coat",e[e.Shoes=5]="Shoes",e[e.Headwear=6]="Headwear",e[e.Hair=7]="Hair",e[e.Socks=8]="Socks",e[e.Holdit=9]="Holdit",e[e.Pendant=10]="Pendant"}(o||(o={})),n.classify=o;n.BInfo={0:{stageIndex:0,wardrobe0:[5,6,25,26,34,35,36,41],backgroundIndex:0,character:[0],title:null,interactionId:null,makeup:1}};var r={60:{id:60,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-59.08,-70.59]],page:[0],bodyPos:[12.83,-4.8]},61:{id:61,classifyIndex:1,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[71.29,97.31]],page:[0],bodyPos:[-.99,3.62]},64:{id:64,classifyIndex:5,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-57.47,-118]],page:[1],bodyPos:[.98,-5.22]},103:{id:103,classifyIndex:1,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[83.2,108.96]],bodyPos:[0,55.89],page:[5]},108:{id:108,classifyIndex:1,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[80.86,-120.74]],bodyPos:[-1.94,69.4],page:[35],bookIndex2:null},158:{id:158,classifyIndex:8,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[65.37,-88.37]],page:[0],bodyPos:[0,0]},159:{id:159,classifyIndex:2,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-45.62,109.16]],page:[1],bodyPos:[16.79,-2.88]},187:{id:187,classifyIndex:3,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[104.5,-17.26]],page:[1],bodyPos:[.98,22.33]},206:{id:206,classifyIndex:3,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[96.71,43.33]],bodyPos:[0,0],page:[25],bookIndex2:null},212:{id:212,classifyIndex:3,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-69.7,-111.09]],bodyPos:[0,0],page:[35],bookIndex2:null},221:{id:221,classifyIndex:3,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-69.7,-53.18]],bodyPos:[0,100],page:[6]},307:{id:307,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[85.13,62.64]],bodyPos:[15.44,-60.15],page:[34],bookIndex2:null},311:{id:311,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-65.84,168.8]],bodyPos:[0,-13.82],page:[26],bookIndex2:null},317:{id:317,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-38.81,-134.25]],bodyPos:[0,-29.27],page:[26],bookIndex2:null},331:{id:331,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[86.65,-2.99]],bodyPos:[0,-33.14],page:[26],bookIndex2:null},333:{id:333,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[63.49,161.08]],bodyPos:[0,-13.82],page:[26],bookIndex2:null},334:{id:334,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-69.29,135.99]],bodyPos:[0,-9.96],page:[36],bookIndex2:null},336:{id:336,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[82.79,108.96]],bodyPos:[0,-36.99],page:[35],bookIndex2:null},401:{id:401,classifyIndex:2,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-73.16,116.68]],bodyPos:[1.93,48.76],page:[5]},416:{id:416,classifyIndex:2,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-73.56,151.43]],bodyPos:[0,37.18],page:[41],bookIndex2:null},422:{id:422,classifyIndex:2,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-65.02,97.31]],bodyPos:[7.72,37.18],page:[34],bookIndex2:null},431:{id:431,classifyIndex:2,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-73.16,-72.48]],bodyPos:[21.23,44.9],page:[25],bookIndex2:null},508:{id:508,classifyIndex:4,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-56.19,-43.53]],bodyPos:[17.37,-2.02],page:[41],bookIndex2:null},509:{id:509,classifyIndex:4,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-63.91,114.75]],bodyPos:[15.44,34.65],page:[35],bookIndex2:null},513:{id:513,classifyIndex:4,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[11.37,68.43]],bodyPos:[3.86,-25.19],page:[6]},526:{id:526,classifyIndex:4,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-59.64,132.13]],bodyPos:[19.3,-15.53],page:[25],bookIndex2:null},527:{id:527,classifyIndex:4,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[75.07,-109.16]],bodyPos:[0,0],page:[41],bookIndex2:null},603:{id:603,classifyIndex:5,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-61.57,-126.53]],bodyPos:[0,0],page:[34],bookIndex2:null},630:{id:630,classifyIndex:5,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[61.56,-114.95]],bodyPos:[0,0],page:[6]},643:{id:643,classifyIndex:5,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[85.13,-147.78]],bodyPos:[0,0],page:[25],bookIndex2:null},645:{id:645,classifyIndex:5,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[81.27,-140.04]],bodyPos:[0,0],page:[34],bookIndex2:null},705:{id:705,classifyIndex:6,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[94.38,99.31]],bodyPos:[9.65,-41.49],page:[41],bookIndex2:null},716:{id:716,classifyIndex:6,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[73.55,78.08]],bodyPos:[-25.1,16.42],page:[36],bookIndex2:null},801:{id:801,classifyIndex:10,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-71.22,-87.93]],bodyPos:[3.86,-78.01],page:[36],bookIndex2:null},803:{id:803,classifyIndex:10,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[71.62,-114.95]],bodyPos:[0,-23.96],page:[36],bookIndex2:null},809:{id:809,classifyIndex:10,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-67.77,-1.06]],bodyPos:[3.86,-52.92],page:[26],bookIndex2:null},902:{id:902,classifyIndex:8,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-67.36,-64.77]],bodyPos:[-1.94,-32.03],page:[5]},903:{id:903,classifyIndex:8,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[77.41,-97.58]],bodyPos:[0,-1.13],page:[5]},1280:{id:1280,classifyIndex:7,lock:0,layersNum:1,groupIndex0:null,groupIndex1:null,pagePos:[[-65.01,97.31]],page:[0],bodyPos:[-4.94,-24.56]}};n.CInfo=r,cc._RF.pop()},{}],build_mgr:[function(e,t,n){"use strict";cc._RF.push(t,"e13c6h5RRVBmYBjO4LuJpBq","build_mgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.createPage=function(e,t){var n=cc.instantiate(e);return t.addChild(n),n},e}();n.default=o,cc._RF.pop()},{}],bundleInfo:[function(e,t,n){"use strict";cc._RF.push(t,"06a7012NI5PC4mQTd7ewV7m","bundleInfo"),Object.defineProperty(n,"__esModule",{value:!0}),n.bundle=void 0,n.bundle={},cc._RF.pop()},{}],bundle_mgr:[function(e,t,n){"use strict";cc._RF.push(t,"b06faZEXq5DmZTIo4nDp2+U","bundle_mgr");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t.prototype.loadBundle=function(){},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],cabinet:[function(e,t,n){"use strict";cc._RF.push(t,"e6df6tkZIBMIYAFbRU3FyYr","cabinet");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHold=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.touchItem=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItemStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchItemMove,this)},t.prototype.touchItemStart=function(){this.isHold||(this.stayPos=this.node.position)},t.prototype.touchItemMove=function(e){var t=e.getStartLocation().sub(e.getLocation()),n=this.stayPos.sub(t);this.node.setPosition(n)},i([c(cc.Node)],t.prototype,"hand",void 0),i([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],controlPanel:[function(e,t,n){"use strict";cc._RF.push(t,"53f3bVzHzBD/qTUuuY+8Ufi","controlPanel");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./control_mgr"),s=e("./temporaryStrategy"),c=e("./SimulationInfo"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){var e=this;cc.sys.isBrowser?this.open.active=!0:(this.open.active=!1,cc.log=function(){},console.log=function(){}),this.open.on(cc.Node.EventType.TOUCH_END,function(){e.panel.active=!0},this),this.close.on(cc.Node.EventType.TOUCH_END,function(){e.panel.active=!1},this),this.load()},t.prototype.load=function(){},t.prototype.logTransition=function(e){switch(e){case!0:return"\u5f00\u542f";case!1:return"\u5173\u95ed"}return"*error***\u65b9\u6cd5\u672a\u52a0\u5165"+e},t.prototype.switchDrag=function(e){a.info.isDrag=!a.info.isDrag,this.bottom.active=a.info.isDrag;var t=e.target.children[0];t.color=[cc.Color.WHITE,cc.Color.GREEN][Number(a.info.isDrag)],t.getComponent(cc.Label).string="\u521d\u59cb\u4f4d\u7f6e\u62d6\u52a8"+["","-\u5df2\u5f00\u542f"][Number(a.info.isDrag)],console.log("Drag\u72b6\u6001\u4e3a"+this.logTransition(a.info.isDrag))},t.prototype.saveDrag=function(){a.info.wardrobeCom||console.error("wardrobeCom\u4e0d\u5b58\u5728");var e=a.info.wardrobeCom.getItem(),t=c.CInfo;cc.log("save\u6309\u94ae\u6d4b\u8bd5",e);for(var n=s.default.kTDecimals,o=0,r=e;o<r.length;o++){var i=r[o],u=i.pagePos;u[e.pageIndex]=[n(i.initialPos[0]),n(i.initialPos[1])];var l=[n(i.bodyPos[0]),n(i.bodyPos[1])];t[i.id]={id:i.id,classifyIndex:i.classifyIndex,lock:i.lock,layersNum:i.layersNum,groupIndex0:i.groupIndex0,groupIndex1:i.groupIndex1,pagePos:u,bodyPos:l,page:i.page}}console.log(JSON.stringify(t)),s.default.creatJosnFile(JSON.stringify(t),"\u9053\u5177\u4f4d\u7f6e")},i([d(cc.Node)],t.prototype,"close",void 0),i([d(cc.Node)],t.prototype,"open",void 0),i([d(cc.Node)],t.prototype,"panel",void 0),i([d(cc.Node)],t.prototype,"bottom",void 0),i([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./SimulationInfo":"SimulationInfo","./control_mgr":"control_mgr","./temporaryStrategy":"temporaryStrategy"}],control_mgr:[function(e,t,n){"use strict";cc._RF.push(t,"adefbXCZaZPBLtnuR0eSAng","control_mgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.bodyInfo=n.info=void 0,n.info={isDrag:!1,wardrobeCom:null},n.bodyInfo={clothes:null,set:null,pants:null,coat:null,shoes:null,headwear:null,hair:null,socks:null,holdit:null,pendant:null,lipstick:null,blusher:null,eye:null,eyebrow:null},cc._RF.pop()},{}],"cos-js-sdk-v5.min":[function(require,module,exports){"use strict";var t;cc._RF.push(module,"2115ehp42NB5oiowZhoTxys","cos-js-sdk-v5.min"),t=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=10)}([function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){(function(t){var o=n(0),r=n(12),i=n(15),a=n(16),s=n(21),c=n(22),u=n(6);function l(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function d(e,t){var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push(t?l(o).toLowerCase():o);return n.sort(function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1})}var p,f=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding"],h=function(e,t,n){var o=t/8,r=e.slice(n,n+o);return new Uint8Array(r).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[t](r)[0]},g=function(e,t,n,o){var r=e.slice(t,n),i="";return new Uint8Array(r).forEach(function(e){i+=String.fromCharCode(e)}),o&&(i=decodeURIComponent(escape(i))),i},y=function(){},m=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t},v=(p=function(e,t){e=e.split("."),t=t.split(".");for(var n=0;n<t.length;n++)if(e[n]!==t[n])return parseInt(e[n])>parseInt(t[n])?1:-1;return 0},function(e){if(!e)return!1;var t=(e.match(/Chrome\/([.\d]+)/)||[])[1],n=(e.match(/QBCore\/([.\d]+)/)||[])[1],o=(e.match(/QQBrowser\/([.\d]+)/)||[])[1];return t&&p(t,"53.0.2785.116")<0&&n&&p(n,"3.53.991.400")<0&&o&&p(o,"9.0.2524.400")<=0||!1}("undefined"!=typeof navigator&&navigator.userAgent)),b=1048576;function C(e){return w(e,function(e){return"object"===o(e)&&null!==e?C(e):e})}function k(e,t){return I(t,function(n,o){e[o]=t[o]}),e}function S(e){return e instanceof Array}function I(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function w(e,t){var n=S(e)?[]:{};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],o));return n}var P=function(e,t){var n=t.Bucket,o=t.Region,r=t.Key,i=this.options.Domain,a=!i||"string"==typeof i&&i.indexOf("{Bucket}")>-1,s=!i||"string"==typeof i&&i.indexOf("{Region}")>-1;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(a&&!n)return"Bucket";if(s&&!o)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(a&&!n)return"Bucket";if(s&&!o)return"Region";if(!r)return"Key"}return!1},x=function(e,t){if(t=k({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var n=t.Headers||{};t&&"object"===o(t)&&(function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(n[e]=t[e])}(),A.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations"},function(e,o){void 0!==t[e]&&(n[o]=t[e])}),t.Headers=m(n))}return t},_=function(e){return Date.now()+(e||0)},T="object"===("undefined"==typeof navigator?"undefined":o(navigator))&&!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),R="object"===("undefined"==typeof navigator?"undefined":o(navigator))&&/\sQQ/i.test(navigator.userAgent),A={noop:y,formatParams:x,apiWrapper:function(e,t){return function(n,o){var r,i=this;if("function"==typeof n&&(o=n,n={}),n=x(e,n),i.options.EnableTracker)if("sliceUploadFile"===n.calledBySdk)r=n.tracker&&n.tracker.generateSubTracker({apiName:e});else if(["uploadFile","uploadFiles"].includes(e))r=null;else{var a=-1;n.Body&&(a="string"==typeof n.Body?n.Body.length:n.Body.size||n.Body.byteLength||-1),r=new u({bucket:n.Bucket,region:n.Region,apiName:e,fileKey:n.Key,fileSize:a,deepTracker:i.options.DeepTracker,customId:i.options.CustomId,delay:i.options.TrackerDelay})}n.tracker=r;var s=function(e){return e&&e.headers&&(e.headers["x-cos-request-id"]&&(e.RequestId=e.headers["x-cos-request-id"]),e.headers["x-ci-request-id"]&&(e.RequestId=e.headers["x-ci-request-id"]),e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},c=function(e,t){r&&r.formatResult(e,t),o&&o(s(e),s(t))},l=function(){if("getService"!==e&&"abortUploadTask"!==e){var t=P.call(i,e,n);if(t)return"missing param "+t;if(n.Region){if(i.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(n.Region))return"Region format error."}else{if(n.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(n.Region))return"Region format error."}!i.options.CompatibilityMode&&-1===n.Region.indexOf("-")&&"yfb"!==n.Region&&"default"!==n.Region&&n.Region}if(n.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+"-"+n.AppId;else{if(!i.options.AppId)return'Bucket should format as "test-1250000000".';n.Bucket=n.Bucket+"-"+i.options.AppId}n.AppId&&delete n.AppId}!i.options.UseRawKey&&n.Key&&"/"===n.Key.substr(0,1)&&(n.Key=n.Key.substr(1))}}(),d=["getAuth","getObjectUrl"].includes(e);if("function"==typeof Promise&&!d&&!o)return new Promise(function(e,r){if(o=function(t,n){t?r(t):e(n)},l)return c(A.error(new Error(l)));t.call(i,n,c)});if(l)return c(A.error(new Error(l)));var p=t.call(i,n,c);return d?p:void 0}},xml2json:a,json2xml:s,md5:r,clearKey:m,fileSlice:function(e,t,n,o,r){var i;if(e.slice?i=e.slice(t,n):e.mozSlice?i=e.mozSlice(t,n):e.webkitSlice&&(i=e.webkitSlice(t,n)),o&&v){var a=new FileReader;a.onload=function(){i=null,r(new Blob([a.result]))},a.readAsArrayBuffer(i)}else r(i)},getBodyMd5:function(e,t,n,o){n=n||y,e?"string"==typeof t?n(A.md5(t,!0)):Blob&&t instanceof Blob?A.getFileMd5(t,function(e,t){n(t)},o):n():n()},getFileMd5:function(e,t,n){var o=e.size,i=0,a=r.getCtx();!function r(s){if(s>=o){var c=a.digest("hex");t(null,c)}else{var u=Math.min(o,s+b);A.fileSlice(e,s,u,!1,function(e){!function(e,t){var n,o=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,o.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer&&(n=function(e){var n="",o=new FileReader;o.onload=function(){for(var e=new Uint8Array(o.result),r=e.byteLength,i=0;i<r;i++)n+=String.fromCharCode(e[i]);t(n)},o.readAsArrayBuffer(e)}),n.call(o,e)}(e,function(t){e=null,a=a.update(t,!0),i+=t.length,t=null,n&&n({loaded:i,total:o,percent:Math.round(i/o*1e4)/1e4}),r(s+b)})})}}(0)},b64:function(e){var t,n,o,r="";for(t=0,n=e.length/2;t<n;t++)o=parseInt(e[2*t]+e[2*t+1],16),r+=String.fromCharCode(o);return btoa(r)},extend:k,isArray:S,isInArray:function(e,t){for(var n=!1,o=0;o<e.length;o++)if(t===e[o]){n=!0;break}return n},makeArray:function(e){return S(e)?e:[e]},each:I,map:w,filter:function(e,t){var n=S(e),o=n?[]:{};for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)&&(n?o.push(e[r]):o[r]=e[r]);return o},clone:C,attr:function(e,t,n){return e&&t in e?e[t]:n},uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},camSafeUrlEncode:l,throttleOnProgress:function(e,t){var n,o,r=this,i=0,a=0,s=Date.now();function c(){if(o=0,t&&"function"==typeof t){n=Date.now();var r,c=Math.max(0,Math.round((a-i)/((n-s)/1e3)*100)/100)||0;r=0===a&&0===e?1:Math.floor(a/e*100)/100||0,s=n,i=a;try{t({loaded:a,total:e,speed:c,percent:r})}catch(e){}}}return function(t,n){if(t&&(a=t.loaded,e=t.total),n)clearTimeout(o),c();else{if(o)return;o=setTimeout(c,r.options.ProgressInterval)}}},getFileSize:function(e,t,n){var o;"string"==typeof t.Body?t.Body=new Blob([t.Body],{type:"text/plain"}):t.Body instanceof ArrayBuffer&&(t.Body=new Blob([t.Body])),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(o=t.Body.size,t.ContentLength=o,n(null,o)):n(A.error(new Error("params body format error, Only allow File|Blob|String.")))},getSkewTime:_,error:function(e,t){var n=e;return e.message=e.message||null,"string"==typeof t?(e.error=t,e.message=t):"object"===o(t)&&null!==t&&(k(e,t),(t.code||t.name)&&(e.code=t.code||t.name),t.message&&(e.message=t.message),t.stack&&(e.stack=t.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=t&&t.name||e.name||e.code||"Error",e.code||(e.code=e.name),e.error||(e.error=C(n)),e},obj2str:function(e,t){var n,o,r,i=[],a=d(e);for(n=0;n<a.length;n++)r=void 0===e[o=a[n]]||null===e[o]?"":""+e[o],o=t?l(o).toLowerCase():l(o),r=l(r)||"",i.push(o+"="+r);return i.join("&")},getAuth:function(e){var t,n=(e=e||{}).SecretId,o=e.SecretKey,r=e.KeyTime,a=(e.method||e.Method||"get").toLowerCase(),s=C(e.Query||e.params||{}),c=function(e){var t={};for(var n in e){var o=n.toLowerCase();(o.indexOf("x-cos-")>-1||f.indexOf(o)>-1)&&(t[n]=e[n])}return t}(C(e.Headers||e.headers||{})),u=e.Key||"";e.UseRawKey?t=e.Pathname||e.pathname||"/"+u:0!==(t=e.Pathname||e.pathname||u).indexOf("/")&&(t="/"+t);var l=!1!==e.ForceSignHost;if(!c.Host&&!c.host&&e.Bucket&&e.Region&&l&&(c.Host=e.Bucket+".cos."+e.Region+".myqcloud.com"),!n)throw new Error("missing param SecretId");if(!o)throw new Error("missing param SecretKey");var p=Math.round(_(e.SystemClockOffset)/1e3)-1,h=p,g=e.Expires||e.expires;h+=void 0===g?900:1*g||0;var y=n,m=r||p+";"+h,v=r||p+";"+h,b=d(c,!0).join(";").toLowerCase(),k=d(s,!0).join(";").toLowerCase(),S=i.HmacSHA1(v,o).toString(),I=[a,t,A.obj2str(s,!0),A.obj2str(c,!0),""].join("\n"),w=["sha1",m,i.SHA1(I).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+y,"q-sign-time="+m,"q-key-time="+v,"q-header-list="+b,"q-url-param-list="+k,"q-signature="+i.HmacSHA1(w,S).toString()].join("&")},parseSelectPayload:function(e){for(var t={},n=g(e),o={records:[]};e.byteLength;){var r,i=h(e,32,0),a=h(e,32,4),s=i-a-16,c=0;for(e=e.slice(12);c<a;){var u=h(e,8,c),l=g(e,c+1,c+1+u),d=h(e,16,c+u+2),p=g(e,c+u+4,c+u+4+d);t[l]=p,c+=u+4+d}if("Records"===t[":event-type"])r=g(e,c,c+s,!0),o.records.push(r);else if("Stats"===t[":event-type"])r=g(e,c,c+s,!0),o.stats=A.xml2json(r).Stats;else if("error"===t[":event-type"]){var f=t[":error-code"],y=t[":error-message"],m=new Error(y);m.message=y,m.name=m.code=f,o.error=m}else["Progress","Continuation","End"].includes(t[":event-type"]);e=e.slice(c+s+4)}return{payload:o.records.join(""),body:n}},getSourceParams:function(e){var t=this.options.CopySourceParser;if(t)return t(e);var n=e.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return n?{Bucket:n[1],Region:n[3],Key:n[7]}:null},isBrowser:!0,isNode:function(){return"object"!==("undefined"==typeof window?"undefined":o(window))&&"object"===(void 0===t?"undefined":o(t))&&!("object"===("undefined"==typeof globalThis?"undefined":o(globalThis))&&("DedicatedWorkerGlobalScope"===globalThis.constructor.name||globalThis.FileReaderSync))},isCIHost:function(e){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(e)},isIOS_QQ:T&&R,encodeBase64:function(e,t){var n=c.encode(e);return t&&(n=n.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),n}};e.exports=A}).call(this,n(3))},function(e,t){function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var o=n({HTML:"text/html",isHTML:function(e){return e===o.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var o=0;o<e.length;o++)if(Object.prototype.hasOwnProperty.call(e,o)){var r=e[o];if(t.call(void 0,r,o,e))return r}},t.freeze=n,t.MIME_TYPE=o,t.NAMESPACE=r},function(e){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var o=n(2),r=o.find,i=o.NAMESPACE;function a(e){return""!==e}function s(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function c(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(a):[]}(e);return Object.keys(t.reduce(s,{}))}function u(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function l(e,t){var n=e.prototype;if(!(n instanceof t)){var o=function(){};o.prototype=t.prototype,u(n,o=new o),e.prototype=n=o}n.constructor!=e&&(n.constructor=e)}var d={},p=d.ELEMENT_NODE=1,f=d.ATTRIBUTE_NODE=2,h=d.TEXT_NODE=3,g=d.CDATA_SECTION_NODE=4,y=d.ENTITY_REFERENCE_NODE=5,m=d.ENTITY_NODE=6,v=d.PROCESSING_INSTRUCTION_NODE=7,b=d.COMMENT_NODE=8,C=d.DOCUMENT_NODE=9,k=d.DOCUMENT_TYPE_NODE=10,S=d.DOCUMENT_FRAGMENT_NODE=11,I=d.NOTATION_NODE=12,w={},P={},x=(w.INDEX_SIZE_ERR=(P[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(P[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(P[3]="Hierarchy request error",3)),_=(w.WRONG_DOCUMENT_ERR=(P[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(P[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(P[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(P[7]="No modification allowed",7),w.NOT_FOUND_ERR=(P[8]="Not found",8)),T=(w.NOT_SUPPORTED_ERR=(P[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(P[10]="Attribute in use",10));function R(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,P[e]),this.message=P[e],Error.captureStackTrace&&Error.captureStackTrace(this,R);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function E(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);be(e,"length",n.length),u(n,e),e._inc=t}}function N(){}function B(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function D(e,t,n,o){if(o?t[B(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(o&&q(r,e,o),function(e,t,n){r&&r._inc++,n.namespaceURI===i.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(0,e,n))}}function M(e,t,n){var o=B(t,n);if(!(o>=0))throw new R(_,new Error(e.tagName+"@"+n));for(var r=t.length-1;o<r;)t[o]=t[++o];if(t.length=r,e){var i=e.ownerDocument;i&&(q(i,e,n),n.ownerElement=null)}}function U(){}function L(){}function j(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function H(){this.ownerDocument=this}function q(e,t,n){e&&e._inc++,n.namespaceURI===i.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function K(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var r=t.firstChild,i=0;r;)o[i++]=r,r=r.nextSibling;o.length=i,delete o[o.length]}}}function z(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,K(e.ownerDocument,e),t}function G(e){return e&&e.nodeType===L.DOCUMENT_TYPE_NODE}function V(e){return e&&e.nodeType===L.ELEMENT_NODE}function X(e){return e&&e.nodeType===L.TEXT_NODE}function W(e,t){var n=e.childNodes||[];if(r(n,V)||G(t))return!1;var o=r(n,G);return!(t&&o&&n.indexOf(o)>n.indexOf(t))}function Q(e,t){var n=e.childNodes||[];if(r(n,function(e){return V(e)&&e!==t}))return!1;var o=r(n,G);return!(t&&o&&n.indexOf(o)>n.indexOf(t))}function J(e,t,n){if(!function(e){return e&&(e.nodeType===L.DOCUMENT_NODE||e.nodeType===L.DOCUMENT_FRAGMENT_NODE||e.nodeType===L.ELEMENT_NODE)}(e))throw new R(x,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new R(_,"child not in parent");if(!function(e){return e&&(V(e)||X(e)||G(e)||e.nodeType===L.DOCUMENT_FRAGMENT_NODE||e.nodeType===L.COMMENT_NODE||e.nodeType===L.PROCESSING_INSTRUCTION_NODE)}(t)||G(t)&&e.nodeType!==L.DOCUMENT_NODE)throw new R(x,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Y(e,t,n){var o=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===L.DOCUMENT_FRAGMENT_NODE){var a=i.filter(V);if(a.length>1||r(i,X))throw new R(x,"More than one element or text in fragment");if(1===a.length&&!W(e,n))throw new R(x,"Element in fragment can not be inserted before doctype")}if(V(t)&&!W(e,n))throw new R(x,"Only one element can be added and only after doctype");if(G(t)){if(r(o,G))throw new R(x,"Only one doctype is allowed");var s=r(o,V);if(n&&o.indexOf(s)<o.indexOf(n))throw new R(x,"Doctype can only be inserted before an element");if(!n&&s)throw new R(x,"Doctype can not be appended since element is present")}}function $(e,t,n){var o=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===L.DOCUMENT_FRAGMENT_NODE){var a=i.filter(V);if(a.length>1||r(i,X))throw new R(x,"More than one element or text in fragment");if(1===a.length&&!Q(e,n))throw new R(x,"Element in fragment can not be inserted before doctype")}if(V(t)&&!Q(e,n))throw new R(x,"Only one element can be added and only after doctype");if(G(t)){if(r(o,function(e){return G(e)&&e!==n}))throw new R(x,"Only one doctype is allowed");var s=r(o,V);if(n&&o.indexOf(s)<o.indexOf(n))throw new R(x,"Doctype can only be inserted before an element")}}function Z(e,t,n,o){J(e,t,n),e.nodeType===L.DOCUMENT_NODE&&(o||Y)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===S){var i=t.firstChild;if(null==i)return t;var a=t.lastChild}else i=a=t;var s=n?n.previousSibling:e.lastChild;i.previousSibling=s,a.nextSibling=n,s?s.nextSibling=i:e.firstChild=i,null==n?e.lastChild=a:n.previousSibling=a;do{i.parentNode=e}while(i!==a&&(i=i.nextSibling));return K(e.ownerDocument||e,e),t.nodeType==S&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function te(){}function ne(){}function oe(){}function re(){}function ie(){}function ae(){}function se(){}function ce(){}function ue(){}function le(){}function de(){}function pe(){}function fe(e,t){var n=[],o=9==this.nodeType&&this.documentElement||this,r=o.prefix,i=o.namespaceURI;if(i&&null==r&&null==(r=o.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return ye(this,n,e,t,a),n.join("")}function he(e,t,n){var o=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===o&&r===i.XML||r===i.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===o)return s.namespace!==r}return!0}function ge(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,j),'"')}function ye(e,t,n,o,r){if(r||(r=[]),o){if(!(e=o(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var a=e.attributes,s=a.length,c=e.firstChild,u=e.tagName,l=u;if(!(n=i.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var d,m=0;m<a.length;m++)if("xmlns"===a.item(m).name){d=a.item(m).value;break}if(!d)for(var I=r.length-1;I>=0;I--)if(""===(w=r[I]).prefix&&w.namespace===e.namespaceURI){d=w.namespace;break}if(d!==e.namespaceURI)for(I=r.length-1;I>=0;I--){var w;if((w=r[I]).namespace===e.namespaceURI){w.prefix&&(l=w.prefix+":"+u);break}}}t.push("<",l);for(var P=0;P<s;P++)"xmlns"==(x=a.item(P)).prefix?r.push({prefix:x.localName,namespace:x.value}):"xmlns"==x.nodeName&&r.push({prefix:"",namespace:x.value});for(P=0;P<s;P++){var x,_,T;he(x=a.item(P),0,r)&&(ge(t,(_=x.prefix||"")?"xmlns:"+_:"xmlns",T=x.namespaceURI),r.push({prefix:_,namespace:T})),ye(x,t,n,o,r)}if(u===l&&he(e,0,r)&&(ge(t,(_=e.prefix||"")?"xmlns:"+_:"xmlns",T=e.namespaceURI),r.push({prefix:_,namespace:T})),c||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;c;)c.data?t.push(c.data):ye(c,t,n,o,r.slice()),c=c.nextSibling;else for(;c;)ye(c,t,n,o,r.slice()),c=c.nextSibling;t.push("</",l,">")}else t.push("/>");return;case C:case S:for(c=e.firstChild;c;)ye(c,t,n,o,r.slice()),c=c.nextSibling;return;case f:return ge(t,e.name,e.value);case h:return t.push(e.data.replace(/[<&>]/g,j));case g:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case k:var R=e.publicId,A=e.systemId;if(t.push("<!DOCTYPE ",e.name),R)t.push(" PUBLIC ",R),A&&"."!=A&&t.push(" ",A),t.push(">");else if(A&&"."!=A)t.push(" SYSTEM ",A,">");else{var E=e.internalSubset;E&&t.push(" [",E,"]"),t.push(">")}return;case v:return t.push("<?",e.target," ",e.data,"?>");case y:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,n){var o;switch(t.nodeType){case p:(o=t.cloneNode(!1)).ownerDocument=e;case S:break;case f:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var r=t.firstChild;r;)o.appendChild(me(e,r,n)),r=r.nextSibling;return o}function ve(e,t,n){var o=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];"object"!=typeof i&&i!=o[r]&&(o[r]=i)}switch(t.childNodes&&(o.childNodes=new A),o.ownerDocument=e,o.nodeType){case p:var a=t.attributes,s=o.attributes=new N,c=a.length;s._ownerElement=o;for(var u=0;u<c;u++)o.setAttributeNode(ve(e,a.item(u),!0));break;case f:n=!0}if(n)for(var l=t.firstChild;l;)o.appendChild(ve(e,l,n)),l=l.nextSibling;return o}function be(e,t,n){e[t]=n}w.INVALID_STATE_ERR=(P[11]="Invalid state",11),w.SYNTAX_ERR=(P[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(P[13]="Invalid modification",13),w.NAMESPACE_ERR=(P[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(P[15]="Invalid access",15),R.prototype=Error.prototype,u(w,R),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],o=0;o<this.length;o++)ye(this[o],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},E.prototype.item=function(e){return O(this),this[e]},l(E,A),N.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new R(T);var n=this.getNamedItem(e.nodeName);return D(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new R(T);return t=this.getNamedItemNS(e.namespaceURI,e.localName),D(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return M(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return M(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},U.prototype={hasFeature:function(){return!0},createDocument:function(e,t,n){var o=new H;if(o.implementation=this,o.childNodes=new A,o.doctype=n||null,n&&o.appendChild(n),t){var r=o.createElementNS(e,t);o.appendChild(r)}return o},createDocumentType:function(e,t,n){var o=new ae;return o.name=e,o.nodeName=e,o.publicId=t||"",o.systemId=n||"",o}},L.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Z(this,e,t)},replaceChild:function(e,t){Z(this,e,t,$),t&&this.removeChild(t)},removeChild:function(e){return z(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ve(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==h&&e.nodeType==h?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&n[o]===e)return o;t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},u(d,L),u(d,L.prototype),H.prototype={nodeName:"#document",nodeType:C,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==S){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return Z(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),z(this,e)},replaceChild:function(e,t){Z(this,e,t,$),e.ownerDocument=this,t&&this.removeChild(t),V(e)&&(this.documentElement=e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,function(n){if(n.nodeType==p&&n.getAttribute("id")==e)return t=n,!0}),t},getElementsByClassName:function(e){var t=c(e);return new E(this,function(n){var o=[];return t.length>0&&F(n.documentElement,function(r){if(r!==n&&r.nodeType===p){var i=r.getAttribute("class");if(i){var a=e===i;if(!a){var s=c(i);a=t.every((u=s,function(e){return u&&-1!==u.indexOf(e)}))}a&&o.push(r)}}var u}),o})},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new A,(t.attributes=new N)._ownerElement=t,t},createDocumentFragment:function(){var e=new le;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new oe;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new de;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new te;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ue;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new ee,o=t.split(":"),r=n.attributes=new N;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new te,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},l(H,L),ee.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===S?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,K(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new E(this,function(t){var n=[];return F(t,function(o){o===t||o.nodeType!=p||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new E(this,function(n){var o=[];return F(n,function(r){r===n||r.nodeType!==p||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||o.push(r)}),o})}},H.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,H.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,l(ee,L),te.prototype.nodeType=f,l(te,L),ne.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(P[x])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},l(ne,L),oe.prototype={nodeName:"#text",nodeType:h,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},l(oe,ne),re.prototype={nodeName:"#comment",nodeType:b},l(re,ne),ie.prototype={nodeName:"#cdata-section",nodeType:g},l(ie,ne),ae.prototype.nodeType=k,l(ae,L),se.prototype.nodeType=I,l(se,L),ce.prototype.nodeType=m,l(ce,L),ue.prototype.nodeType=y,l(ue,L),le.prototype.nodeName="#document-fragment",le.prototype.nodeType=S,l(le,L),de.prototype.nodeType=v,l(de,L),pe.prototype.serializeToString=function(e,t,n){return fe.call(e,t,n)},L.prototype.toString=fe;try{if(Object.defineProperty){var Ce=function e(t){switch(t.nodeType){case p:case S:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(E.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(L.prototype,"textContent",{get:function(){return Ce(this)},set:function(e){switch(this.nodeType){case p:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),be=function(e,t,n){e["$$"+t]=n}}}catch(ke){}t.DocumentType=ae,t.DOMException=R,t.DOMImplementation=U,t.Element=ee,t.Node=L,t.NodeList=A,t.XMLSerializer=pe},function(e,t,n){var o=n(23),r=n(24),i=n(0),a=n(7),s=null,c=function(e){if(!s){var t=n(25);s=new t({appkey:"0AND0VEVB24UBGDU",versionCode:a.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:e,sessionDuration:6e4})}return s},u=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},l=function(){if("object"===("undefined"==typeof navigator?"undefined":i(navigator))){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(null==e?void 0:e.type)||(null==e?void 0:e.effectiveType)||"unknown"}return"unknown"},d=function(){return!("object"!==("undefined"==typeof navigator?"undefined":i(navigator))||!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))},p={isMobile:d(),isBrowser:!d(),mobileOsType:"object"===("undefined"==typeof navigator?"undefined":i(navigator))&&navigator.userAgent.match(/(Android|Adr|Linux)/i)?"android":function(){return!("object"!==("undefined"==typeof navigator?"undefined":i(navigator))||!navigator.userAgent.match(/(iPhone|iPod|iPad|iOS)/i))}?"ios":"other_mobile",pcOsType:function(){if("object"!==("undefined"==typeof navigator?"undefined":i(navigator)))return"unknown os";var e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);return e.indexOf("win32")>=0||e.indexOf("wow32")>=0?"win32":e.indexOf("win64")>=0||e.indexOf("wow64")>=0?"win64":t?"mac":"unknown os"}()},f={deviceType:p.isMobile?"mobile":p.isBrowser?"browser":"unknown",devicePlatform:p.isMobile?p.mobileOsType:p.pcOsType,deviceName:function(){if("object"!==("undefined"==typeof navigator?"undefined":i(navigator)))return"unknown device";var e=navigator.userAgent.toLowerCase();if(e.includes("app/tencent_wemeet"))return"tencent_wemeet";if(e.indexOf("maxthon")>=0){var t=e.match(/maxthon\/([\d.]+)/),n=t&&t[1]||"";return"\u50b2\u6e38\u6d4f\u89c8\u5668 ".concat(n).trim()}if(e.indexOf("qqbrowser")>=0){var o=e.match(/qqbrowser\/([\d.]+)/),r=o&&o[1]||"";return"QQ\u6d4f\u89c8\u5668 ".concat(r).trim()}if(e.indexOf("se 2.x")>=0)return"\u641c\u72d7\u6d4f\u89c8\u5668";if(e.indexOf("wxwork")>=0)return"\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668";if(e.indexOf("msie")>=0){var a=e.match(/msie ([\d.]+)/),s=a&&a[1]||"";return"IE ".concat(s).trim()}if(e.indexOf("firefox")>=0){var c=e.match(/firefox\/([\d.]+)/),u=c&&c[1]||"";return"Firefox ".concat(u).trim()}if(e.indexOf("chrome")>=0){var l=e.match(/chrome\/([\d.]+)/),d=l&&l[1]||"";return"Chrome ".concat(d).trim()}if(e.indexOf("opera")>=0){var p=e.match(/opera.([\d.]+)/),f=p&&p[1]||"";return"Opera ".concat(f).trim()}if(e.indexOf("safari")>=0){var h=e.match(/version\/([\d.]+)/),g=h&&h[1]||"";return"Safari ".concat(g).trim()}if(e.indexOf("edge")>=0){var y=e.match(/edge\/([\d.]+)/),m=y&&y[1]||"";return"edge ".concat(m).trim()}return e.substr(0,200)}()},h=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],g=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(h),y=["getObject"];function m(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}var v=function(){function e(t){o(this,e);var n=t.parent,r=t.traceId,i=t.bucket,s=t.region,l=t.apiName,d=t.fileKey,p=t.fileSize,h=t.accelerate,g=t.customId,y=t.delay,m=t.deepTracker,v=i&&i.substr(i.lastIndexOf("-")+1)||"";this.parent=n,this.deepTracker=m,this.delay=y,this.params={cossdkVersion:a.version,region:s,networkType:"",host:"",accelerate:h?"Y":"N",requestPath:d||"",size:p||-1,httpMd5:0,httpSign:0,httpFull:0,name:l||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:r||u(),bucket:i,appid:v,partNumber:0,retryTimes:0,reqUrl:"",customId:g||"",deviceType:f.deviceType,devicePlatform:f.devicePlatform,deviceName:f.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:(new Date).getTime(),endTime:0},this.beacon=c(y)}return r(e,[{key:"formatResult",value:function(e,t){var n,o,r,i,a,s,c=(new Date).getTime()-this.params.startTime,u=l(),d=e?(null==e?void 0:e.code)||(null==e||null===(n=e.error)||void 0===n?void 0:n.code)||(null==e||null===(o=e.error)||void 0===o?void 0:o.Code):"",p=e?(null==e?void 0:e.message)||(null==e||null===(r=e.error)||void 0===r?void 0:r.message)||(null==e||null===(i=e.error)||void 0===i?void 0:i.Message):"",f=e?(null==e?void 0:e.resource)||(null==e||null===(a=e.error)||void 0===a?void 0:a.resource)||(null==e||null===(s=e.error)||void 0===s?void 0:s.Resource):"",h=e?null==e?void 0:e.statusCode:t.statusCode,g=e?(null==e?void 0:e.headers)&&(null==e?void 0:e.headers["x-cos-request-id"]):(null==t?void 0:t.headers)&&(null==t?void 0:t.headers["x-cos-request-id"]),y=e?g?"Server":"Client":"";if(Object.assign(this.params,{tookTime:c,networkType:u,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:e?"Fail":"Success",errorType:y,errorCode:d,errorStatusCode:h,errorMessage:p,errorServiceName:f,errorRequestId:g}),!e||d&&p||(this.params.fullError=e?JSON.stringify(e):""),"getObject"===this.params.name&&(this.params.size=t?t.headers&&t.headers["content-length"]:-1),this.params.reqUrl)try{var m=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=m[2]}catch(e){this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(e){Object.assign(this.params,e)}},{key:"sendEvents",value:function(){if(!h.includes(this.params.name)||this.deepTracker){var e,t=(e=this.params.name,g.includes(e)?"cos_upload":y.includes(e)?"cos_download":"base_service"),n=function(e){var t={},n="Success"===e.result?["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"]:["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"];for(var o in e)n.includes(o)&&(t[m(o)]=e[o]);return t}(this.params);this.beacon||(this.beacon=c(this.delay||5e3)),0===this.delay?this.beacon&&this.beacon.onDirectUserAction(t,n):this.beacon&&this.beacon.onUserAction(t,n)}}},{key:"generateSubTracker",value:function(t){return Object.assign(t,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay}),new e(t)}}]),e}();e.exports=v},function(e){e.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.20","description":"JavaScript SDK for [\u817e\u8baf\u4e91\u5bf9\u8c61\u5b58\u50a8](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js test/test.js server/sts.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},function(e){var t=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){n(e).push(t)},e.off=function(e,t){for(var o=n(e),r=o.length-1;r>=0;r--)t===o[r]&&o.splice(r,1)},e.emit=function(e,t){for(var o=n(e).map(function(e){return e}),r=0;r<o.length;r++)o[r](t)}};e.exports.init=t,e.exports.EventProxy=function(){t(this)}},function(e,t,n){var o,r,i=n(1),a="cos_sdk_upload_cache",s=function(){try{var e=JSON.parse(localStorage.getItem(a))}catch(e){}e||(e=[]),o=e},c=function(){try{o.length?localStorage.setItem(a,JSON.stringify(o)):localStorage.removeItem(a)}catch(e){}},u=function(){if(!o){s.call(this);for(var e=!1,t=Math.round(Date.now()/1e3),n=o.length-1;n>=0;n--){var r=o[n][2];(!r||r+2592e3<t)&&(o.splice(n,1),e=!0)}e&&c()}},l=function(){r||(r=setTimeout(function(){c(),r=null},400))},d={using:{},setUsing:function(e){d.using[e]=!0},removeUsing:function(e){delete d.using[e]},getFileId:function(e,t,n,o){return e.name&&e.size&&e.lastModifiedDate&&t?i.md5([e.name,e.size,e.lastModifiedDate,t,n,o].join("::")):null},getCopyFileId:function(e,t,n,o,r){var a=t["content-length"],s=t.etag||"",c=t["last-modified"];return e&&n?i.md5([e,a,s,c,n,o,r].join("::")):null},getUploadIdList:function(e){if(!e)return null;u.call(this);for(var t=[],n=0;n<o.length;n++)o[n][0]===e&&t.push(o[n][1]);return t.length?t:null},saveUploadId:function(e,t,n){if(u.call(this),e){for(var r=o.length-1;r>=0;r--){var i=o[r];i[0]===e&&i[1]===t&&o.splice(r,1)}o.unshift([e,t,Math.round(Date.now()/1e3)]),o.length>n&&o.splice(n),l()}},removeUploadId:function(e){u.call(this),delete d.using[e];for(var t=o.length-1;t>=0;t--)o[t][1]===e&&o.splice(t,1);l()}};e.exports=d},function(e,t,n){var o=n(11);e.exports=o},function(e,t,n){var o=n(1),r=n(8),i=n(26),a=n(27),s=n(29),c=n(7),u={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},l=function(e){this.options=o.extend(o.clone(u),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId,this.options.SecretId&&this.options.SecretId.indexOf(" "),this.options.SecretKey&&this.options.SecretKey.indexOf(" "),o.isNode(),r.init(this),i.init(this)};a.init(l,i),s.init(l,i),l.util={md5:o.md5,xml2json:o.xml2json,json2xml:o.json2xml,encodeBase64:o.encodeBase64},l.getAuthorization=o.getAuth,l.version=c.version,e.exports=l},function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__(0);(function(){var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self)),NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===_typeof(module)&&module.exports,AMD=__webpack_require__(14),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===_typeof(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t,n){return new Md5(!0).update(t,n)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.getCtx=e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e,t){if(!this.finalized){for(var n,o,r=0,i=e.length,a=this.blocks,s=this.buffer8;r<i;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),ARRAY_BUFFER)for(o=this.start;r<i&&o<64;++r)n=e.charCodeAt(r),t||n<128?s[o++]=n:n<2048?(s[o++]=192|n>>6,s[o++]=128|63&n):n<55296||n>=57344?(s[o++]=224|n>>12,s[o++]=128|n>>6&63,s[o++]=128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++r)),s[o++]=240|n>>18,s[o++]=128|n>>12&63,s[o++]=128|n>>6&63,s[o++]=128|63&n);else for(o=this.start;r<i&&o<64;++r)n=e.charCodeAt(r),t||n<128?a[o>>2]|=n<<SHIFT[3&o++]:n<2048?(a[o>>2]|=(192|n>>6)<<SHIFT[3&o++],a[o>>2]|=(128|63&n)<<SHIFT[3&o++]):n<55296||n>=57344?(a[o>>2]|=(224|n>>12)<<SHIFT[3&o++],a[o>>2]|=(128|n>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&n)<<SHIFT[3&o++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++r)),a[o>>2]|=(240|n>>18)<<SHIFT[3&o++],a[o>>2]|=(128|n>>12&63)<<SHIFT[3&o++],a[o>>2]|=(128|n>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&n)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,o,r,i,a=this.blocks;this.first?t=((t=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(o=((o=(-1732584194^2004318071&e)+a[1]-117830708)<<12|o>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|n>>>15)+o<<0)&(o^e))+a[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((o=this.h3)^t&(n^o))+a[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+a[1]-389564586)<<12|o>>>20)+e<<0)&(e^t))+a[2]+606105819)<<17|n>>>15)+o<<0)&(o^e))+a[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(o^t&(n^o))+a[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+a[5]+1200080426)<<12|o>>>20)+e<<0)&(e^t))+a[6]-1473231341)<<17|n>>>15)+o<<0)&(o^e))+a[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(o^t&(n^o))+a[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+a[9]-1958414417)<<12|o>>>20)+e<<0)&(e^t))+a[10]-42063)<<17|n>>>15)+o<<0)&(o^e))+a[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(o^t&(n^o))+a[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+a[13]-40341101)<<12|o>>>20)+e<<0)&(e^t))+a[14]-1502002290)<<17|n>>>15)+o<<0)&(o^e))+a[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+a[1]-165796510)<<5|e>>>27)+t<<0)^t))+a[6]-1069501632)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+a[11]+643717713)<<14|n>>>18)+o<<0)^o))+a[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+a[5]-701558691)<<5|e>>>27)+t<<0)^t))+a[10]+38016083)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+a[15]-660478335)<<14|n>>>18)+o<<0)^o))+a[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+a[9]+568446438)<<5|e>>>27)+t<<0)^t))+a[14]-1019803690)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+a[3]-187363961)<<14|n>>>18)+o<<0)^o))+a[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+a[13]-1444681467)<<5|e>>>27)+t<<0)^t))+a[2]-51403784)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+a[7]+1735328473)<<14|n>>>18)+o<<0)^o))+a[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((i=(o=((o+=((r=t^n)^(e=((e+=(r^o)+a[5]-378558)<<4|e>>>28)+t<<0))+a[8]-2022574463)<<11|o>>>21)+e<<0)^e)^(n=((n+=(i^t)+a[11]+1839030562)<<16|n>>>16)+o<<0))+a[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((i=(o=((o+=((r=t^n)^(e=((e+=(r^o)+a[1]-1530992060)<<4|e>>>28)+t<<0))+a[4]+1272893353)<<11|o>>>21)+e<<0)^e)^(n=((n+=(i^t)+a[7]-155497632)<<16|n>>>16)+o<<0))+a[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((i=(o=((o+=((r=t^n)^(e=((e+=(r^o)+a[13]+681279174)<<4|e>>>28)+t<<0))+a[0]-358537222)<<11|o>>>21)+e<<0)^e)^(n=((n+=(i^t)+a[3]-722521979)<<16|n>>>16)+o<<0))+a[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((i=(o=((o+=((r=t^n)^(e=((e+=(r^o)+a[9]-640364487)<<4|e>>>28)+t<<0))+a[12]-421815835)<<11|o>>>21)+e<<0)^e)^(n=((n+=(i^t)+a[15]+530742520)<<16|n>>>16)+o<<0))+a[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+a[0]-198630844)<<6|e>>>26)+t<<0)|~n))+a[7]+1126891415)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+a[14]-1416354905)<<15|n>>>17)+o<<0)|~e))+a[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+a[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+a[3]-1894986606)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+a[10]-1051523)<<15|n>>>17)+o<<0)|~e))+a[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+a[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+a[15]-30611744)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+a[6]-1560198380)<<15|n>>>17)+o<<0)|~e))+a[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+a[4]-145523070)<<6|e>>>26)+t<<0)|~n))+a[11]-1120210379)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+a[2]+718787259)<<15|n>>>17)+o<<0)|~e))+a[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=o+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+o<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(e){if("hex"===e)return this.hex();this.finalize();var t=this.h0,n=this.h1,o=this.h2,r=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,o="",r=this.array(),i=0;i<15;)e=r[i++],t=r[i++],n=r[i++],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=r[i],o+(BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==")};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__(3),__webpack_require__(13),__webpack_require__(4)(module))},function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e){(function(t){e.exports=t}).call(this,{})},function(e,t,n){(function(e){var t,o,r,i,a,s,c,u=n(0),l=l||function(e){var t={},n=t.lib={},o=function(){},r=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var r=0;r<e;r++)t[o+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(o+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[o+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;o<t;o+=4)n.push(4294967296*e.random()|0);return new i.init(n,t)}}),a=t.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++){var r=t[o>>>2]>>>24-o%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new i.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new i.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var c=0;c<t;c+=a)this._doProcessBlock(o,c);c=o.splice(0,t),n.sigBytes-=r}return new i.init(c,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=t.algo={};return t}(Math);o=(a=(t=l).lib).WordArray,r=a.Hasher,i=[],a=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],a=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(o<<5|o>>>27)+c+i[u],l=20>u?l+(1518500249+(r&a|~r&s)):40>u?l+(1859775393+(r^a^s)):60>u?l+((r&a|r&s|a&s)-1894007588):l+((r^a^s)-899497514),c=s,s=a,a=r<<30|r>>>2,r=o,o=l}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(a),t.HmacSHA1=r._createHmacHelper(a),function(){var e=l,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var o=e.blockSize,r=4*o;n.sigBytes>r&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),s=i.words,c=a.words,u=0;u<o;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),c=(s=l).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)r.push(o.charAt(a>>>6*(3-s)&63));var c=o.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,o=n.charAt(64);if(o){var r=e.indexOf(o);-1!=r&&(t=r)}for(var i=[],a=0,s=0;s<t;s++)if(s%4){var u=n.indexOf(e.charAt(s-1))<<s%4*2,l=n.indexOf(e.charAt(s))>>>6-s%4*2;i[a>>>2]|=(u|l)<<24-a%4*8,a++}return c.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},"object"===u(e)?e.exports=l:window.CryptoJS=l}).call(this,n(4)(e))},function(e,t,n){var o=n(17).DOMParser,r=function(){this.version="1.3.5";var e={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},t=new RegExp(/(?!xmlns)^.*:/);return new RegExp(/^\s+|\s+$/g),this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){if(e){var n=this.stringToXML(e);return n.getElementsByTagName("parsererror").length?null:this.parseXML(n,t)}return null},this.parseXML=function(n,o){for(var i in o)e[i]=o[i];var a={},s=0,c="";if(n.childNodes.length)for(var u,l,d,p=0;p<n.childNodes.length;p++)4===(u=n.childNodes.item(p)).nodeType?e.mergeCDATA&&(c+=u.nodeValue):3===u.nodeType?c+=u.nodeValue:1===u.nodeType&&(0===s&&(a={}),l=e.stripElemPrefix?u.nodeName.replace(t,""):u.nodeName,d=r.parseXML(u),a.hasOwnProperty(l)?(a[l].constructor!==Array&&(a[l]=[a[l]]),a[l].push(d)):(a[l]=d,s++));return Object.keys(a).length||(a=c||""),a},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new o).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({});e.exports=function(e){return r.parseString(e)}},function(e,t,n){var o=n(5);t.DOMImplementation=o.DOMImplementation,t.XMLSerializer=o.XMLSerializer,t.DOMParser=n(18).DOMParser},function(e,t,n){var o=n(2),r=n(5),i=n(19),a=n(20),s=r.DOMImplementation,c=o.NAMESPACE,u=a.ParseError,l=a.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function f(){this.cdata=!1}function h(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function y(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var n=this.options,o=new l,r=n.domBuilder||new f,a=n.errorHandler,s=n.locator,u=n.xmlns||{},p=/\/x?html?$/.test(t),h=p?i.HTML_ENTITIES:i.XML_ENTITIES;s&&r.setDocumentLocator(s),o.errorHandler=function(e,t,n){if(!e){if(t instanceof f)return t;e=t}var o={},r=e instanceof Function;function i(t){var i=e[t];!i&&r&&(i=2==e.length?function(n){e(t,n)}:e),o[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+function(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(n))}||function(){}}return n=n||{},i("warning"),i("error"),i("fatalError"),o}(a,r,s),o.domBuilder=n.domBuilder||r,p&&(u[""]=c.HTML),u.xml=u.xml||c.XML;var g=n.normalizeLineEndings||d;return e&&"string"==typeof e?o.parse(g(e),u,h):o.errorHandler.error("invalid doc source"),r.doc},f.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,o){var r=this.doc,i=r.createElementNS(e,n||t),a=o.length;y(this,i),this.currentElement=i,this.locator&&h(this.locator,i);for(var s=0;s<a;s++){e=o.getURI(s);var c=o.getValue(s),u=(n=o.getQName(s),r.createAttributeNS(e,n));this.locator&&h(o.getLocator(s),u),u.value=u.nodeValue=c,i.setAttributeNode(u)}},endElement:function(){var e=this.currentElement;e.tagName,this.currentElement=e.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&h(this.locator,n),y(this,n)},ignorableWhitespace:function(){},characters:function(e,t,n){if(e=g.apply(this,arguments)){if(this.cdata)var o=this.doc.createCDATASection(e);else o=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(o):/^\s*$/.test(e)&&this.doc.appendChild(o),this.locator&&h(this.locator,o)}},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=g.apply(this,arguments);var o=this.doc.createComment(e);this.locator&&h(this.locator,o),y(this,o)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var o=this.doc.implementation;if(o&&o.createDocumentType){var r=o.createDocumentType(e,t,n);this.locator&&h(this.locator,r),y(this,r),this.doc.doctype=r}},warning:function(){},error:function(){},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){f.prototype[e]=function(){return null}}),t.__DOMHandler=f,t.normalizeLineEndings=d,t.DOMParser=p},function(e,t,n){var o=n(2).freeze;t.XML_ENTITIES=o({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=o({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES},function(e,t,n){var o=n(2).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+i.source+"*(?::"+r.source+i.source+"*)?$"),s=0,c=1,u=2,l=3,d=4,p=5,f=6,h=7;function g(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,g)}function y(){}function m(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function v(e,t,n,r,i,a){function g(e,t,o){n.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),o)}for(var y,m=++t,v=s;;){var b=e.charAt(m);switch(b){case"=":if(v===c)y=e.slice(t,m),v=l;else{if(v!==u)throw new Error("attribute equal must after attrName");v=l}break;case"'":case'"':if(v===l||v===c){if(v===c&&(a.warning('attribute value must after "="'),y=e.slice(t,m)),t=m+1,!((m=e.indexOf(b,t))>0))throw new Error("attribute value no end '"+b+"' match");g(y,C=e.slice(t,m),t-1),v=p}else{if(v!=d)throw new Error('attribute value must after "="');g(y,C=e.slice(t,m),t),a.warning('attribute "'+y+'" missed start quot('+b+")!!"),t=m+1,v=p}break;case"/":switch(v){case s:n.setTagName(e.slice(t,m));case p:case f:case h:v=h,n.closed=!0;case d:case c:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),v==s&&n.setTagName(e.slice(t,m)),m;case">":switch(v){case s:n.setTagName(e.slice(t,m));case p:case f:case h:break;case d:case c:"/"===(C=e.slice(t,m)).slice(-1)&&(n.closed=!0,C=C.slice(0,-1));case u:v===u&&(C=y),v==d?(a.warning('attribute "'+C+'" missed quot(")!'),g(y,C,t)):(o.isHTML(r[""])&&C.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+C+'" missed value!! "'+C+'" instead!!'),g(C,C,t));break;case l:throw new Error("attribute value missed!!")}return m;case"\x80":b=" ";default:if(b<=" ")switch(v){case s:n.setTagName(e.slice(t,m)),v=f;break;case c:y=e.slice(t,m),v=u;break;case d:var C=e.slice(t,m);a.warning('attribute "'+C+'" missed quot(")!!'),g(y,C,t);case p:v=f}else switch(v){case u:n.tagName,o.isHTML(r[""])&&y.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+y+'" missed value!! "'+y+'" instead2!!'),g(y,y,t),t=m,v=c;break;case p:a.warning('attribute space is required"'+y+'"!!');case f:v=c,t=m;break;case l:v=d,t=m;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function b(e,t,n){for(var r=e.tagName,i=null,a=e.length;a--;){var s=e[a],c=s.qName,u=s.value;if((f=c.indexOf(":"))>0)var l=s.prefix=c.slice(0,f),d=c.slice(f+1),p="xmlns"===l&&d;else d=c,l=null,p="xmlns"===c&&"";s.localName=d,!1!==p&&(null==i&&(i={},S(n,n={})),n[p]=i[p]=u,s.uri=o.XMLNS,t.startPrefixMapping(p,u))}for(a=e.length;a--;)(l=(s=e[a]).prefix)&&("xml"===l&&(s.uri=o.XML),"xmlns"!==l&&(s.uri=n[l||""]));var f;(f=r.indexOf(":"))>0?(l=e.prefix=r.slice(0,f),d=e.localName=r.slice(f+1)):(l=null,d=e.localName=r);var h=e.uri=n[l||""];if(t.startElement(h,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(h,d,r),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&t.endPrefixMapping(l)}function C(e,t,n,o,r){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,o),r.characters(a,0,a.length),i)}return t+1}function k(e,t,n,o){var r=o[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),o[n]=r),r<t}function S(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function I(e,t,n,o){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(o.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var i=function(e,t){var n,o=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(o.push(n),n[1])return o}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var s=i[1][0],c=!1,u=!1;a>3&&(/^public$/i.test(i[2][0])?(c=i[3][0],u=a>4&&i[4][0]):/^system$/i.test(i[2][0])&&(u=i[3][0]));var l=i[a-1];return n.startDTD(s,c,u),n.endDTD(),l.index+l[0].length}return-1}function w(e,t,n){var o=e.indexOf("?>",t);if(o){var r=e.substring(t,o).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),o+2):-1}return-1}function P(){this.attributeNames={}}g.prototype=new Error,g.prototype.name=g.name,y.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),S(t,t={}),function(e,t,n,r,i){function a(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function s(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?a(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function c(t){if(t>S){var n=e.substring(S,t).replace(/&#?\w+;/g,s);f&&u(S),r.characters(n,0,t-S),S=t}}function u(t,n){for(;t>=d&&(n=p.exec(e));)l=n.index,d=l+n[0].length,f.lineNumber++;f.columnNumber=t-l+1}for(var l=0,d=0,p=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,h=[{currentNSMap:t}],y={},S=0;;){try{var x=e.indexOf("<",S);if(x<0){if(!e.substr(S).match(/^\s*$/)){var _=r.doc,T=_.createTextNode(e.substr(S));_.appendChild(T),r.currentElement=T}return}switch(x>S&&c(x),e.charAt(x+1)){case"/":var R=e.indexOf(">",x+3),A=e.substring(x+2,R).replace(/[ \t\n\r]+$/g,""),E=h.pop();R<0?(A=e.substring(x+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+E.tagName),R=x+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),R=x+1+A.length);var O=E.localNSMap,N=E.tagName==A;if(N||E.tagName&&E.tagName.toLowerCase()==A.toLowerCase()){if(r.endElement(E.uri,E.localName,A),O)for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&r.endPrefixMapping(B);N||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+E.tagName)}else h.push(E);R++;break;case"?":f&&u(x),R=w(e,x,r);break;case"!":f&&u(x),R=I(e,x,r,i);break;default:f&&u(x);var D=new P,M=h[h.length-1].currentNSMap,U=(R=v(e,x,D,M,s,i),D.length);if(!D.closed&&k(e,R,D.tagName,y)&&(D.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),f&&U){for(var L=m(f,{}),j=0;j<U;j++){var F=D[j];u(F.offset),F.locator=m(f,{})}r.locator=L,b(D,r,M)&&h.push(D),r.locator=f}else b(D,r,M)&&h.push(D);o.isHTML(D.uri)&&!D.closed?R=C(e,R,D.tagName,s,r):R++}}catch(e){if(e instanceof g)throw e;i.error("element parse error: "+e),R=-1}R>S?S=R:c(Math.max(x,S)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},P.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=y,t.ParseError=g},function(e,t,n){var o=n(0),r="a-zA-Z_\xc0-\xd6\xd8-\xf6\xf8-\xff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fff\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd",i=new RegExp("^([^"+r+"])|^((x|X)(m|M)(l|L))|([^"+r+"-.0-9\xb7\u0300-\u036f\u203f\u2040])","g"),a=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,s=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},c=function(e,t){var n=function(e,n,o,r,a){var s=void 0!==t.indent?t.indent:"\t",c=t.prettyPrint?"\n"+new Array(r).join(s):"";t.removeIllegalNameCharacters&&(e=e.replace(i,"_"));var u=[c,"<",e,o||""];return n&&n.length>0?(u.push(">"),u.push(n),a&&u.push(c),u.push("</"),u.push(e),u.push(">")):u.push("/>"),u.join("")};return function e(r,i,c){var u=o(r);switch((Array.isArray?Array.isArray(r):r instanceof Array)?u="array":r instanceof Date&&(u="date"),u){case"array":var l=[];return r.map(function(t){l.push(e(t,0,c+1))}),t.prettyPrint&&l.push("\n"),l.join("");case"date":return r.toJSON?r.toJSON():r+"";case"object":var d=[];for(var p in r)if(r.hasOwnProperty(p))if(r[p]instanceof Array)for(var f=0;f<r[p].length;f++)r[p].hasOwnProperty(f)&&d.push(n(p,e(r[p][f],0,c+1),null,c+1,s(r[p][f]).length));else d.push(n(p,e(r[p],0,c+1),null,c+1));return t.prettyPrint&&d.length>0&&d.push("\n"),d.join("");case"function":return r();default:return t.escape?(""+r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(a,""):""+r}}(e,0,0)},u=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};e.exports=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",r="";return t&&("object"==o(t)?(t.xmlHeader&&(n=u(!!t.xmlHeader.standalone)),void 0!==t.docType&&(r="<!DOCTYPE "+t.docType+">")):n=u()),[n,(t=t||{}).prettyPrint&&r?"\n":"",r,c(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},function(e){var t=function(e){var t=(e=e||{}).Base64,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){for(var t={},n=0,o=e.length;n<o;n++)t[e.charAt(n)]=n;return t}(n),r=String.fromCharCode,i=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?r(192|t>>>6)+r(128|63&t):r(224|t>>>12&15)+r(128|t>>>6&63)+r(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return r(240|t>>>18&7)+r(128|t>>>12&63)+r(128|t>>>6&63)+r(128|63&t)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(e){return e.replace(a,i)},c=function(e){var t=[0,2,1][e.length%3],o=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[n.charAt(o>>>18),n.charAt(o>>>12&63),t>=2?"=":n.charAt(o>>>6&63),t>=1?"=":n.charAt(63&o)].join("")},u=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,c)},l=function(e){return u(s(e))},d=function(e,t){return t?l(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):l(String(e))},p=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),f=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return r(55296+(t>>>10))+r(56320+(1023&t));case 3:return r((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return r((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},h=function(e){return e.replace(p,f)},g=function(e){var t=e.length,n=t%4,i=(t>0?o[e.charAt(0)]<<18:0)|(t>1?o[e.charAt(1)]<<12:0)|(t>2?o[e.charAt(2)]<<6:0)|(t>3?o[e.charAt(3)]:0),a=[r(i>>>16),r(i>>>8&255),r(255&i)];return a.length-=[0,0,2,1][n],a.join("")},y=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,g)},m=function(e){return h(y(e))},v=function(e){return m(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};return{VERSION:"2.1.9",atob:y,btoa:u,fromBase64:v,toBase64:d,utob:s,encode:d,encodeURI:function(e){return d(e,!0)},btou:h,decode:v,noConflict:function(){var n=e.Base64;return e.Base64=t,n}}}();e.exports=t},function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e){function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var o,r,i;i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})}function o(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var r="__BEACON_",i="__BEACON_deviceId",a="last_report_time",s="sending_event_ids",c="beacon_config",u="beacon_config_request_time",l=function(){function e(){var e=this;this.emit=function(t,n){if(e){var o,r=e.__EventsList[t];if(null==r?void 0:r.length){r=r.slice();for(var i=0;i<r.length;i++){o=r[i];try{var a=o.callback.apply(e,[n]);if(1===o.type&&e.remove(t,o.callback),!1===a)break}catch(e){throw e}}}return e}},this.__EventsList={}}return e.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},e.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var o=this.__EventsList[e];if(o||(o=this.__EventsList[e]=[]),-1===this.indexOf(o,t)){var r={name:e,type:n||0,callback:t};return o.push(r),this}return this}},e.prototype.one=function(e,t){this.on(e,t,1)},e.prototype.remove=function(e,t){if(this){var n=this.__EventsList[e];if(!n)return null;if(!t){try{delete this.__EventsList[e]}catch(e){}return null}if(n.length){var o=this.indexOf(n,t);n.splice(o,1)}return this}},e}();function d(e,t){for(var n={},o=0,r=Object.keys(e);o<r.length;o++){var i=r[o],a=e[i];if("string"==typeof a)n[p(i)]=p(a);else{if(t)throw new Error("value mast be string  !!!!");n[p(String(i))]=p(String(a))}}return n}function p(e){if("string"!=typeof e)return e;try{return e.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch(e){return""}}function f(e){return String(e.A99)+String(e.A100)}var h=function(){},g=function(){function e(e){var n=this;this.lifeCycle=new l,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline \u65b9\u6cd5\u9700\u8981\u4f20\u5165\u81f3\u5c11\u6709\u4e00\u4e2a pipe \u7684\u6570\u7ec4");return 1===e.length?function(t,n){e[0](t,n||h)}:e.reduce(function(e,t){return function(n,o){return void 0===o&&(o=h),e(n,function(e){return null==t?void 0:t(e,o)})}})}([function(e){n.send({url:n.strategy.getUploadUrl(),data:e,method:"post",contentType:"application/json;charset=UTF-8"},function(){var t=n.config.onReportSuccess;"function"==typeof t&&t(JSON.stringify(e.events))},function(){var t=n.config.onReportFail;"function"==typeof t&&t(JSON.stringify(e.events))})}]),function(e,t){if(!e)throw t instanceof Error?t:new Error(t)}(Boolean(e.appkey),"appkey must be initial"),this.config=t({},e)}return e.prototype.onUserAction=function(e,t){this.preReport(e,t,!1)},e.prototype.onDirectUserAction=function(e,t){this.preReport(e,t,!0)},e.prototype.preReport=function(e,t,n){e?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(e)||this.strategy.isSampleEvent(e)||this.onReport(e,t,n)):this.errorReport.reportError("602"," no eventCode")},e.prototype.addAdditionalParams=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];this.additionalParams[o]=e[o]}},e.prototype.setChannelId=function(e){this.commonInfo.channelID=String(e)},e.prototype.setOpenId=function(e){this.commonInfo.openid=String(e)},e.prototype.setUnionid=function(e){this.commonInfo.unid=String(e)},e.prototype.getDeviceId=function(){return this.commonInfo.deviceId},e.prototype.getCommonInfo=function(){return this.commonInfo},e.prototype.removeSendingId=function(e){try{var t=JSON.parse(this.storage.getItem(s)),n=t.indexOf(e);-1!=n&&(t.splice(n,1),this.storage.setItem(s,JSON.stringify(t)))}catch(e){}},e}(),y=function(){function e(e,t,n,o){this.requestParams={},this.network=o,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=e.appkey,this.requestParams.platform=n,this.requestParams.uin=t.deviceId,this.requestParams.model="",this.requestParams.os=n,this.requestParams.app_version=e.appVersion,this.requestParams.sdk_version=t.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=e.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return e.prototype.reportError=function(e,t){this.requestParams._dc=Math.random(),this.requestParams.error_msg=t,this.requestParams.error_code=e,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(){})},e}(),m=function(){function e(e,t,n,o,r){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=t.appkey,this.storage=o,this.needQueryConfig=e;try{var i=JSON.parse(this.storage.getItem(c));i&&this.processData(i)}catch(e){}t.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!t.isOversea&&this.needRequestConfig()&&this.requestConfig(t.appVersion,n,r)}return e.prototype.requestConfig=function(e,t,n){var o=this;this.storage.setItem(u,Date.now().toString()),n.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:"undefined"==typeof wx?"3":"4",mainAppKey:this.appkey,appVersion:e,sdkVersion:t.sdkVersion,osVersion:t.userAgent,model:"",packageName:"",params:{A3:t.deviceId}}).then(function(e){if(0==e.data.ret)try{var t=JSON.parse(e.data.beaconConfig);t&&(o.processData(t),o.storage.setItem(c,e.data.beaconConfig))}catch(e){}else o.processData(null),o.storage.setItem(c,"")}).catch(function(){})},e.prototype.processData=function(e){var t,n,o,r,i;this.strategy.isEventUpOnOff=null!==(t=null==e?void 0:e.isEventUpOnOff)&&void 0!==t?t:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=null!==(n=null==e?void 0:e.httpsUploadUrl)&&void 0!==n?n:this.strategy.httpsUploadUrl,this.strategy.requestInterval=null!==(o=null==e?void 0:e.requestInterval)&&void 0!==o?o:this.strategy.requestInterval,this.strategy.blacklist=null!==(r=null==e?void 0:e.blacklist)&&void 0!==r?r:this.strategy.blacklist,this.strategy.samplelist=null!==(i=null==e?void 0:e.samplelist)&&void 0!==i?i:this.strategy.samplelist;for(var a=0,s=this.strategy.samplelist;a<s.length;a++){var c=s[a].split(",");2==c.length&&(this.realSample[c[0]]=c[1])}},e.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var e=Number(this.storage.getItem(u));return Date.now()-e>6e4*this.strategy.requestInterval},e.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},e.prototype.isBlackEvent=function(e){return-1!=this.strategy.blacklist.indexOf(e)},e.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},e.prototype.isSampleEvent=function(e){return!!Object.prototype.hasOwnProperty.call(this.realSample,e)&&this.realSample[e]<Math.floor(Math.random()*Math.floor(1e4))},e}(),v="session_storage_key",b=function(){function e(e,t,n){this.getSessionStackDepth=0,this.beacon=n,this.storage=e,this.duration=t,this.appkey=n.config.appkey}return e.prototype.getSession=function(){this.getSessionStackDepth+=1;var e=this.storage.getItem(v);if(!e)return this.createSession();var t="",n=0;try{var o=JSON.parse(e)||{sessionId:void 0,sessionStart:void 0};if(!o.sessionId||!o.sessionStart)return this.createSession();var r=Number(this.storage.getItem(a));if(Date.now()-r>this.duration)return this.createSession();t=o.sessionId,n=o.sessionStart,this.getSessionStackDepth=0}catch(e){}return{sessionId:t,sessionStart:n}},e.prototype.createSession=function(){var e=Date.now(),t={sessionId:this.appkey+"_"+e.toString(),sessionStart:e};this.storage.setItem(v,JSON.stringify(t)),this.storage.setItem(a,e.toString());var n="is_new_user",o=this.storage.getItem(n);return this.getSessionStackDepth<=1&&this.beacon.onDirectUserAction("rqd_applaunched",{A21:o?"N":"Y"}),this.storage.setItem(n,JSON.stringify(!1)),t},e}();function C(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,o=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var r=parseFloat(RegExp.$1);return 7==r?7:8==r?8:9==r?9:10==r?10:6}return n?-2:o?11:-1}var k,S,I=function(){return(I=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w=function(){function e(e,t){void 0===t&&(t={}),this.reportOptions={},this.config=e,this.reportOptions=t}return e.canUseDB=function(){return!!(null===window||void 0===window?void 0:window.indexedDB)},e.prototype.openDB=function(){var t=this;return new Promise(function(n,o){if(!e.canUseDB())return o({message:"\u5f53\u524d\u4e0d\u652f\u6301 indexeddb"});var r=t.config,i=r.name,a=r.version,s=r.stores,c=indexedDB.open(i,a);c.onsuccess=function(){t.db=c.result,n(),I({result:1,func:"open",params:JSON.stringify(t.config)},t.reportOptions)},c.onerror=function(e){var n,r;o(e),I({result:0,func:"open",params:JSON.stringify(t.config),error_msg:null===(r=null===(n=e.target)||void 0===n?void 0:n.error)||void 0===r?void 0:r.message},t.reportOptions)},c.onupgradeneeded=function(){t.db=c.result;try{null==s||s.forEach(function(e){t.createStore(e)})}catch(e){I({result:0,func:"open",params:JSON.stringify(t.config),error_msg:e.message},t.reportOptions),o(e)}}})},e.prototype.useStore=function(e){return this.storeName=e,this},e.prototype.deleteDB=function(){var e=this;return this.closeDB(),new Promise(function(t,n){var o=indexedDB.deleteDatabase(e.config.name);o.onsuccess=function(){return t()},o.onerror=n})},e.prototype.closeDB=function(){var e;null===(e=this.db)||void 0===e||e.close(),this.db=null},e.prototype.getStoreCount=function(){var e=this;return new Promise(function(t,n){var o=e.getStore("readonly").count();o.onsuccess=function(){return t(o.result)},o.onerror=n})},e.prototype.clearStore=function(){var e=this;return new Promise(function(t,n){var o=e.getStore("readwrite").clear();o.onsuccess=function(){return t()},o.onerror=n})},e.prototype.add=function(e,t){var n=this;return new Promise(function(o,r){var i=n.getStore("readwrite").add(e,t);i.onsuccess=function(){o(i.result)},i.onerror=r})},e.prototype.put=function(e,t){var n=this;return new Promise(function(o,r){var i=n.getStore("readwrite").put(e,t);i.onsuccess=function(){o(i.result)},i.onerror=r})},e.prototype.getStoreAllData=function(){var e=this;return new Promise(function(t,n){var o=e.getStore("readonly").openCursor(),r=[];o.onsuccess=function(){var e;if(null===(e=o.result)||void 0===e?void 0:e.value){var n=o.result.value;r.push(n),o.result.continue()}else t(r)},o.onerror=n})},e.prototype.getDataRangeByIndex=function(e,t,n,o,r){var i=this;return new Promise(function(a,s){var c=i.getStore().index(e),u=IDBKeyRange.bound(t,n,o,r),l=[],d=c.openCursor(u);d.onsuccess=function(){var e;(null===(e=null==d?void 0:d.result)||void 0===e?void 0:e.value)?(l.push(null==d?void 0:d.result.value),null==d||d.result.continue()):a(l)},d.onerror=s})},e.prototype.removeDataByIndex=function(e,t,n,o,r){var i=this;return new Promise(function(a,s){var c=i.getStore("readwrite").index(e),u=IDBKeyRange.bound(t,n,o,r),l=c.openCursor(u),d=0;l.onsuccess=function(e){var t=e.target.result;t?(d+=1,t.delete(),t.continue()):a(d)},l.onerror=s})},e.prototype.createStore=function(e){var t=e.name,n=e.indexes,o=void 0===n?[]:n,r=e.options;if(this.db){this.db.objectStoreNames.contains(t)&&this.db.deleteObjectStore(t);var i=this.db.createObjectStore(t,r);o.forEach(function(e){i.createIndex(e.indexName,e.keyPath,e.options)})}},e.prototype.getStore=function(e){var t;return void 0===e&&(e="readonly"),null===(t=this.db)||void 0===t?void 0:t.transaction(this.storeName,e).objectStore(this.storeName)},e}(),P="event_table_v3",x="eventId",_=function(){function e(e){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new w({name:"Beacon_"+e+"_V3",version:1,stores:[{name:P,options:{keyPath:x},indexes:[{indexName:x,keyPath:x,options:{unique:!0}}]}]}),this.open()}return e.prototype.getCount=function(){var e=this;return this.readyExec(function(){return e.db.getStoreCount()})},e.prototype.setItem=function(e,t){var n=this;return this.readyExec(function(){return n.db.add({eventId:e,value:t})})},e.prototype.getItem=function(e){return n(this,void 0,void 0,function(){var t=this;return o(this,function(){return[2,this.readyExec(function(){return t.db.getDataRangeByIndex(x,e,e)})]})})},e.prototype.removeItem=function(e){var t=this;return this.readyExec(function(){return t.db.removeDataByIndex(x,e,e)})},e.prototype.updateItem=function(e,t){var n=this;return this.readyExec(function(){return n.db.put({eventId:e,value:t})})},e.prototype.iterate=function(e){var t=this;return this.readyExec(function(){return t.db.getStoreAllData().then(function(t){t.forEach(function(t){e(t.value)})})})},e.prototype.open=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return e.db.openDB()}),[4,this.taskQueue];case 1:return t.sent(),this.isReady=!0,this.db.useStore(P),[2]}})})},e.prototype.readyExec=function(e){return this.isReady?e():(this.taskQueue=this.taskQueue.then(function(){return e()}),this.taskQueue)},e}(),T=function(){function e(e){this.keyObject={},this.storage=e}return e.prototype.getCount=function(){return this.storage.getStoreCount()},e.prototype.removeItem=function(e){this.storage.removeItem(e),delete this.keyObject[e]},e.prototype.setItem=function(e,t){var n=JSON.stringify(t);this.storage.setItem(e,n),this.keyObject[e]=t},e.prototype.iterate=function(e){for(var t=Object.keys(this.keyObject),n=0;n<t.length;n++){var o=this.storage.getItem(t[n]);e(JSON.parse(o))}},e}(),R=function(){function e(e,t){var n=this;this.dbEventCount=0,C()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new T(t),this.dbEventCount=this.store.getCount()):(this.store=new _(e),this.getCount().then(function(e){n.dbEventCount=e}).catch(function(){}))}return e.prototype.getCount=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,Promise.reject()];case 3:return[2]}})})},e.prototype.insertEvent=function(e,t){return n(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];n=f(e.mapValue),o.label=1;case 1:return o.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(n,e)];case 2:return[2,o.sent()];case 3:return r=o.sent(),t&&t(r,e),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},e.prototype.getEvents=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:e=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.store.iterate(function(t){e.push(t)})];case 2:case 3:return t.sent(),[2,Promise.all(e)];case 4:return[2]}})})},e.prototype.removeEvent=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:t=f(e.mapValue),n.label=1;case 1:return n.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(t)];case 2:return[2,n.sent()];case 3:return n.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},e}(),A=function(){return(A=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function E(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function O(e,t){var n=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&n)return null;var o=!t.isSkipEmpty&&n?"":e;try{return t.encode?encodeURIComponent(o):o}catch(e){return null}}function N(e,t){return new Promise(function(n,o){if(t&&document.querySelectorAll("script[data-tag="+t+"]").length)return n();var r=document.createElement("script"),i=A({type:"text/javascript",charset:"utf-8"},e);Object.keys(i).forEach(function(e){return function(e,t,n){if(e)return void 0===n?e.getAttribute(t):e.setAttribute(t,n)}(r,e,i[e])}),t&&(r.dataset.tag=t),r.onload=function(){return n()},r.onreadystatechange=function(){var e=r.readyState;["complete","loaded"].includes(e)&&(r.onreadystatechange=null,n())},r.onerror=o,document.body.appendChild(r)})}(S=k||(k={}))[S.equal=0]="equal",S[S.low=-1]="low",S[S.high=1]="high";var B=function(){return(B=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function D(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})}function M(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var U=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},e.prototype.traverse=function(e,t){void 0===t&&(t=!1);var n=Promise.resolve(e);return(t?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(e,t){if(t){var o=t.resolved,r=t.rejected;n=n.then(o,r)}return e},""),n},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e}(),L={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new U,response:new U}},j=/^([a-z][a-z\d+\-.]*:)?\/\//i,F=Object.prototype.toString;function H(e){return D(this,void 0,void 0,function(){var t;return M(this,function(n){switch(n.label){case 0:if(window.fetch)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,N({src:e})];case 2:return n.sent(),[3,4];case 3:throw t=n.sent(),new Error("\u52a0\u8f7d polyfill "+e+" \u5931\u8d25: "+t.message);case 4:return[2]}})})}function q(e){return D(this,void 0,void 0,function(){var t,n,o,r,i,a,s,c,u,l,d,p,f,h,g,y,m;return M(this,function(v){switch(v.label){case 0:return t=L.baseURL,n=L.defaults,o=L.interceptors,[4,H(L.polyfillUrl)];case 1:return v.sent(),(r=B(B({},n),e)).headers||(r.headers=function(e){void 0===e&&(e="GET");var t=L.headers[e]||{};return B(B({},L.headers.common),t)}(r.method)),function(e){["Accept","Content-Type"].forEach(function(t){return n=t,void((o=e.headers)&&Object.keys(o).forEach(function(e){e!==n&&e.toUpperCase()===n.toUpperCase()&&(o[n]=o[e],delete o[e])}));var n,o}),function(e){if("[object Object]"!==F.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e.body)&&(e.body=JSON.stringify(e.body),e.headers&&(e.headers["Content-Type"]="application/json;charset=utf-8"))}(r),[4,o.request.traverse(r,!0)];case 2:if((i=v.sent())instanceof Error)throw i;return i.url=function(e,t){return!e||j.test(t)?t:e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}(t,i.url),a=i.url,s=i.timeout,c=i.params,u=i.method,l=["GET","DELETE","OPTIONS","HEAD"].includes(void 0===u?"GET":u)&&!!c,d=l?function(e,t){void 0===t&&(t={encode:!0,isSkipEmpty:!1});var n=e.url,o=e.query,r=void 0===o?{}:o,i=e.hash,a=n.split("#"),s=a[0],c=a[1],u=void 0===c?"":c,l=s.split("?")[0],d=[],p=O(i||u,t),f=A(A({},function(e){var t=e.split("#"),n=t[0],o=t[1],r=void 0===o?"":o,i=n.split("?"),a=i[0],s=i[1],c=void 0===s?"":s,u=E(r),l=Object.create(null);return c.split("&").forEach(function(e){var t=e.split("="),n=t[0],o=t[1],r=void 0===o?"":o,i=E(n),a=E(r);null===i||null===a||""===i&&""===a||l[i]||(l[i]=a)}),{url:a,query:l,hash:u}}(n).query),r);return Object.keys(f).forEach(function(e){var n=O(e,t),o=O(f[e],t);null!==n&&null!==o&&d.push(n+"="+o)}),l+(d.length?"?"+d.join("&"):"")+(p?"#"+p:"")}({url:a,query:c}):a,p=[],s&&!i.signal&&(g=new Promise(function(e){f=setTimeout(function(){e(new Error("timeout"))},s)}),p.push(g),h=new AbortController,i.signal=h.signal),p.push(fetch(d,i).catch(function(e){return e})),[4,Promise.race(p)];case 3:return y=v.sent(),f&&clearTimeout(f),[4,o.response.traverse(y)];case 4:if((m=v.sent())instanceof Error)throw null==h||h.abort(),m;return[2,m]}})})}var K=function(){function e(e){L.interceptors.request.use(function(n){var o=n.url,r=n.method,i=n.body,a=i;if(e.onReportBeforeSend){var s=e.onReportBeforeSend({url:o,method:r,data:i?JSON.parse(i):null});a=(null==s?void 0:s.data)?JSON.stringify(s.data):null}return"GET"!=r&&a?t(t({},n),{body:a}):n})}return e.prototype.get=function(e,r){return n(this,void 0,void 0,function(){var n,i;return o(this,function(o){switch(o.label){case 0:return[4,q(t({url:e},r))];case 1:return[4,(n=o.sent()).json()];case 2:return i=o.sent(),[2,Promise.resolve({data:i,status:n.status,statusText:n.statusText,headers:n.headers})]}})})},e.prototype.post=function(e,r,i){return n(this,void 0,void 0,function(){var n,a;return o(this,function(o){switch(o.label){case 0:return[4,q(t({url:e,body:r,method:"POST"},i))];case 1:return[4,(n=o.sent()).json()];case 2:return a=o.sent(),[2,Promise.resolve({data:a,status:n.status,statusText:n.statusText,headers:n.headers})]}})})},e}(),z=function(){function e(e){this.appkey=e}return e.prototype.getItem=function(e){try{return window.localStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.removeItem=function(e){try{window.localStorage.removeItem(this.getStoreKey(e))}catch(e){}},e.prototype.setItem=function(e,t){try{window.localStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.setSessionItem=function(e,t){try{window.sessionStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.getSessionItem=function(e){try{return window.sessionStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.getStoreKey=function(e){return r+this.appkey+"_"+e},e.prototype.createDeviceId=function(){try{var e=window.localStorage.getItem(i);return e||(e=function(){for(var e="",t=0;t<32;t++)e+="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789".charAt(Math.floor(51*Math.random()));return e}(),window.localStorage.setItem(i,e)),e}catch(e){return""}},e.prototype.clear=function(){try{for(var e=window.localStorage.length,t=0;t<e;t++){var n=window.localStorage.key(t);(null==n?void 0:n.substr(0,9))==r&&window.localStorage.removeItem(n)}}catch(e){}},e.prototype.getStoreCount=function(){var e=0;try{e=window.localStorage.length}catch(e){}return e},e}(),G="logid_start",V="4.5.14-web";return function(n){function o(e){var t=n.call(this,e)||this;t.qimei36="",t.uselessCycleTaskNum=0,t.underWeakNet=!1,t.pauseSearching=!1,t.send=function(e,n,o){t.storage.setItem(a,Date.now().toString()),t.network.post(t.uploadUrl||t.strategy.getUploadUrl(),e.data).then(function(o){var r;100==(null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.result)?t.delayTime=1e3*o.data.delayTime:t.delayTime=0,n&&n(e.data),e.data.events.forEach(function(e){t.store.removeEvent(e).then(function(){t.removeSendingId(f(e.mapValue))})}),t.doCustomCycleTask()}).catch(function(n){var r=e.data.events;t.errorReport.reportError(n.code?n.code.toString():"600",n.message),o&&o(e.data);var i=JSON.parse(t.storage.getItem(s));r.forEach(function(e){i&&-1!=i.indexOf(f(e))&&t.store.insertEvent(e,function(e){e&&t.errorReport.reportError("604","insertEvent fail!")}),t.removeSendingId(f(e))}),t.monitorUploadFailed()})};var o,r,i=C();return t.isUnderIE8=i>0&&i<8,t.isUnderIE8||(t.isUnderIE=i>0,e.needInitQimei&&function(e,t){var n;(void 0===n&&(n=Date.now()+"-"+Math.random()),new Promise(function(e,t){if(document.getElementById(n))e(void 0);else{var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.onload=function(){return function(){r.onload=null,e(void 0)}},r.onerror=function(e){r.onerror=null,o.removeChild(r),t(e)},r.src="https://tun-cos-1258344701.file.myqcloud.com/fp.js",r.id=n,o.appendChild(r)}})).then(function(){(new Fingerprint).getQimei36(e,t)}).catch(function(){})}(e.appkey,function(e){t.qimei36=e.q36}),t.network=new K(e),t.storage=new z(e.appkey),t.initCommonInfo(e),t.store=new R(e.appkey,t.storage),t.errorReport=new y(t.config,t.commonInfo,"web",t.network),t.strategy=new m(null==e.needQueryConfig||e.needQueryConfig,t.config,t.commonInfo,t.storage,t.network),t.logidStartTime=t.storage.getItem(G),t.logidStartTime||(t.logidStartTime=Date.now().toString(),t.storage.setItem(G,t.logidStartTime)),o=t.logidStartTime,r=Date.now()-Number.parseFloat(o),Math.floor(r/864e5)>=365&&t.storage.clear(),t.initSession(e),t.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return t.lifeCycle.emit("init")},0),t.initDelayTime=e.delay?e.delay:1e3,t.cycleTask(t.initDelayTime)),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(o,n),o.prototype.initSession=function(e){var t=18e5;e.sessionDuration&&e.sessionDuration>3e4&&(t=e.sessionDuration),this.beaconSession=new b(this.storage,t,this)},o.prototype.initCommonInfo=function(e){var t=Number(this.storage.getItem(a));try{var n=JSON.parse(this.storage.getItem(s));(Date.now()-t>3e4||!n)&&this.storage.setItem(s,JSON.stringify([]))}catch(e){}e.uploadUrl&&(this.uploadUrl=e.uploadUrl+"?appkey="+e.appkey);var o=[window.screen.width,window.screen.height];window.devicePixelRatio&&o.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:o.join("*"),channelID:e.channelID?String(e.channelID):"",openid:e.openid?String(e.openid):"",unid:e.unionid?String(e.unionid):"",sdkVersion:V},this.config.appVersion=e.versionCode?String(e.versionCode):"",this.config.strictMode=e.strictMode},o.prototype.cycleTask=function(e){var t=this;this.intervalID=window.setInterval(function(){t.pauseSearching||t.store.getEvents().then(function(e){0==e.length&&(t.pauseSearching=!0);var n=[],o=JSON.parse(t.storage.getItem(s));o||(o=[]),e&&e.forEach(function(e){var t=f(e.mapValue);-1==o.indexOf(t)&&(n.push(e),o.push(t))}),0!=n.length&&(t.storage.setItem(s,JSON.stringify(o)),t._normalLogPipeline(t.assembleData(n)))}).catch(function(){})},e)},o.prototype.onReport=function(e,t,n){var o=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var r=this.generateData(e,t,n);if(n&&0==this.delayTime&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(r));else{var i=r.shift();i&&this.store.insertEvent(i,function(e){e&&o.errorReport.reportError("604","insertEvent fail!")}).catch(function(){o._normalLogPipeline(o.assembleData(r))})}}},o.prototype.onSendBeacon=function(e,t){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var n=this.assembleData(this.generateData(e,t,!0));"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(n))}},o.prototype.generateData=function(e,n,o){var r=[],i="4.5.14-web_"+(o?"direct_log_id":"normal_log_id"),a=Number(this.storage.getItem(i));return a=a||1,n=t(t({},n),{A99:o?"Y":"N",A100:a.toString(),A72:V,A88:this.logidStartTime}),a++,this.storage.setItem(i,a.toString()),r.push({eventCode:e,eventTime:Date.now().toString(),mapValue:d(n,this.config.strictMode)}),r},o.prototype.assembleData=function(e){var n=this.beaconSession.getSession();return{appVersion:this.config.appVersion?p(this.config.appVersion):"",sdkId:"js",sdkVersion:V,mainAppKey:this.config.appkey,platformId:3,common:d(t(t({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:n.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:e}},o.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},o.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},o}(g)},"object"==n(0)(t)&&void 0!==e?e.exports=i():void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r)},function(e,t,n){var o=n(9),r=n(1),i={};e.exports.transferToTaskMethod=function(e,t){i[t]=e[t],e[t]=function(e,n){e.SkipTask?i[t].call(this,e,n):this._addTask(t,e,n)}},e.exports.init=function(e){var t,n,a=[],s={},c=0,u=0,l=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},d=(n=function(){t=0,e.emit("task-list-update",{list:r.map(a,l)}),e.emit("list-update",{list:r.map(a,l)})},function(){t||(t=setTimeout(n))}),p=function(){if(!(a.length<=e.options.UploadQueueSize)){for(var t=0;t<u&&t<a.length&&a.length>e.options.UploadQueueSize;){var n="waiting"===a[t].state||"checking"===a[t].state||"uploading"===a[t].state;a[t]&&n?t++:(s[a[t].id]&&delete s[a[t].id],a.splice(t,1),u--)}d()}},f=function t(){if(!(c>=e.options.FileParallelLimit)){for(;a[u]&&"waiting"!==a[u].state;)u++;if(!(u>=a.length)){var n=a[u];u++,c++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(l(n)),!n.params.UploadData&&(n.params.UploadData={});var o=r.formatParams(n.api,n.params);i[n.api].call(e,o,function(o,r){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=o?"error":"success",o&&(n.error=o),c--,d(),t(),n.callback&&n.callback(o,r),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),p())}),d(),setTimeout(t)}}},h=function(t,n){var r=s[t];if(r){var i=r&&"waiting"===r.state,a=r&&("checking"===r.state||"uploading"===r.state);if("canceled"===n&&"canceled"!==r.state||"paused"===n&&i||"paused"===n&&a){if("paused"===n&&r.params.Body&&"function"==typeof r.params.Body.pipe)return;r.state=n,e.emit("inner-kill-task",{TaskId:t,toState:n});try{var u=r&&r.params&&r.params.UploadData.UploadId}catch(e){}"canceled"===n&&u&&o.removeUsing(u),d(),a&&(c--,f()),"canceled"===n&&(r.params&&(delete r.params.UploadData,delete r.params.Body,delete r.params),delete r.callback)}p()}};e._addTasks=function(t){r.each(t,function(t){e._addTask(t.api,t.params,t.callback,!0)}),d()},e._addTask=function(t,n,o,i){n=r.formatParams(t,n);var c=r.uuid();n.TaskId=c,n.onTaskReady&&n.onTaskReady(c),n.TaskReady&&n.TaskReady(c);var u={params:n,callback:o,api:t,index:a.length,id:c,Bucket:n.Bucket,Region:n.Region,Key:n.Key,FilePath:n.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:n._custom},l=n.onHashProgress;n.onHashProgress=function(t){e._isRunningTask(u.id)&&(u.hashPercent=t.percent,l&&l(t),d())};var h=n.onProgress;return n.onProgress=function(t){e._isRunningTask(u.id)&&("checking"===u.state&&(u.state="uploading"),u.loaded=t.loaded,u.speed=t.speed,u.percent=t.percent,h&&h(t),d())},r.getFileSize(t,n,function(e,t){if(e)return o(r.error(e));s[c]=u,a.push(u),u.size=t,!i&&d(),f(),p()}),c},e._isRunningTask=function(e){var t=s[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return r.map(a,l)},e.cancelTask=function(e){h(e,"canceled")},e.pauseTask=function(e){h(e,"paused")},e.restartTask=function(e){var t=s[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",d(),u=Math.min(u,t.index),f())},e.isUploadRunning=function(){return c||u<a.length}}},function(e,t,n){var o=n(0),r=n(28),i=n(1);function a(e,t,n){var o=i.clone(t.InventoryConfiguration);if(o.OptionalFields){var r=o.OptionalFields||[];o.OptionalFields={Field:r}}if(o.Destination&&o.Destination.COSBucketDestination&&o.Destination.COSBucketDestination.Encryption){var a=o.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf("SSECOS")>-1&&(a["SSE-COS"]=a.SSECOS,delete a.SSECOS)}var s=i.json2xml({InventoryConfiguration:o}),c=t.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=i.b64(i.md5(s));var u="PUT"===e?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";f.call(this,{Action:u,method:e,Bucket:t.Bucket,Region:t.Region,body:s,action:"inventory",qs:{id:t.Id},headers:c},function(e,t){return e&&204===e.statusCode?n(null,{statusCode:e.statusCode}):e?n(e):void n(null,{statusCode:t.statusCode,headers:t.headers})})}function s(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},o=(e&&e.AccessControlList||{}).Grant;o&&(o=i.isArray(o)?o:[o]);var r={READ:0,WRITE:0,FULL_CONTROL:0};return o&&o.length&&i.each(o,function(o){"qcs::cam::anyone:anyone"===o.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===o.Grantee.URI?r[o.Permission]=1:o.Grantee.ID!==e.Owner.ID&&t[n[o.Permission]].push('id="'+o.Grantee.ID+'"')}),r.FULL_CONTROL||r.WRITE&&r.READ?t.ACL="public-read-write":r.READ?t.ACL="public-read":t.ACL="private",i.each(n,function(e){t[e]=c(t[e].join(","))}),t}function c(e){var t,n,o=e.split(","),r={};for(t=0;t<o.length;)r[n=o[t].trim()]?o.splice(t,1):(r[n]=!0,o[t]=n,t++);return o.join(",")}function u(e){var t=e.region||"",n=e.bucket||"",r=n.substr(0,n.lastIndexOf("-")),a=n.substr(n.lastIndexOf("-")+1),s=e.domain,c=e.object;"function"==typeof s&&(s=s({Bucket:n,Region:t})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var u=e.protocol||(i.isBrowser&&"object"===("undefined"==typeof location?"undefined":o(location))&&"http:"===location.protocol?"http:":"https:");s||(s=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(t)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(s="{Bucket}."+s)),s=(s=s.replace(/\{\{AppId\}\}/gi,a).replace(/\{\{Bucket\}\}/gi,r).replace(/\{\{Region\}\}/gi,t).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,a).replace(/\{BucketName\}/gi,r).replace(/\{Bucket\}/gi,n).replace(/\{Region\}/gi,t).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(s)||(s=u+"//"+s),"/"===s.slice(-1)&&(s=s.slice(0,-1));var l=s;return e.ForcePathStyle&&(l+="/"+n),l+="/",c&&(l+=i.camSafeUrlEncode(c).replace(/%2F/g,"/")),e.isLocation&&(l=l.replace(/^https?:\/\//,"")),l}var l=function(e){if(!e.Bucket||!e.Region)return"";var t=void 0===e.UseAccelerate?this.options.UseAccelerate:e.UseAccelerate,n=(e.Url||u({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:t?"accelerate":e.Region})).replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$").test(n)?n:""};function d(e,t){var n=i.clone(e.Headers),o="";i.each(n,function(e,t){(""===e||["content-type","cache-control","expires"].indexOf(t.toLowerCase())>-1)&&delete n[t],"host"===t.toLowerCase()&&(o=e)});var r=!1!==e.ForceSignHost;!o&&e.SignHost&&r&&(n.Host=e.SignHost);var a=!1,s=function(e,n){a||(a=!0,n&&n.XCosSecurityToken&&!n.SecurityToken&&((n=i.clone(n)).SecurityToken=n.XCosSecurityToken,delete n.XCosSecurityToken),t&&t(e,n))},c=this,u=e.Bucket||"",l=e.Region||"",d=e.Key||"";c.options.ForcePathStyle&&u&&(d=u+"/"+d);var p="/"+d,f={},h=e.Scope;if(!h){var g=e.Action||"",y=e.ResourceKey||e.Key||"";h=e.Scope||[{action:g,bucket:u,region:l,prefix:y}]}var m=i.md5(JSON.stringify(h));c._StsCache=c._StsCache||[],function(){var e,t;for(e=c._StsCache.length-1;e>=0;e--){t=c._StsCache[e];var n=Math.round(i.getSkewTime(c.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&n<t.StartTime||n>=t.ExpiredTime)c._StsCache.splice(e,1);else if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===m){f=t;break}}}();var v,b=function(){var t="";f.StartTime&&e.Expires?t=f.StartTime+";"+(f.StartTime+1*e.Expires):f.StartTime&&f.ExpiredTime&&(t=f.StartTime+";"+f.ExpiredTime);var o={Authorization:i.getAuth({SecretId:f.TmpSecretId,SecretKey:f.TmpSecretKey,Method:e.Method,Pathname:p,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,KeyTime:t,ForceSignHost:r}),SecurityToken:f.SecurityToken||f.XCosSecurityToken||"",Token:f.Token||"",ClientIP:f.ClientIP||"",ClientUA:f.ClientUA||""};s(null,o)},C=function(e){if(e.Authorization){var t=!1,n=e.Authorization;if(n)if(n.indexOf(" ")>-1)t=!1;else if(n.indexOf("q-sign-algorithm=")>-1&&n.indexOf("q-ak=")>-1&&n.indexOf("q-sign-time=")>-1&&n.indexOf("q-key-time=")>-1&&n.indexOf("q-url-param-list=")>-1)t=!0;else try{(n=atob(n)).indexOf("a=")>-1&&n.indexOf("k=")>-1&&n.indexOf("t=")>-1&&n.indexOf("r=")>-1&&n.indexOf("b=")>-1&&(t=!0)}catch(e){}if(!t)return i.error(new Error("getAuthorization callback params format error"))}else{if(!e.TmpSecretId)return i.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!e.TmpSecretKey)return i.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!e.SecurityToken&&!e.XCosSecurityToken)return i.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!e.ExpiredTime)return i.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(e.ExpiredTime&&10!==e.ExpiredTime.toString().length)return i.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(e.StartTime&&10!==e.StartTime.toString().length)return i.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(f.ExpiredTime&&f.ExpiredTime-i.getSkewTime(c.options.SystemClockOffset)/1e3>60)b();else if(c.options.getAuthorization)c.options.getAuthorization.call(c,{Bucket:u,Region:l,Method:e.Method,Key:d,Pathname:p,Query:e.Query,Headers:n,Scope:h,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:r},function(e){"string"==typeof e&&(e={Authorization:e});var t=C(e);if(t)return s(t);e.Authorization?s(null,e):((f=e||{}).Scope=h,f.ScopeKey=m,c._StsCache.push(f),b())});else{if(!c.options.getSTS)return v={Authorization:i.getAuth({SecretId:e.SecretId||c.options.SecretId,SecretKey:e.SecretKey||c.options.SecretKey,Method:e.Method,Pathname:p,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:r}),SecurityToken:c.options.SecurityToken||c.options.XCosSecurityToken},s(null,v),v;c.options.getSTS.call(c,{Bucket:u,Region:l},function(e){(f=e||{}).Scope=h,f.ScopeKey=m,f.TmpSecretId||(f.TmpSecretId=f.SecretId),f.TmpSecretKey||(f.TmpSecretKey=f.SecretKey);var t=C(f);if(t)return s(t);c._StsCache.push(f),b()})}return""}function p(e){var t=!1,n=!1,o=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var r=e.error.Code,a=e.error.Message;("RequestTimeTooSkewed"===r||"AccessDenied"===r&&"Request has expired"===a)&&(n=!0)}catch(e){}if(e)if(n&&o){var s=Date.parse(o);this.options.CorrectClockSkew&&Math.abs(i.getSkewTime(this.options.SystemClockOffset)-s)>=3e4&&(this.options.SystemClockOffset=s-Date.now(),t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0);return t}function f(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=i.clearKey(e.qs),e.headers&&(e.headers=i.clearKey(e.headers)),e.qs&&(e.qs=i.clearKey(e.qs));var o=i.clone(e.qs);e.action&&(o[e.action]="");var r=e.url||e.Url,a=e.SignHost||l.call(this,{Bucket:e.Bucket,Region:e.Region,Url:r}),s=e.tracker;!function r(i){var c=n.options.SystemClockOffset;s&&s.setParams({signStartTime:(new Date).getTime(),retryTimes:i-1}),d.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:o,Headers:e.headers,SignHost:a,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:n.options.ForceSignHost},function(o,a){o?t(o):(s&&s.setParams({signEndTime:(new Date).getTime(),httpStartTime:(new Date).getTime()}),e.AuthData=a,h.call(n,e,function(o,a){s&&s.setParams({httpEndTime:(new Date).getTime()}),o&&i<2&&(c!==n.options.SystemClockOffset||p.call(n,o))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]),r(i+1)):t(o,a)}))})}(1)}function h(e,t){var n=this,o=e.TaskId;if(!o||n._isRunningTask(o)){var a=e.Bucket,s=e.Region,c=e.Key,l=e.method||"GET",d=e.Url||e.url,p=e.body,f=e.rawBody;n.options.UseAccelerate&&(s="accelerate"),d=d||u({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:a,region:s,object:c}),e.action&&(d=d+"?"+(i.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(d=d.indexOf("?")>-1?d+"&"+e.qsStr:d+"?"+e.qsStr);var h={method:l,url:d,headers:e.headers,qs:e.qs,body:p},g="x-cos-security-token";if(i.isCIHost(d)&&(g="x-ci-security-token"),h.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(h.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(h.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(h.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(h.headers[g]=e.AuthData.SecurityToken),h.headers&&(h.headers=i.clearKey(h.headers)),h=i.clearKey(h),e.onProgress&&"function"==typeof e.onProgress){var y=p&&(p.size||p.length)||0;h.onProgress=function(t){if(!o||n._isRunningTask(o)){var r=t?t.loaded:0;e.onProgress({loaded:r,total:y})}}}e.onDownloadProgress&&(h.onDownloadProgress=e.onDownloadProgress),e.DataType&&(h.dataType=e.DataType),this.options.Timeout&&(h.timeout=this.options.Timeout),n.options.ForcePathStyle&&(h.pathStyle=n.options.ForcePathStyle),n.emit("before-send",h);var m=h.url.includes("accelerate."),v=h.qs?Object.keys(h.qs).map(function(e){return"".concat(e,"=").concat(h.qs[e])}).join("&"):"",b=v?h.url+"?"+v:h.url;e.tracker&&e.tracker.setParams({reqUrl:b,accelerate:m?"Y":"N"}),e.tracker&&e.tracker.parent&&e.tracker.parent.setParams({reqUrl:b,accelerate:m?"Y":"N"});var C=(n.options.Request||r)(h,function(e){if(!e||"abort"!==e.error){var r={options:h,error:e&&e.error,statusCode:e&&e.statusCode||0,statusMessage:e&&e.statusMessage||"",headers:e&&e.headers||{},body:e&&e.body};n.emit("after-receive",r);var a,s=r.error,c=r.body,u={statusCode:r.statusCode,statusMessage:r.statusMessage,headers:r.headers},l=function(e,r){if(o&&n.off("inner-kill-task",k),!a){a=!0;var s={};u&&u.statusCode&&(s.statusCode=u.statusCode),u&&u.headers&&(s.headers=u.headers),e?(e=i.extend(e||{},s),t(e,null)):(r=i.extend(r||{},s),t(null,r)),C=null}};if(s)return l(i.error(s));var d,p=u.statusCode,g=2===Math.floor(p/100);if(f&&g)return l(null,{body:c});try{d=c&&c.indexOf("<")>-1&&c.indexOf(">")>-1&&i.xml2json(c)||{}}catch(e){d={}}var y=d&&d.Error;g?l(null,d):y?l(i.error(new Error(y.Message),{code:y.Code,error:y})):p?l(i.error(new Error(u.statusMessage),{code:""+p})):p&&l(i.error(new Error("statusCode error")))}}),k=function e(t){t.TaskId===o&&(C&&C.abort&&C.abort(),n.off("inner-kill-task",e))};o&&n.on("inner-kill-task",k)}}var g={getService:function(e,t){"function"==typeof e&&(t=e,e={});var n=this.options.Protocol||(i.isBrowser&&"object"===("undefined"==typeof location?"undefined":o(location))&&"http:"===location.protocol?"http:":"https:"),r=this.options.ServiceDomain,a=e.AppId||this.options.appId,s=e.Region;r?(r=r.replace(/\{\{AppId\}\}/gi,a||"").replace(/\{\{Region\}\}/gi,s||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(r)||(r=n+"//"+r),"/"===r.slice(-1)&&(r=r.slice(0,-1))):r=s?n+"//cos."+s+".myqcloud.com":n+"//service.cos.myqcloud.com";var c="",u=s?"cos."+s+".myqcloud.com":"service.cos.myqcloud.com";u===r.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1")&&(c=u),f.call(this,{Action:"name/cos:GetService",url:r,method:"GET",headers:e.Headers,SignHost:c},function(e,n){if(e)return t(e);var o=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Buckets&&n.ListAllMyBucketsResult.Buckets.Bucket||[];o=i.isArray(o)?o:[o];var r=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Owner||{};t(null,{Buckets:o,Owner:r,statusCode:n.statusCode,headers:n.headers})})},putBucket:function(e,t){var n=this,o="";if(e.BucketAZConfig){var r={BucketAZConfig:e.BucketAZConfig};o=i.json2xml({CreateBucketConfiguration:r})}f.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:o},function(o,r){if(o)return t(o);var i=u({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:i,statusCode:r.statusCode,headers:r.headers})})},headBucket:function(e,t){f.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},t)},getBucket:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,f.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);var o=n.ListBucketResult||{},r=o.Contents||[],a=o.CommonPrefixes||[];r=i.isArray(r)?r:[r],a=i.isArray(a)?a:[a];var s=i.clone(o);i.extend(s,{Contents:r,CommonPrefixes:a,statusCode:n.statusCode,headers:n.headers}),t(null,s)})},deleteBucket:function(e,t){f.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketAcl:function(e,t){var n=e.Headers,o="";if(e.AccessControlPolicy){var r=i.clone(e.AccessControlPolicy||{}),a=r.Grants||r.Grant;a=i.isArray(a)?a:[a],delete r.Grant,delete r.Grants,r.AccessControlList={Grant:a},o=i.json2xml({AccessControlPolicy:r}),n["Content-Type"]="application/xml",n["Content-MD5"]=i.b64(i.md5(o))}i.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=c(n[t]))}),f.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:o},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketAcl:function(e,t){f.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},r=o.Owner||{},a=o.AccessControlList.Grant||[];a=i.isArray(a)?a:[a];var c=s(o);n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=i.extend(c,{Owner:r,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putBucketCors:function(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=i.clone(i.isArray(n)?n:[n]),i.each(n,function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t){var n=t+"s",o=e[n]||e[t]||[];delete e[n],e[t]=i.isArray(o)?o:[o]})});var o={CORSRule:n};e.ResponseVary&&(o.ResponseVary=e.ResponseVary);var r=i.json2xml({CORSConfiguration:o}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"cors",headers:a},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketCors:function(e,t){f.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var o={CORSRules:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var r=n.CORSConfiguration||{},a=r.CORSRules||r.CORSRule||[];a=i.clone(i.isArray(a)?a:[a]);var s=r.ResponseVary;i.each(a,function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t){var n=t+"s",o=e[n]||e[t]||[];delete e[t],e[n]=i.isArray(o)?o:[o]})}),t(null,{CORSRules:a,ResponseVary:s,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketCors:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})},getBucketLocation:function(e,t){f.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},t)},getBucketPolicy:function(e,t){f.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},function(e,n){if(e)return e.statusCode&&403===e.statusCode?t(i.error(e,{ErrorStatus:"Access Denied"})):e.statusCode&&405===e.statusCode?t(i.error(e,{ErrorStatus:"Method Not Allowed"})):e.statusCode&&404===e.statusCode?t(i.error(e,{ErrorStatus:"Policy Not Found"})):t(e);var o={};try{o=JSON.parse(n.body)}catch(e){}t(null,{Policy:o,statusCode:n.statusCode,headers:n.headers})})},putBucketPolicy:function(e,t){var n=e.Policy;try{"string"==typeof n&&(n=JSON.parse(n))}catch(e){}if(!n||"string"==typeof n)return t(i.error(new Error("Policy format error")));var o=JSON.stringify(n);n.version||(n.version="2.0");var r=e.Headers;r["Content-Type"]="application/json",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:o,headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},deleteBucketPolicy:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})},putBucketTagging:function(e,t){var n=e.Tagging||{},o=n.TagSet||n.Tags||e.Tags||[];o=i.clone(i.isArray(o)?o:[o]);var r=i.json2xml({Tagging:{TagSet:{Tag:o}}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"tagging",headers:a},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketTagging:function(e,t){f.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var o={Tags:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else{var r=[];try{r=n.Tagging.TagSet.Tag||[]}catch(e){}r=i.clone(i.isArray(r)?r:[r]),t(null,{Tags:r,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketTagging:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketLifecycle:function(e,t){var n=(e.LifecycleConfiguration||{}).Rules||e.Rules||[];n=i.clone(n);var o=i.json2xml({LifecycleConfiguration:{Rule:n}}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"lifecycle",headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketLifecycle:function(e,t){f.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var o={Rules:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var r=[];try{r=n.LifecycleConfiguration.Rule||[]}catch(e){}r=i.clone(i.isArray(r)?r:[r]),t(null,{Rules:r,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketLifecycle:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketVersioning:function(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},o=i.json2xml({VersioningConfiguration:n}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"versioning",headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t(i.error(new Error("missing param VersioningConfiguration")))},getBucketVersioning:function(e,t){f.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},function(e,n){e||!n.VersioningConfiguration&&(n.VersioningConfiguration={}),t(e,n)})},putBucketReplication:function(e,t){var n=i.clone(e.ReplicationConfiguration),o=i.json2xml({ReplicationConfiguration:n});o=(o=o.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"replication",headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketReplication:function(e,t){f.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var o={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else!n.ReplicationConfiguration&&(n.ReplicationConfiguration={}),n.ReplicationConfiguration.Rule&&(n.ReplicationConfiguration.Rules=i.makeArray(n.ReplicationConfiguration.Rule),delete n.ReplicationConfiguration.Rule),t(e,n)})},deleteBucketReplication:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketWebsite:function(e,t){if(e.WebsiteConfiguration){var n=i.clone(e.WebsiteConfiguration||{}),o=n.RoutingRules||n.RoutingRule||[];o=i.isArray(o)?o:[o],delete n.RoutingRule,delete n.RoutingRules,o.length&&(n.RoutingRules={RoutingRule:o});var r=i.json2xml({WebsiteConfiguration:n}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"website",headers:a},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t(i.error(new Error("missing param WebsiteConfiguration")))},getBucketWebsite:function(e,t){f.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website"},function(e,n){if(e)if(404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code){var o={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var r=n.WebsiteConfiguration||{};if(r.RoutingRules){var a=i.clone(r.RoutingRules.RoutingRule||[]);a=i.makeArray(a),r.RoutingRules=a}t(null,{WebsiteConfiguration:r,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketWebsite:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketReferer:function(e,t){if(e.RefererConfiguration){var n=i.clone(e.RefererConfiguration||{}),o=n.DomainList||{},r=o.Domains||o.Domain||[];(r=i.isArray(r)?r:[r]).length&&(n.DomainList={Domain:r});var a=i.json2xml({RefererConfiguration:n}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(a)),f.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"referer",headers:s},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t(i.error(new Error("missing param RefererConfiguration")))},getBucketReferer:function(e,t){f.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer"},function(e,n){if(e)if(404===e.statusCode&&"NoSuchRefererConfiguration"===e.error.Code){var o={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var r=n.RefererConfiguration||{};if(r.DomainList){var a=i.makeArray(r.DomainList.Domain||[]);r.DomainList={Domains:a}}t(null,{RefererConfiguration:r,statusCode:n.statusCode,headers:n.headers})}})},putBucketDomain:function(e,t){var n=(e.DomainConfiguration||{}).DomainRule||e.DomainRule||[];n=i.clone(n);var o=i.json2xml({DomainConfiguration:{DomainRule:n}}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"domain",headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketDomain:function(e,t){f.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(e,n){if(e)return t(e);var o=[];try{o=n.DomainConfiguration.DomainRule||[]}catch(e){}o=i.clone(i.isArray(o)?o:[o]),t(null,{DomainRule:o,statusCode:n.statusCode,headers:n.headers})})},deleteBucketDomain:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketOrigin:function(e,t){var n=(e.OriginConfiguration||{}).OriginRule||e.OriginRule||[];n=i.clone(n);var o=i.json2xml({OriginConfiguration:{OriginRule:n}}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"origin",headers:r},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketOrigin:function(e,t){f.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(e,n){if(e)return t(e);var o=[];try{o=n.OriginConfiguration.OriginRule||[]}catch(e){}o=i.clone(i.isArray(o)?o:[o]),t(null,{OriginRule:o,statusCode:n.statusCode,headers:n.headers})})},deleteBucketOrigin:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketLogging:function(e,t){var n=i.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=i.b64(i.md5(n)),f.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"logging",headers:o},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketLogging:function(e,t){f.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging"},function(e,n){if(e)return t(e);t(null,{BucketLoggingStatus:n.BucketLoggingStatus,statusCode:n.statusCode,headers:n.headers})})},putBucketInventory:function(e,t){return a.call(this,"PUT",e,t)},postBucketInventory:function(e,t){return a.call(this,"POST",e,t)},getBucketInventory:function(e,t){f.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(e,n){if(e)return t(e);var o=n.InventoryConfiguration;if(o&&o.OptionalFields&&o.OptionalFields.Field){var r=o.OptionalFields.Field;i.isArray(r)||(r=[r]),o.OptionalFields=r}if(o.Destination&&o.Destination.COSBucketDestination&&o.Destination.COSBucketDestination.Encryption){var a=o.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf("SSE-COS")>-1&&(a.SSECOS=a["SSE-COS"],delete a["SSE-COS"])}t(null,{InventoryConfiguration:o,statusCode:n.statusCode,headers:n.headers})})},listBucketInventory:function(e,t){f.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken}},function(e,n){if(e)return t(e);var o=n.ListInventoryConfigurationResult,r=o.InventoryConfiguration||[];r=i.isArray(r)?r:[r],delete o.InventoryConfiguration,i.each(r,function(e){if(e&&e.OptionalFields&&e.OptionalFields.Field){var t=e.OptionalFields.Field;i.isArray(t)||(t=[t]),e.OptionalFields=t}if(e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption){var n=e.Destination.COSBucketDestination.Encryption;Object.keys(n).indexOf("SSE-COS")>-1&&(n.SSECOS=n["SSE-COS"],delete n["SSE-COS"])}}),o.InventoryConfigurations=r,i.extend(o,{statusCode:n.statusCode,headers:n.headers}),t(null,o)})},deleteBucketInventory:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketAccelerate:function(e,t){if(e.AccelerateConfiguration){var n={AccelerateConfiguration:e.AccelerateConfiguration||{}},o=i.json2xml(n),r={"Content-Type":"application/xml"};r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"accelerate",headers:r},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}else t(i.error(new Error("missing param AccelerateConfiguration")))},getBucketAccelerate:function(e,t){f.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate"},function(e,n){e||!n.AccelerateConfiguration&&(n.AccelerateConfiguration={}),t(e,n)})},putBucketEncryption:function(e,t){var n=e.ServerSideEncryptionConfiguration||{},o=n.Rule||n.Rules||[],r=i.json2xml({ServerSideEncryptionConfiguration:{Rule:o}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"encryption",headers:a},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketEncryption:function(e,t){f.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(e,n){if(e)if(404===e.statusCode&&"NoSuchEncryptionConfiguration"===e.code){var o={EncryptionConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var r=i.makeArray(n.EncryptionConfiguration&&n.EncryptionConfiguration.Rule||[]);n.EncryptionConfiguration={Rules:r},t(e,n)}})},deleteBucketEncryption:function(e,t){f.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getObject:function(e,t){var n=e.Query||{},o=e.QueryString||"",r=i.throttleOnProgress.call(this,0,e.onProgress),a=e.tracker;a&&a.setParams({signStartTime:(new Date).getTime()}),n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,f.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:n,qsStr:o,rawBody:!0,onDownloadProgress:r,tracker:a},function(n,o){if(r(null,!0),n){var a=n.statusCode;return e.Headers["If-Modified-Since"]&&a&&304===a?t(null,{NotModified:!0}):t(n)}t(null,{Body:o.body,ETag:i.attr(o.headers,"etag",""),statusCode:o.statusCode,headers:o.headers})})},headObject:function(e,t){f.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(n,o){if(n){var r=n.statusCode;return e.Headers["If-Modified-Since"]&&r&&304===r?t(null,{NotModified:!0,statusCode:r}):t(n)}o.ETag=i.attr(o.headers,"etag",""),t(null,o)})},listObjectVersions:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,f.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},function(e,n){if(e)return t(e);var o=n.ListVersionsResult||{},r=o.DeleteMarker||[];r=i.isArray(r)?r:[r];var a=o.Version||[];a=i.isArray(a)?a:[a];var s=i.clone(o);delete s.DeleteMarker,delete s.Version,i.extend(s,{DeleteMarkers:r,Versions:a,statusCode:n.statusCode,headers:n.headers}),t(null,s)})},putObject:function(e,t){var n=this,o=e.ContentLength,r=i.throttleOnProgress.call(n,o,e.onProgress),a=e.Headers;a["Cache-Control"]||a["cache-control"]||(a["Cache-Control"]=""),a["Content-Type"]||a["content-type"]||(a["Content-Type"]=e.Body&&e.Body.type||"");var s=e.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5,c=e.tracker;s&&c&&c.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(s,e.Body,function(s){s&&(c&&c.setParams({md5EndTime:(new Date).getTime()}),n.options.UploadCheckContentMd5&&(a["Content-MD5"]=i.b64(s)),(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(a["x-cos-meta-md5"]=s)),void 0!==e.ContentLength&&(a["Content-Length"]=e.ContentLength),r(null,!0),f.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:r,tracker:c},function(a,s){if(a)return r(null,!0),t(a);r({loaded:o,total:o},!0);var c=u({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?"accelerate":e.Region,object:e.Key});c=c.substr(c.indexOf("://")+3),s.Location=c,s.ETag=i.attr(s.headers,"etag",""),t(null,s)})},e.onHashProgress)},deleteObject:function(e,t){f.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":""},function(e,n){if(e){var o=e.statusCode;return o&&404===o?t(null,{BucketNotFound:!0,statusCode:o}):t(e)}t(null,{statusCode:n.statusCode,headers:n.headers})})},getObjectAcl:function(e,t){var n={};e.VersionId&&(n.versionId=e.VersionId),f.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,action:"acl"},function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},r=o.Owner||{},a=o.AccessControlList&&o.AccessControlList.Grant||[];a=i.isArray(a)?a:[a];var c=s(o);delete c.GrantWrite,n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=i.extend(c,{Owner:r,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putObjectAcl:function(e,t){var n=e.Headers,o="";if(e.AccessControlPolicy){var r=i.clone(e.AccessControlPolicy||{}),a=r.Grants||r.Grant;a=i.isArray(a)?a:[a],delete r.Grant,delete r.Grants,r.AccessControlList={Grant:a},o=i.json2xml({AccessControlPolicy:r}),n["Content-Type"]="application/xml",n["Content-MD5"]=i.b64(i.md5(o))}i.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=c(n[t]))}),f.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:o},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},optionsObject:function(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,f.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},function(e,n){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var o=n.headers||{};t(null,{AccessControlAllowOrigin:o["access-control-allow-origin"],AccessControlAllowMethods:o["access-control-allow-methods"],AccessControlAllowHeaders:o["access-control-allow-headers"],AccessControlExposeHeaders:o["access-control-expose-headers"],AccessControlMaxAge:o["access-control-max-age"],statusCode:n.statusCode,headers:n.headers})})},putObjectCopy:function(e,t){var n=this,o=e.Headers;o["Cache-Control"]||o["cache-control"]||(o["Cache-Control"]="");var r=e.CopySource||"",a=i.getSourceParams.call(this,r);if(a){var s=a.Bucket,c=a.Region,l=decodeURIComponent(a.Key);f.call(this,{Scope:[{action:"name/cos:GetObject",bucket:s,region:c,prefix:l},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(o,r){if(o)return t(o);var a=i.clone(r.CopyObjectResult||{}),s=u({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});i.extend(a,{Location:s,statusCode:r.statusCode,headers:r.headers}),t(null,a)})}else t(i.error(new Error("CopySource format error")))},deleteMultipleObject:function(e,t){var n=e.Objects||[],o=e.Quiet;n=i.isArray(n)?n:[n];var r=i.json2xml({Delete:{Object:n,Quiet:o||!1}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r));var s=i.map(n,function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}});f.call(this,{Scope:s,method:"POST",Bucket:e.Bucket,Region:e.Region,body:r,action:"delete",headers:a},function(e,n){if(e)return t(e);var o=n.DeleteResult||{},r=o.Deleted||[],a=o.Error||[];r=i.isArray(r)?r:[r],a=i.isArray(a)?a:[a];var s=i.clone(o);i.extend(s,{Error:a,Deleted:r,statusCode:n.statusCode,headers:n.headers}),t(null,s)})},restoreObject:function(e,t){var n=e.Headers;if(e.RestoreRequest){var o=e.RestoreRequest||{},r=i.json2xml({RestoreRequest:o});n["Content-Type"]="application/xml",n["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:r,action:"restore",headers:n},t)}else t(i.error(new Error("missing param RestoreRequest")))},putObjectTagging:function(e,t){var n=e.Tagging||{},o=n.TagSet||n.Tags||e.Tags||[];o=i.clone(i.isArray(o)?o:[o]);var r=i.json2xml({Tagging:{TagSet:{Tag:o}}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(r)),f.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:r,action:"tagging",headers:a,VersionId:e.VersionId},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getObjectTagging:function(e,t){f.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var o={Tags:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else{var r=[];try{r=n.Tagging.TagSet.Tag||[]}catch(e){}r=i.clone(i.isArray(r)?r:[r]),t(null,{Tags:r,statusCode:n.statusCode,headers:n.headers})}})},deleteObjectTagging:function(e,t){f.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},selectObjectContent:function(e,t){if(!e.SelectType)return t(i.error(new Error("missing param SelectType")));var n=e.SelectRequest||{},o=i.json2xml({SelectRequest:n}),r=e.Headers;r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),f.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:o,DataType:"arraybuffer",rawBody:!0},function(e,n){if(e&&204===e.statusCode)return t(null,{statusCode:e.statusCode});if(e)return t(e);var o=i.parseSelectPayload(n.body);t(null,{statusCode:n.statusCode,headers:n.headers,Body:o.body,Payload:o.payload})})},appendObject:function(e,t){var n=e.Headers;n["Cache-Control"]||n["cache-control"]||(n["Cache-Control"]=""),n["Content-Type"]||n["content-type"]||(n["Content-Type"]=e.Body&&e.Body.type||""),f.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers},function(e,n){if(e)return t(e);t(null,n)})},uploadPartCopy:function(e,t){var n=e.CopySource||"",o=i.getSourceParams.call(this,n);if(o){var r=o.Bucket,a=o.Region,s=decodeURIComponent(o.Key);f.call(this,{Scope:[{action:"name/cos:GetObject",bucket:r,region:a,prefix:s},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},function(e,n){if(e)return t(e);var o=i.clone(n.CopyPartResult||{});i.extend(o,{statusCode:n.statusCode,headers:n.headers}),t(null,o)})}else t(i.error(new Error("CopySource format error")))},multipartInit:function(e,t){var n=this,o=e.Headers,r=e.tracker;o["Cache-Control"]||o["cache-control"]||(o["Cache-Control"]=""),o["Content-Type"]||o["content-type"]||(o["Content-Type"]=e.Body&&e.Body.type||"");var a=e.Body&&(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5);a&&r&&r.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(a,e.Body,function(o){o&&(e.Headers["x-cos-meta-md5"]=o),a&&r&&r.setParams({md5EndTime:(new Date).getTime()}),f.call(n,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:r},function(e,n){return e?(r&&r.parent&&r.parent.setParams({errorNode:"multipartInit"}),t(e)):(n=i.clone(n||{}))&&n.InitiateMultipartUploadResult?t(null,i.extend(n.InitiateMultipartUploadResult,{statusCode:n.statusCode,headers:n.headers})):void t(null,n)})},e.onHashProgress)},multipartUpload:function(e,t){var n=this;i.getFileSize("multipartUpload",e,function(){var o=e.tracker,r=n.options.UploadCheckContentMd5;r&&o&&o.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(r,e.Body,function(a){a&&(e.Headers["Content-MD5"]=i.b64(a)),r&&o&&o.setParams({md5EndTime:(new Date).getTime()}),o&&o.setParams({partNumber:e.PartNumber}),f.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:o},function(e,n){if(e)return o&&o.parent&&o.parent.setParams({errorNode:"multipartUpload"}),t(e);t(null,{ETag:i.attr(n.headers,"etag",""),statusCode:n.statusCode,headers:n.headers})})})})},multipartComplete:function(e,t){for(var n=this,o=e.UploadId,r=e.Parts,a=e.tracker,s=0,c=r.length;s<c;s++)r[s].ETag&&0===r[s].ETag.indexOf('"')||(r[s].ETag='"'+r[s].ETag+'"');var l=i.json2xml({CompleteMultipartUpload:{Part:r}});l=l.replace(/\n\s*/g,"");var d=e.Headers;d["Content-Type"]="application/xml",d["Content-MD5"]=i.b64(i.md5(l)),f.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:o},body:l,headers:d,tracker:a},function(o,r){if(o)return a&&a.parent&&a.parent.setParams({errorNode:"multipartComplete"}),t(o);var s=u({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),c=r.CompleteMultipartUploadResult||{};c.ProcessResults&&c&&c.ProcessResults&&(c.UploadResult={OriginalInfo:{Key:c.Key,Location:s,ETag:c.ETag,ImageInfo:c.ImageInfo},ProcessResults:c.ProcessResults},delete c.ImageInfo,delete c.ProcessResults);var l=i.extend(c,{Location:s,statusCode:r.statusCode,headers:r.headers});t(null,l)})},multipartList:function(e,t){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=i.clearKey(n);var o=e.tracker;o&&o.setParams({signStartTime:(new Date).getTime()}),f.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads",tracker:o},function(e,n){if(e)return o&&o.parent&&o.parent.setParams({errorNode:"multipartList"}),t(e);if(n&&n.ListMultipartUploadsResult){var r=n.ListMultipartUploadsResult.Upload||[];r=i.isArray(r)?r:[r],n.ListMultipartUploadsResult.Upload=r}var a=i.clone(n.ListMultipartUploadsResult||{});i.extend(a,{statusCode:n.statusCode,headers:n.headers}),t(null,a)})},multipartListPart:function(e,t){var n={},o=e.tracker;n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,f.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(e,n){if(e)return o&&o.parent&&o.parent.setParams({errorNode:"multipartListPart"}),t(e);var r=n.ListPartsResult||{},a=r.Part||[];a=i.isArray(a)?a:[a],r.Part=a;var s=i.clone(r);i.extend(s,{statusCode:n.statusCode,headers:n.headers}),t(null,s)})},multipartAbort:function(e,t){var n={};n.uploadId=e.UploadId,f.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},request:function(e,t){f.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType},function(e,n){if(e)return t(e);n&&n.body&&(n.Body=n.body,delete n.body),t(e,n)})},getObjectUrl:function(e,t){var n=this,o=void 0===e.UseAccelerate?n.options.UseAccelerate:e.UseAccelerate,r=u({ForcePathStyle:n.options.ForcePathStyle,protocol:e.Protocol||n.options.Protocol,domain:e.Domain||n.options.Domain,bucket:e.Bucket,region:o?"accelerate":e.Region,object:e.Key}),a="";e.Query&&(a+=i.obj2str(e.Query)),e.QueryString&&(a+=(a?"&":"")+e.QueryString);var s=r;if(void 0!==e.Sign&&!e.Sign)return a&&(s+="?"+a),t(null,{Url:s}),s;var c=l.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:r}),p=d.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:c,ForceSignHost:!1!==e.ForceSignHost&&n.options.ForceSignHost},function(e,n){if(t)if(e)t(e);else{var o=r;o+="?"+(n.Authorization.indexOf("q-signature")>-1?function(e){var t=e.match(/q-url-param-list.*?(?=&)/g)[0],n="q-url-param-list="+encodeURIComponent(t.replace(/q-url-param-list=/,"")).toLowerCase(),o=new RegExp(t,"g");return e.replace(o,n)}(n.Authorization):"sign="+encodeURIComponent(n.Authorization)),n.SecurityToken&&(o+="&x-cos-security-token="+n.SecurityToken),n.ClientIP&&(o+="&clientIP="+n.ClientIP),n.ClientUA&&(o+="&clientUA="+n.ClientUA),n.Token&&(o+="&token="+n.Token),a&&(o+="&"+a),setTimeout(function(){t(null,{Url:o})})}});return p?(s+="?"+p.Authorization+(p.SecurityToken?"&x-cos-security-token="+p.SecurityToken:""),a&&(s+="&"+a)):a&&(s+="?"+a),s},getAuth:function(e){return i.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}};e.exports.init=function(e,t){t.transferToTaskMethod(g,"putObject"),i.each(g,function(t,n){e.prototype[n]=i.apiWrapper(n,t),function(e,t,n){i.each(["Cors","Acl"],function(o){if(e.slice(-o.length)===o){var r=e.slice(0,-o.length)+o.toUpperCase(),a=i.apiWrapper(e,t);n[r]=function(){a.apply(this,arguments)}}})}(n,t,e.prototype)})}},function(e,t,n){var o=n(0),r=function(e){switch(o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},i=function(e,t,n){var o={};return t.getAllResponseHeaders().trim().split("\n").forEach(function(e){if(e){var t=e.indexOf(":"),n=e.substr(0,t).trim().toLowerCase(),r=e.substr(t+1).trim();o[n]=r}}),{error:e,statusCode:t.status,statusMessage:t.statusText,headers:o,body:n}},a=function(e,t){return t||"text"!==t?e.response:e.responseText};e.exports=function(e,t){var n,s,c,u=(e.method||"GET").toUpperCase(),l=e.url;if(e.qs){var d=(n=e.qs,s=s||"&",c=c||"=",null===n&&(n=void 0),"object"===o(n)?Object.keys(n).map(function(e){var t=encodeURIComponent(r(e))+c;return Array.isArray(n[e])?n[e].map(function(e){return t+encodeURIComponent(r(e))}).join(s):t+encodeURIComponent(r(n[e]))}).filter(Boolean).join(s):"");d&&(l+=(-1===l.indexOf("?")?"?":"&")+d)}var p=new XMLHttpRequest;if(p.open(u,l,!0),p.responseType=e.dataType||"text",e.xhrFields)for(var f in e.xhrFields)p[f]=e.xhrFields[f];var h=e.headers;if(h)for(var g in h)h.hasOwnProperty(g)&&"content-length"!==g.toLowerCase()&&"user-agent"!==g.toLowerCase()&&"origin"!==g.toLowerCase()&&"host"!==g.toLowerCase()&&p.setRequestHeader(g,h[g]);return e.onProgress&&p.upload&&(p.upload.onprogress=e.onProgress),e.onDownloadProgress&&(p.onprogress=e.onDownloadProgress),e.timeout&&(p.timeout=e.timeout),p.ontimeout=function(){var e=new Error("timeout");t(i(e,p))},p.onload=function(){t(i(null,p,a(p,e.dataType)))},p.onerror=function(){var n=a(p,e.dataType);if(n)t(i(null,p,n));else{var o=p.statusText;o||0!==p.status||(o=new Error("CORS blocked or network error")),t(i(o,p,n))}},p.send(e.body||""),p}},function(e,t,n){var o=n(0),r=n(9),i=n(30),a=n(8).EventProxy,s=n(1),c=n(6);function u(e,t){var n=e.TaskId,o=e.Bucket,c=e.Region,u=e.Key,p=e.StorageClass,f=this,h={},g=e.FileSize,y=e.SliceSize,m=Math.ceil(g/y),v=0,b=s.throttleOnProgress.call(f,g,e.onHashProgress),C=function(t,n){var o=t.length;return 0===o?n(null,!0):o>m?n(null,!1):o>1&&Math.max(t[0].Size,t[1].Size)!==y?n(null,!1):void function r(i){if(i<o){var a=t[i];!function(t,n){var o=y*(t-1),r=Math.min(o+y,g),i=r-o;h[t]?n(0,{PartNumber:t,ETag:h[t],Size:i}):s.fileSlice(e.Body,o,r,!1,function(e){s.getFileMd5(e,function(e,o){if(e)return n(s.error(e));var r='"'+o+'"';h[t]=r,b({loaded:v+=i,total:g}),n(0,{PartNumber:t,ETag:r,Size:i})})})}(a.PartNumber,function(e,t){t&&t.ETag===a.ETag&&t.Size===a.Size?r(i+1):n(null,!1)})}else n(null,!0)}(0)},k=new a;k.on("error",function(e){if(f._isRunningTask(n))return t(e)}),k.on("upload_id_available",function(e){var n={},o=[];s.each(e.PartList,function(e){n[e.PartNumber]=e});for(var r=1;r<=m;r++){var i=n[r];i?(i.PartNumber=r,i.Uploaded=!0):i={PartNumber:r,ETag:null,Uploaded:!1},o.push(i)}e.PartList=o,t(null,e)}),k.on("no_available_upload_id",function(){if(f._isRunningTask(n)){var r=s.extend({Bucket:o,Region:c,Key:u,Query:s.clone(e.Query),StorageClass:p,Body:e.Body,calledBySdk:"sliceUploadFile",tracker:e.tracker},e),i=s.clone(e.Headers);delete i["x-cos-mime-limit"],r.Headers=i,f.multipartInit(r,function(e,o){if(f._isRunningTask(n)){if(e)return k.emit("error",e);var r=o.UploadId;if(!r)return t(s.error(new Error("no such upload id")));k.emit("upload_id_available",{UploadId:r,PartList:[]})}})}}),k.on("has_and_check_upload_id",function(t){t=t.reverse(),i.eachLimit(t,1,function(t,i){f._isRunningTask(n)&&(r.using[t]?i():d.call(f,{Bucket:o,Region:c,Key:u,UploadId:t,tracker:e.tracker},function(e,o){if(f._isRunningTask(n)){if(e)return r.removeUsing(t),k.emit("error",e);var a=o.PartList;a.forEach(function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""}),C(a,function(e,o){if(f._isRunningTask(n))return e?k.emit("error",e):void(o?i({UploadId:t,PartList:a}):i())})}}))},function(e){f._isRunningTask(n)&&(b(null,!0),e&&e.UploadId?k.emit("upload_id_available",e):k.emit("no_available_upload_id"))})}),k.on("seek_local_avail_upload_id",function(t){var i=r.getFileId(e.Body,e.ChunkSize,o,u),a=r.getUploadIdList.call(f,i);i&&a?function i(l){if(l>=a.length)k.emit("has_and_check_upload_id",t);else{var p=a[l];if(!s.isInArray(t,p))return r.removeUploadId.call(f,p),void i(l+1);r.using[p]?i(l+1):d.call(f,{Bucket:o,Region:c,Key:u,UploadId:p,tracker:e.tracker},function(e,t){f._isRunningTask(n)&&(e?(r.removeUploadId.call(f,p),i(l+1)):k.emit("upload_id_available",{UploadId:p,PartList:t.PartList}))})}}(0):k.emit("has_and_check_upload_id",t)}),k.on("get_remote_upload_id_list",function(){l.call(f,{Bucket:o,Region:c,Key:u,tracker:e.tracker},function(t,i){if(f._isRunningTask(n)){if(t)return k.emit("error",t);var a=s.filter(i.UploadList,function(e){return e.Key===u&&(!p||e.StorageClass.toUpperCase()===p.toUpperCase())}).reverse().map(function(e){return e.UploadId||e.UploadID});if(a.length)k.emit("seek_local_avail_upload_id",a);else{var c,l=r.getFileId(e.Body,e.ChunkSize,o,u);l&&(c=r.getUploadIdList.call(f,l))&&s.each(c,function(e){r.removeUploadId.call(f,e)}),k.emit("no_available_upload_id")}}})}),k.emit("get_remote_upload_id_list")}function l(e,t){var n=this,o=[],r={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key,calledBySdk:e.calledBySdk||"sliceUploadFile",tracker:e.tracker};!function e(){n.multipartList(r,function(n,i){if(n)return t(n);o.push.apply(o,i.Upload||[]),"true"===i.IsTruncated?(r.KeyMarker=i.NextKeyMarker,r.UploadIdMarker=i.NextUploadIdMarker,e()):t(null,{UploadList:o})})}()}function d(e,t){var n=this,o=[],r={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId,calledBySdk:"sliceUploadFile",tracker:e.tracker};!function e(){n.multipartListPart(r,function(n,i){if(n)return t(n);o.push.apply(o,i.Part||[]),"true"===i.IsTruncated?(r.PartNumberMarker=i.NextPartNumberMarker,e()):t(null,{PartList:o})})}()}function p(e,t){var n=this,o=e.TaskId,r=e.Bucket,a=e.Region,c=e.Key,u=e.UploadData,l=e.FileSize,d=e.SliceSize,p=Math.min(e.AsyncLimit||n.options.ChunkParallelLimit||1,256),h=e.Body,g=Math.ceil(l/d),y=0,m=e.ServerSideEncryption,v=e.Headers,b=s.filter(u.PartList,function(e){return e.Uploaded&&(y+=e.PartNumber>=g&&l%d||d),!e.Uploaded}),C=e.onProgress;i.eachLimit(b,p,function(t,i){if(n._isRunningTask(o)){var s=t.PartNumber,p=Math.min(l,t.PartNumber*d)-(t.PartNumber-1)*d,g=0;f.call(n,{TaskId:o,Bucket:r,Region:a,Key:c,SliceSize:d,FileSize:l,PartNumber:s,ServerSideEncryption:m,Body:h,UploadData:u,Headers:v,onProgress:function(e){y+=e.loaded-g,g=e.loaded,C({loaded:y,total:l})},tracker:e.tracker},function(e,r){n._isRunningTask(o)&&(e||r.ETag||(e='get ETag error, please add "ETag" to CORS ExposeHeader setting.( \u83b7\u53d6ETag\u5931\u8d25\uff0c\u8bf7\u5728CORS ExposeHeader\u8bbe\u7f6e\u4e2d\u6dfb\u52a0ETag\uff0c\u8bf7\u53c2\u8003\u6587\u6863\uff1ahttps://cloud.tencent.com/document/product/436/13318 )'),e?y-=g:(y+=p-g,t.ETag=r.ETag),C({loaded:y,total:l}),i(e||null,r))})}},function(e){if(n._isRunningTask(o))return e?t(e):void t(null,{UploadId:u.UploadId,SliceList:u.PartList})})}function f(e,t){var n=this,o=e.TaskId,r=e.Bucket,a=e.Region,c=e.Key,u=e.FileSize,l=e.Body,d=1*e.PartNumber,p=e.SliceSize,f=e.ServerSideEncryption,h=e.UploadData,g=e.Headers||{},y=n.options.ChunkRetryTimes+1,m=p*(d-1),v=p,b=m+p;b>u&&(v=(b=u)-m);var C=["x-cos-traffic-limit","x-cos-mime-limit"],k={};s.each(g,function(e,t){C.indexOf(t)>-1&&(k[t]=e)});var S=h.PartList[d-1];i.retry(y,function(t){n._isRunningTask(o)&&s.fileSlice(l,m,b,!0,function(i){n.multipartUpload({TaskId:o,Bucket:r,Region:a,Key:c,ContentLength:v,PartNumber:d,UploadId:h.UploadId,ServerSideEncryption:f,Body:i,Headers:k,onProgress:e.onProgress,calledBySdk:"sliceUploadFile",tracker:e.tracker},function(e,r){if(n._isRunningTask(o))return e?t(e):(S.Uploaded=!0,t(null,r))})})},function(e,r){if(n._isRunningTask(o))return t(e,r)})}function h(e,t){var n=e.Bucket,o=e.Region,r=e.Key,a=e.UploadId,s=e.SliceList,c=this,u=this.options.ChunkRetryTimes+1,l=e.Headers,d=s.map(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});i.retry(u,function(t){c.multipartComplete({Bucket:n,Region:o,Key:r,UploadId:a,Parts:d,Headers:l,calledBySdk:"sliceUploadFile",tracker:e.tracker},t)},function(e,n){t(e,n)})}function g(e,t){var n=e.Bucket,o=e.Region,r=e.Key,a=e.AbortArray,s=e.AsyncLimit||1,c=this,u=0,l=new Array(a.length);i.eachLimit(a,s,function(t,i){var a=u;if(r&&r!==t.Key)return l[a]={error:{KeyNotMatch:!0}},void i(null);var s=t.UploadId||t.UploadID;c.multipartAbort({Bucket:n,Region:o,Key:t.Key,Headers:e.Headers,UploadId:s},function(e){var r={Bucket:n,Region:o,Key:t.Key,UploadId:s};l[a]={error:e,task:r},i(null)}),u++},function(e){if(e)return t(e);for(var n=[],o=[],r=0,i=l.length;r<i;r++){var a=l[r];a.task&&(a.error?o.push(a.task):n.push(a.task))}return t(null,{successList:n,errorList:o})})}function y(e,t){var n=e.TaskId,o=e.Bucket,r=e.Region,a=e.Key,s=e.CopySource,c=e.UploadId,u=1*e.PartNumber,l=e.CopySourceRange,d=this.options.ChunkRetryTimes+1,p=this;i.retry(d,function(e){p.uploadPartCopy({TaskId:n,Bucket:o,Region:r,Key:a,CopySource:s,UploadId:c,PartNumber:u,CopySourceRange:l},function(t,n){e(t||null,n)})},function(e,n){return t(e,n)})}var m={sliceUploadFile:function(e,t){var n,o,i=this,c=new a,l=e.TaskId,d=e.Bucket,f=e.Region,g=e.Key,y=e.Body,m=e.ChunkSize||e.SliceSize||i.options.ChunkSize,v=e.AsyncLimit,b=e.StorageClass,C=e.ServerSideEncryption,k=e.onHashProgress,S=e.tracker;S&&S.setParams({chunkSize:m}),c.on("error",function(n){if(i._isRunningTask(l))return n.UploadId=e.UploadData.UploadId||"",t(n)}),c.on("upload_complete",function(n){var o=s.extend({UploadId:e.UploadData.UploadId||""},n);t(null,o)}),c.on("upload_slice_complete",function(t){var a={};s.each(e.Headers,function(e,t){var n=t.toLowerCase();0!==n.indexOf("x-cos-meta-")&&"pic-operations"!==n||(a[t]=e)}),h.call(i,{Bucket:d,Region:f,Key:g,UploadId:t.UploadId,SliceList:t.SliceList,Headers:a,tracker:S},function(e,a){if(i._isRunningTask(l)){if(r.removeUsing(t.UploadId),e)return o(null,!0),c.emit("error",e);r.removeUploadId.call(i,t.UploadId),o({loaded:n,total:n},!0),c.emit("upload_complete",a)}})}),c.on("get_upload_data_finish",function(t){var a=r.getFileId(y,e.ChunkSize,d,g);a&&r.saveUploadId.call(i,a,t.UploadId,i.options.UploadIdCacheLimit),r.setUsing(t.UploadId),o(null,!0),p.call(i,{TaskId:l,Bucket:d,Region:f,Key:g,Body:y,FileSize:n,SliceSize:m,AsyncLimit:v,ServerSideEncryption:C,UploadData:t,Headers:e.Headers,onProgress:o,tracker:S},function(e,t){if(i._isRunningTask(l))return e?(o(null,!0),c.emit("error",e)):void c.emit("upload_slice_complete",t)})}),c.on("get_file_size_finish",function(){if(o=s.throttleOnProgress.call(i,n,e.onProgress),e.UploadData.UploadId)c.emit("get_upload_data_finish",e.UploadData);else{var t=s.extend({TaskId:l,Bucket:d,Region:f,Key:g,Headers:e.Headers,StorageClass:b,Body:y,FileSize:n,SliceSize:m,onHashProgress:k,tracker:S},e);u.call(i,t,function(t,n){if(i._isRunningTask(l)){if(t)return c.emit("error",t);e.UploadData.UploadId=n.UploadId,e.UploadData.PartList=n.PartList,c.emit("get_upload_data_finish",e.UploadData)}})}}),n=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),s.each(e.Headers,function(t,n){"content-length"===n.toLowerCase()&&delete e.Headers[n]}),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],o=1048576,r=0;r<t.length&&!(n/(o=1048576*t[r])<=i.options.MaxPartNumber);r++);e.ChunkSize=e.SliceSize=m=Math.max(m,o)}(),0===n?(e.Body="",e.ContentLength=0,e.SkipTask=!0,i.putObject(e,t)):c.emit("get_file_size_finish")},abortUploadTask:function(e,t){var n=e.Bucket,o=e.Region,r=e.Key,i=e.UploadId,c=e.Level||"task",u=e.AsyncLimit,d=this,p=new a;if(p.on("error",function(e){return t(e)}),p.on("get_abort_array",function(i){g.call(d,{Bucket:n,Region:o,Key:r,Headers:e.Headers,AsyncLimit:u,AbortArray:i},t)}),"bucket"===c)l.call(d,{Bucket:n,Region:o,calledBySdk:"abortUploadTask"},function(e,n){if(e)return t(e);p.emit("get_abort_array",n.UploadList||[])});else if("file"===c){if(!r)return t(s.error(new Error("abort_upload_task_no_key")));l.call(d,{Bucket:n,Region:o,Key:r,calledBySdk:"abortUploadTask"},function(e,n){if(e)return t(e);p.emit("get_abort_array",n.UploadList||[])})}else{if("task"!==c)return t(s.error(new Error("abort_unknown_level")));if(!i)return t(s.error(new Error("abort_upload_task_no_id")));if(!r)return t(s.error(new Error("abort_upload_task_no_key")));p.emit("get_abort_array",[{Key:r,UploadId:i}])}},uploadFile:function(e,t){var n=this,r=void 0===e.SliceSize?n.options.SliceSize:e.SliceSize,i=[],a=e.Body,u=a.size||a.length||0,l={TaskId:""};if(n.options.EnableTracker){var d=n.options.UseAccelerate||"string"==typeof n.options.Domain&&n.options.Domain.includes("accelerate.");e.tracker=new c({bucket:e.Bucket,region:e.Region,apiName:"uploadFile",fileKey:e.Key,fileSize:u,accelerate:d,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}s.each(e,function(e,t){"object"!==o(e)&&"function"!=typeof e&&(l[t]=e)});var p=e.onTaskReady;e.onTaskReady=function(e){l.TaskId=e,p&&p(e)};var f=u>r?"sliceUploadFile":"putObject",h=e.onFileFinish;i.push({api:f,params:e,callback:function(n,o){e.tracker&&e.tracker.formatResult(n,o),h&&h(n,o,l),t&&t(n,o)}}),n._addTasks(i)},uploadFiles:function(e,t){var n=this,r=void 0===e.SliceSize?n.options.SliceSize:e.SliceSize,i=0,a=0,u=s.throttleOnProgress.call(n,a,e.onProgress),l=e.files.length,d=e.onFileFinish,p=Array(l),f=function(e,n,o){u(null,!0),d&&d(e,n,o),p[o.Index]={options:o,error:e,data:n},--l<=0&&t&&t(null,{files:p})},h=[];s.each(e.files,function(e,t){!function(){var l=e.Body,d=l.size||l.length||0,p={Index:t,TaskId:""};if(!n.options.UseRawKey&&e.Key&&"/"===e.Key.substr(0,1)&&(e.Key=e.Key.substr(1)),i+=d,n.options.EnableTracker){var g=n.options.UseAccelerate||"string"==typeof n.options.Domain&&n.options.Domain.includes("accelerate.");e.tracker=new c({bucket:e.Bucket,region:e.Region,apiName:"uploadFiles",fileKey:e.Key,fileSize:d,accelerate:g,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}s.each(e,function(e,t){"object"!==o(e)&&"function"!=typeof e&&(p[t]=e)});var y=e.onTaskReady;e.onTaskReady=function(e){p.TaskId=e,y&&y(e)};var m=0,v=e.onProgress;e.onProgress=function(e){a=a-m+e.loaded,m=e.loaded,v&&v(e),u({loaded:a,total:i})};var b=d>r?"sliceUploadFile":"putObject",C=e.onFileFinish;h.push({api:b,params:e,callback:function(t,n){e.tracker&&e.tracker.formatResult(t,n),C&&C(t,n),f&&f(t,n,p)}})}()}),n._addTasks(h)},sliceCopyFile:function(e,t){var n=new a,o=this,c=e.Bucket,u=e.Region,l=e.Key,p=e.CopySource,f=s.getSourceParams.call(this,p);if(f){var h=f.Bucket,g=f.Region,m=decodeURIComponent(f.Key),v=void 0===e.CopySliceSize?o.options.CopySliceSize:e.CopySliceSize;v=Math.max(0,v);var b,C,k=e.CopyChunkSize||this.options.CopyChunkSize,S=this.options.CopyChunkParallelLimit,I=this.options.ChunkRetryTimes+1,w=0,P=0,x={},_={},T={};n.on("copy_slice_complete",function(n){var a={};s.each(e.Headers,function(e,t){0===t.toLowerCase().indexOf("x-cos-meta-")&&(a[t]=e)});var d=s.map(n.PartList,function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});i.retry(I,function(e){o.multipartComplete({Bucket:c,Region:u,Key:l,UploadId:n.UploadId,Parts:d,calledBySdk:"sliceCopyFile"},e)},function(e,o){if(r.removeUsing(n.UploadId),e)return C(null,!0),t(e);r.removeUploadId(n.UploadId),C({loaded:b,total:b},!0),t(null,o)})}),n.on("get_copy_data_finish",function(e){var a=r.getCopyFileId(p,x,k,c,l);a&&r.saveUploadId(a,e.UploadId,o.options.UploadIdCacheLimit),r.setUsing(e.UploadId);var d=s.filter(e.PartList,function(e){return e.Uploaded&&(P+=e.PartNumber>=w&&b%k||k),!e.Uploaded});i.eachLimit(d,S,function(t,n){var r=t.PartNumber,a=t.CopySourceRange,s=t.end-t.start;i.retry(I,function(t){y.call(o,{Bucket:c,Region:u,Key:l,CopySource:p,UploadId:e.UploadId,PartNumber:r,CopySourceRange:a},t)},function(e,o){if(e)return n(e);C({loaded:P+=s,total:b}),t.ETag=o.ETag,n(e||null,o)})},function(o){if(o)return r.removeUsing(e.UploadId),C(null,!0),t(o);n.emit("copy_slice_complete",e)})}),n.on("get_chunk_size_finish",function(){var i=function(){o.multipartInit({Bucket:c,Region:u,Key:l,Headers:T},function(o,r){if(o)return t(o);e.UploadId=r.UploadId,n.emit("get_copy_data_finish",{UploadId:e.UploadId,PartList:e.PartList})})},a=r.getCopyFileId(p,x,k,c,l),f=r.getUploadIdList(a);if(!a||!f)return i();!function t(a){if(a>=f.length)return i();var p=f[a];if(r.using[p])return t(a+1);d.call(o,{Bucket:c,Region:u,Key:l,UploadId:p},function(o,i){if(o)r.removeUploadId(p),t(a+1);else{if(r.using[p])return t(a+1);var c={},u=0;s.each(i.PartList,function(e){var t=parseInt(e.Size),n=u+t-1;c[e.PartNumber+"|"+u+"|"+n]=e.ETag,u+=t}),s.each(e.PartList,function(e){var t=c[e.PartNumber+"|"+e.start+"|"+e.end];t&&(e.ETag=t,e.Uploaded=!0)}),n.emit("get_copy_data_finish",{UploadId:p,PartList:e.PartList})}})}(0)}),n.on("get_file_size_finish",function(){if(function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,r=0;r<t.length&&!(b/(n=1048576*t[r])<=o.options.MaxPartNumber);r++);e.ChunkSize=k=Math.max(k,n),w=Math.ceil(b/k);for(var i=[],a=1;a<=w;a++){var s=(a-1)*k,c=a*k<b?a*k-1:b-1,u={PartNumber:a,start:s,end:c,CopySourceRange:"bytes="+s+"-"+c};i.push(u)}e.PartList=i}(),(T="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:_)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||_["x-cos-storage-class"],T=s.clearKey(T),"ARCHIVE"===_["x-cos-storage-class"]||"DEEP_ARCHIVE"===_["x-cos-storage-class"]){var r=_["x-cos-restore"];if(!r||'ongoing-request="true"'===r)return void t(s.error(new Error("Unrestored archive object is not allowed to be copied")))}delete T["x-cos-copy-source"],delete T["x-cos-metadata-directive"],delete T["x-cos-copy-source-If-Modified-Since"],delete T["x-cos-copy-source-If-Unmodified-Since"],delete T["x-cos-copy-source-If-Match"],delete T["x-cos-copy-source-If-None-Match"],n.emit("get_chunk_size_finish")}),o.headObject({Bucket:h,Region:g,Key:m},function(r,i){if(r)r.statusCode&&404===r.statusCode?t(s.error(r,{ErrorStatus:m+" Not Exist"})):t(r);else if(void 0!==(b=e.FileSize=i.headers["content-length"])&&b)if(C=s.throttleOnProgress.call(o,b,e.onProgress),b<=v)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),o.putObjectCopy(e,function(e,n){if(e)return C(null,!0),t(e);C({loaded:b,total:b},!0),t(e,n)});else{var a=i.headers;x=a,_={"Cache-Control":a["cache-control"],"Content-Disposition":a["content-disposition"],"Content-Encoding":a["content-encoding"],"Content-Type":a["content-type"],Expires:a.expires,"x-cos-storage-class":a["x-cos-storage-class"]},s.each(a,function(e,t){0===t.indexOf("x-cos-meta-")&&t.length>11&&(_[t]=e)}),n.emit("get_file_size_finish")}else t(s.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.\uff08 \u83b7\u53d6Content-Length\u5931\u8d25\uff0c\u8bf7\u5728CORS ExposeHeader\u8bbe\u7f6e\u4e2d\u6dfb\u52a0Content-Length\uff0c\u8bf7\u53c2\u8003\u6587\u6863\uff1ahttps://cloud.tencent.com/document/product/436/13318 \uff09')))})}else t(s.error(new Error("CopySource format error")))}};e.exports.init=function(e,t){t.transferToTaskMethod(m,"sliceUploadFile"),s.each(m,function(t,n){e.prototype[n]=s.apiWrapper(n,t)})}},function(e){e.exports={eachLimit:function(e,t,n,o){if(o=o||function(){},!e.length||t<=0)return o();var r=0,i=0,a=0;!function s(){if(r>=e.length)return o();for(;a<t&&i<e.length;)a+=1,n(e[(i+=1)-1],function(t){t?(o(t),o=function(){}):(a-=1,(r+=1)>=e.length?o():s())})}()},retry:function(e,t,n){e<1?n():function o(r){t(function(t,i){t&&r<e?o(r+1):n(t,i)})}(1)}}}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.COS=t():(void 0).COS=t(),cc._RF.pop()},{}],demoEnd:[function(e,t,n){"use strict";cc._RF.push(t,"cac6bijqj1O8Lma6RQMzM0A","demoEnd");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=e("../control_mgr"),l=e("../SimulationInfo"),d=e("../bundleInfo"),p=e("../sound_mgr"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){p.default.playEAudio("comp"),this.makeupBundle=d.bundle.makeupBundle,this.costumeBundle=d.bundle.costumeBundle,this.body=cc.instantiate(this.bodyPrefab),this.body.parent=this.platform,this.loadBody()},t.prototype.loadBody=function(){var e,t=this.body.getChildByName("face"),n=function(n){if(!u.bodyInfo[n])return"continue";if("lipstick"==n){var r=cc.find("mouth/lips/lipLine",t),i=cc.find("mouth/lips",t);e="lipstick/mouth/"+u.bodyInfo[n]+"/",o.makeupBundle.load(e+"lipLine",cc.SpriteFrame,function(e,t){r.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"lips",cc.SpriteFrame,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t}),cc.find("mouth/default",t).active=!1}else if("brush"==n){var a=cc.find("blusher",t);e="blusher/face/"+u.bodyInfo[n],a.setPosition(0,[-75.5,-68,-50.5,-67,-56.5,-69][u.bodyInfo[n]]),o.makeupBundle.load(e,cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t})}else if("eye"==n){e="eye/"+u.bodyInfo[n]+"/";var s=cc.find("on/eye/sclera",t),c=cc.find("on/eye/eyefold",t),d=cc.find("on/eye/pupil",t),p=cc.find("on/eye/eyelash",t),f=cc.find("face/new",t),h=cc.find("close/new",t);o.makeupBundle.load(e+"sclera",cc.SpriteFrame,function(e,t){s.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"eyefold",cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"pupil",cc.SpriteFrame,function(e,t){d.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"eyelash",cc.SpriteFrame,function(e,t){p.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"face",cc.SpriteFrame,function(e,t){f.getComponent(cc.Sprite).spriteFrame=t}),o.makeupBundle.load(e+"close",cc.SpriteFrame,function(e,t){h.getComponent(cc.Sprite).spriteFrame=t}),cc.find("on/default",t).active=!1,cc.find("face/default",t).active=!1,cc.find("close/default",t).active=!1}else if("eyebrow"==n){e="eyebrow/"+u.bodyInfo[n];var g=cc.find("eyebrow/brow",t);o.makeupBundle.load(e,cc.SpriteFrame,function(e,t){g.getComponent(cc.Sprite).spriteFrame=t}),cc.find("eyebrow/default",t).active=!1}else{var y=o.body.getChildByName(n),m=y.getChildByName("default");m&&(cc.log("\u6709\u9ed8\u8ba4"),m.active=!1);var v=l.CInfo[u.bodyInfo[n]],b=new cc.Node;b.addComponent(cc.Sprite),o.costumeBundle.load(String(u.bodyInfo[n]),cc.SpriteFrame,function(e,t){b.getComponent(cc.Sprite).spriteFrame=t}),b.setPosition(v.bodyPos[0],v.bodyPos[1]),y.addChild(b)}},o=this;for(var r in u.bodyInfo)n(r)},t.prototype.again=function(){this.body.destroy(),this.body=null,p.default.playEAudio("click"),cc.log("\u5c1d\u8bd5\u53d1\u9001again\u4e8b\u4ef6"),this.node.dispatchEvent(new cc.Event.EventCustom("again",!0)),this.node.active=!1},i([c(cc.Prefab)],t.prototype,"bodyPrefab",void 0),i([c(cc.Node)],t.prototype,"platform",void 0),i([s],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../SimulationInfo":"SimulationInfo","../bundleInfo":"bundleInfo","../control_mgr":"control_mgr","../sound_mgr":"sound_mgr"}],hallBuild:[function(e,t,n){"use strict";cc._RF.push(t,"be8f5hcLmNPWZ6/zTUCA4t8","hallBuild");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=e("./build_mgr"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setting=null,t.remaking=null,t}return r(t,e),t.prototype.onLoad=function(){this.init()},t.prototype.init=function(){this.remakingNode=u.default.createPage(this.remaking,this.pageNode),this.pageNode.on("openSetting",this.openSetting,this)},t.prototype.openSetting=function(e){cc.log("\u6210\u529f\u63a5\u6536openSetting\u4e8b\u4ef6"),cc.log("\u53d1\u9001\u8282\u70b9"+e.target.name),this.settingNode||(this.settingNode=u.default.createPage(this.setting,this.pageNode)),this.settingNode.active=!0},i([c(cc.Prefab)],t.prototype,"setting",void 0),i([c(cc.Prefab)],t.prototype,"remaking",void 0),i([c(cc.Node)],t.prototype,"pageNode",void 0),i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./build_mgr":"build_mgr"}],item_ctrl:[function(e,t,n){"use strict";cc._RF.push(t,"bd167/SN3JIzoYrqHU7vvP8","item_ctrl");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialPos=cc.v3(0,0),t.parentSize={height:0,width:0},t}return r(t,e),t.prototype.start=function(){this.init()},t.prototype.init=function(){this.parentSize.height=this.node.parent.height,this.parentSize.width=this.node.parent.width,this.initialPos=this.node.position,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this)},t.prototype.touchStart=function(){this.stayPos=this.node.position},t.prototype.touchMove=function(e){var t=e.getStartLocation().sub(e.getLocation()),n=this.stayPos.sub(t);this.node.setPosition(n)},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],loading:[function(e,t,n){"use strict";cc._RF.push(t,"7fa52lyxolKfpjYLg3qALBT","loading");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=e("../bundleInfo"),l=e("../../cos-js-sdk-v5.min"),d=e("../temporaryStrategy"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.loadCompleteNum=0,t.needCompleteNum=3,t.pass="",t}return r(t,e),t.prototype.start=function(){this.waitTip(),this.init()},t.prototype.waitTip=function(){var e=this,t=0;cc.tween(this.label.node).delay(.2).call(function(){e.label.string.length>15?e.label.string="Loading":e.label.string+=".",t+=.2,e.loadCompleteNum==e.needCompleteNum&&t>=2&&(cc.director.loadScene("main"),e.loadCompleteNum=null)}).union().repeatForever().start()},t.prototype.init=function(){var e=this;cc.assetManager.loadBundle("background",function(t,n){u.bundle.backgroundBundle=n,e.loadCompleteNum++}),cc.assetManager.loadBundle("costume",function(t,n){u.bundle.costumeBundle=n,e.loadCompleteNum++}),cc.assetManager.loadBundle("makeup",function(t,n){cc.log(n),u.bundle.makeupBundle=n,e.loadCompleteNum++})},t.prototype.initCos=function(){var e="https://project-pcd-1300278118.cos.ap-chengdu.myqcloud.com/"+d.default.shiftCipher(this.pass,6)+".json";cc.assetManager.loadRemote(e,function(e,t){var n=t.json;cos=new l({SecretId:n.SecretId,SecretKey:n.SecretKey})}.bind(this))},t.prototype.putObject=function(e){cos&&cos.putObject({Bucket:"project-pcd-1300278118",Region:"ap-chengdu",Key:"itemInfo.json",Body:e,onProgress:function(){}},function(e){e?console.log("\u4e0a\u4f20\u5931\u8d25",e):console.log("\u4e0a\u4f20\u6210\u529f")})},i([c(cc.Label)],t.prototype,"label",void 0),i([c(String)],t.prototype,"pass",void 0),i([s],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../cos-js-sdk-v5.min":"cos-js-sdk-v5.min","../bundleInfo":"bundleInfo","../temporaryStrategy":"temporaryStrategy"}],onlineInfo:[function(e,t,n){"use strict";cc._RF.push(t,"04a5crVFetFu6BciYC6qpJn","onlineInfo"),Object.defineProperty(n,"__esModule",{value:!0}),n.onlineInfo=void 0,n.onlineInfo={CInfo:{}},cc._RF.pop()},{}],ornament:[function(e,t,n){"use strict";cc._RF.push(t,"63684luUuRFsbWjQR8Shxn+","ornament");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=e("../bundleInfo"),l=e("../control_mgr"),d=e("../SimulationInfo"),p=e("../sound_mgr"),f=e("../temporaryStrategy"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lipstickPos=[[-102.053,0],[-4.77,0],[92.645,0],[-91.6,0],[5.667,0],[103.082,0]],t.stickPath="lipstick/stick/",t.blusherPos=[[-79,132],[56,132],[-79,0],[56,0],[-79,-132],[56,-132]],t.blusherPath="blusher/",t.eyePos=[[0,125.5],[0,0],[0,-125.5]],t.showOtherPage=[0,0,1,1],t.eyePath="eye/",t.eyebrowPath="eyebrow/",t.lipstickLenght=6,t.blusherLenght=6,t.eyeLenght=6,t.eyeblowLength=6,t.face_blushColorY=[-75.5,-68,-50.5,-67,-56.5,-69],t.guideTime=1,t.guideMoveX=350,t.isPlayingAni=!1,t.showPageIndex=0,t.prepareLeftChild=[],t.prepareRightChild=[],t.brushDefault=[],t.lipstickDefault=[],t.eyebrowDefault=[],t.eyeDefault=[],t.checkNum=2,t.handMoveTime=.5,t.handInitialPosition=cc.v3(-11,-935),t.backWaitTime=1,t.isPickUp=!1,t}return r(t,e),t.prototype.onEnable=function(){this.remover("all"),this.facialInit(),this.initUI(),this.init()},t.prototype.start=function(){},t.prototype.init=function(){this.makeupBundle||(this.makeupBundle=u.bundle.makeupBundle),this.costumeBundle||(this.costumeBundle=u.bundle.costumeBundle),this.loadBody(),this.facialInit()},t.prototype.initUI=function(){this.showPageIndex=0;for(var e=0,t=this.left.children;e<t.length;e++)"other"!=(r=t[e]).name&&r.destroy();for(var n=0,o=this.right.children;n<o.length;n++){var r;"other"!=(r=o[n]).name&&r.destroy()}this.external.active=!0,this.left.active=!1,this.right.active=!1,this.boxBg.getComponent(cc.Sprite).fillRange=-.4,this.boxBg.setPosition(-163,0),this.external.setPosition(2.95,0),this.external.setScale(1),this.acne.opacity=255,this.guideNode.parent.active=!1,this.noTouch.active=!0,this.removeItem.targetOff(this)},t.prototype.loadBody=function(){var e=function(e){if("clothes"==e||"set"==e||"coat"==e||"hair"==e||"headwear"==e){var n=t.body.getChildByName(e),o=n.getChildByName("default"),r=n.getChildByName("new");if(!l.bodyInfo[e])return o&&(o.active=!0),r&&(r.getComponent(cc.Sprite).spriteFrame=null),"continue";o&&(cc.log("\u6709\u9ed8\u8ba4"),o.active=!1);var i=d.CInfo[l.bodyInfo[e]];r||((r=new cc.Node).name="new",r.addComponent(cc.Sprite),n.addChild(r)),t.costumeBundle.load(String(l.bodyInfo[e]),cc.SpriteFrame,function(e,t){cc.log(t),r.getComponent(cc.Sprite).spriteFrame=t}),r.setPosition(i.bodyPos[0],i.bodyPos[1])}},t=this;for(var n in l.bodyInfo)e(n)},t.prototype.handPickUpAni=function(e,t){var n=this;this.isPlayingAni=!0,this.isItemMove=!0,setTimeout(function(){n.isItemMove=!1},1e3*this.backWaitTime+500),cc.tween(this.hand).to(this.handMoveTime,{position:e}).call(function(){n.isPlayingAni=!1,p.default.playEAudio("hold"),t()}).start()},t.prototype.handLayDownAni=function(e,t){var n=this;this.isPlayingAni=!0,cc.tween(this.hand).to(this.handMoveTime,{position:e}).call(t).to(this.handMoveTime,{position:this.handInitialPosition}).call(function(){n.isPlayingAni=!1,p.default.playEAudio("hold")}).start()},t.prototype.facialInit=function(){var e=this;this.facialGuide.active=!0,this.facialItem.on(cc.Node.EventType.TOUCH_START,function(){if(!e.isPlayingAni){p.default.playEAudio("hold"),e.noTouch.active&&(e.facialGuide.active=!1);var n=f.default.convertToNew(e.facialItem.parent,e.facialItem.position,e.node);e.isHold=!0,e.handPickUpAni(n,function(){e.isHold?(e.facialItem.parent=e.hand,e.facialItem.setPosition(cc.v3(0,0)),e.facialItem.angle=-30):t()})}},this),this.facialItem.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(!e.isPlayingAni&&e.isHold){var n=e.hand.parent.convertToNodeSpaceAR(cc.v3(t.getLocation().x,t.getLocation().y,0));e.hand.setPosition(n);var o=f.default.convertToNew(e.body,cc.v3(0,0),e.hand).mag(),r=f.default.convertToNew(e.body,cc.v3(0,0),e.node);o<100&&(e.isPlayingAni=!0,e.isHold=!1,cc.tween(e.hand).to(.2,{position:cc.v3(r.x-50,150)}).call(function(){cc.tween(e.acne).to(1.5,{opacity:0}).start()}).by(.5,{position:cc.v3(200,0)}).by(.5,{position:cc.v3(-200,0)}).by(.5,{position:cc.v3(200,0)}).by(.5,{position:cc.v3(-200,0)}).to(.1,{position:e.facialPanel.position}).call(function(){e.facialItem.parent=e.facialPanel,e.facialItem.setPosition(0,0),e.facialItem.angle=0,e.isPlayingAni=!1,0==e.noTouch.active?e.remover("all"):(e.guideAni(),e.noTouch.active=!1,e.facialGuide.active=!1,e.openBox())}).to(.2,{position:e.handInitialPosition}).start())}},this);var t=function(){e.isHold=!1,e.isPlayingAni||(e.noTouch.active&&(e.facialGuide.active=!0),cc.tween(e.hand).to(.1,{position:e.facialPanel.position}).call(function(){e.facialItem.parent=e.facialPanel,e.facialItem.setPosition(0,0),e.facialItem.angle=0,e.isPlayingAni=!1}).to(.2,{position:e.handInitialPosition}).start())};this.facialItem.on(cc.Node.EventType.TOUCH_END,t,this),this.facialItem.on(cc.Node.EventType.TOUCH_CANCEL,t,this)},t.prototype.removeAni=function(){var e=this;this.removeItem.on(cc.Node.EventType.TOUCH_START,function(){if(!e.isPlayingAni){p.default.playEAudio("hold"),e.noTouch.active&&(e.facialGuide.active=!1);var n=f.default.convertToNew(e.removeItem.parent,e.removeItem.position,e.node);e.isHold=!0,e.handPickUpAni(n,function(){e.isHold?(e.removeItem.parent=e.hand,e.removeItem.setPosition(cc.v3(0,0))):t()})}},this),this.removeItem.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(!e.noTouch.active&&!e.isPlayingAni&&e.isHold){e.removeItem.opacity=255;var n=e.hand.parent.convertToNodeSpaceAR(cc.v3(t.getLocation().x,t.getLocation().y,0));e.hand.setPosition(n);var o=f.default.convertToNew(e.body,cc.v3(0,0),e.hand).mag(),r=f.default.convertToNew(e.body,cc.v3(0,0),e.node);o<100&&(e.isPlayingAni=!0,e.isHold=!1,cc.tween(e.hand).to(.5,{position:cc.v3(r.x+50,150)}).call(function(){}).by(.5,{position:cc.v3(-200,0)}).by(.5,{position:cc.v3(200,0)}).by(.5,{position:cc.v3(-200,0)}).by(.5,{position:cc.v3(200,0)}).to(.1,{position:e.removePanel.position}).call(function(){e.isPlayingAni=!1,e.removeItem.parent=e.removePanel,e.removeItem.setPosition(0,0),e.remover(["lipstick","brush","eye","eyebrow"][e.showPageIndex]),e.removeItem.opacity=0}).to(.2,{position:e.handInitialPosition}).start())}},this);var t=function(){e.isHold=!1,cc.log(e.isPlayingAni),e.isPlayingAni||(e.isPlayingAni=!0,cc.tween(e.hand).to(.1,{position:e.removePanel.position}).call(function(){e.isPlayingAni=!1,e.removeItem.parent=e.removePanel,e.removeItem.setPosition(0,0),e.remover(["lipstick","brush","eye","eyebrow"][e.showPageIndex]),e.removeItem.opacity=0}).to(.2,{position:e.handInitialPosition}).start())};this.removeItem.on(cc.Node.EventType.TOUCH_END,t,this),this.removeItem.on(cc.Node.EventType.TOUCH_CANCEL,t,this)},t.prototype.openBox=function(){var e=this;this.loadPage(),this.isPlayingAni=!0,cc.tween(this.boxBg).to(.5,{position:cc.v3(0,0)}).call(function(){e.right.active=!0;for(var t=0,n=Array.from(e.prepareRightChild);t<n.length;t++)n[t].parent=e.right;e.prepareRightChild=[],p.default.playEAudio("turning")}).start(),cc.tween(this.external).to(.5,{position:cc.v3(-this.boxBg.x,0)}).to(.5,{scaleX:0,position:cc.v3(0,0)}).start(),this.turn.scaleX=0,this.turn.x=0,this.turn.active=!0,cc.tween(this.boxBg.getComponent(cc.Sprite)).delay(.5).to(.5,{fillRange:-.5}).to(.5,{fillRange:-1}).start(),cc.tween(this.turn).delay(1).call(function(){for(var t=0,n=Array.from(e.prepareLeftChild);t<n.length;t++)n[t].parent=e.turn;e.prepareLeftChild=[]}).to(.5,{position:this.left.position,scaleX:1}).call(function(){var t=Array.from(e.turn.children);e.turn.active=!1;for(var n=0,o=t;n<o.length;n++){var r=o[n];"other"!=r.name&&(r.parent=e.left)}e.left.active=!0,e.isPlayingAni=!1,e.removeAni(),e.touch.on(cc.Node.EventType.TOUCH_START,e.touchStart,e),e.touch.on(cc.Node.EventType.TOUCH_MOVE,e.touchMove,e)}).start()},t.prototype.pageTurningAni=function(e){var t,n,o=this;this.isPlayingAni=!0,e>0?(t=this.right,n=this.left):(t=this.left,n=this.right),this.turn.x=t.x,this.turn.active=!0;for(var r=[],i=0,a=t.children;i<a.length;i++)"other"!=(m=a[i]).name&&r.push(m);for(var s=0,c=r;s<c.length;s++)(m=c[s]).parent=this.turn;this.showPageIndex+=e,console.log("\u663e\u793a\u7b2c"+this.showPageIndex+"\u9875"),this.showPageIndex<0&&(this.showPageIndex=3),this.showPageIndex>3&&(this.showPageIndex=0),this.loadPage();var u=!!this.showOtherPage[this.showPageIndex];if(e>0){var l=Array.from(this.prepareRightChild);this.prepareRightChild=[];for(var d=0,f=l;d<f.length;d++)(m=f[d]).parent=this.right;this.right.getChildByName("other").active=u,this.turn.getComponent(cc.Sprite).spriteFrame=this.right.getComponent(cc.Sprite).spriteFrame}else{var h=Array.from(this.prepareLeftChild);this.prepareLeftChild=[];for(var g=0,y=h;g<y.length;g++){var m;(m=y[g]).parent=this.left}this.left.getChildByName("other").active=u,this.turn.getComponent(cc.Sprite).spriteFrame=this.left.getComponent(cc.Sprite).spriteFrame}cc.tween(this.turn).to(.5,{scaleX:0,x:0}).call(function(){for(var t=0,n=r;t<n.length;t++)n[t].destroy();if(o.turn.getChildByName("other").active=u,e>0){var i=Array.from(o.prepareLeftChild);o.prepareLeftChild=[];for(var a=0,s=i;a<s.length;a++)s[a].parent=o.turn;o.turn.getComponent(cc.Sprite).spriteFrame=o.left.getComponent(cc.Sprite).spriteFrame}else{var c=Array.from(o.prepareRightChild);o.prepareRightChild=[];for(var l=0,d=c;l<d.length;l++)d[l].parent=o.turn;o.turn.getComponent(cc.Sprite).spriteFrame=o.right.getComponent(cc.Sprite).spriteFrame}}).to(.5,{scaleX:1,x:-1*t.x}).call(function(){for(var e=0,t=Array.from(n.children);e<t.length;e++)"other"!=(a=t[e]).name&&a.destroy();for(var r=0,i=Array.from(o.turn.children);r<i.length;r++){var a;"other"!=(a=i[r]).name&&(a.parent=n)}o.left.getChildByName("other").active=u,o.right.getChildByName("other").active=u,o.turn.active=!1,o.isPlayingAni=!1}).start(),p.default.playEAudio("turning")},t.prototype.loadPage=function(){var e=this;if(0==this.showPageIndex)for(var t=function(t){var o=cc.instantiate(n.lipstickPrefab);t<n.lipstickLenght/2?n.prepareLeftChild.push(o):n.prepareRightChild.push(o),o.setPosition(n.lipstickPos[t][0],n.lipstickPos[t][1]),n.makeupBundle.load(n.stickPath+t,cc.SpriteFrame,function(e,t){cc.find("getItem/color",o).getComponent(cc.Sprite).spriteFrame=t}),o.on(cc.Node.EventType.TOUCH_START,function(n){if(!e.isPickUp&&!e.isPlayingAni){var r=o.getChildByName("getItem"),i=f.default.convertToNew(o,r.position,e.node);e.isPickUp=!0,e.layDownPos=i,e.takeParent=r.parent,e.takeItem=r,e.takeInitPos=r.position,e.stayPos=null,e.bodyPart=e.lips,e.handPickUpAni(i,function(){e.isPlayingAni=!0,r.parent=e.hand,r.setPosition(0,0),r.angle=20,cc.tween(e.hand).by(.3,{y:200}).call(function(){e.isPlayingAni=!1}).start()}),e.makeUpCall=function(){e.addMakeUp("lipstick",t,n)}}},n),o.on(cc.Node.EventType.TOUCH_MOVE,n.touchMove,n)},n=this,o=0;o<this.lipstickLenght;o++)t(o);if(1==this.showPageIndex){var r=cc.instantiate(this.brushPrefab);this.prepareRightChild.push(r);var i=function(t){var n=new cc.Node;n.addComponent(cc.Sprite),n.setPosition(a.blusherPos[t][0],a.blusherPos[t][1]),a.makeupBundle.load(a.blusherPath+t,cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),a.prepareLeftChild.push(n),n.on(cc.Node.EventType.TOUCH_START,function(){e.isPickUp},a)},a=this;for(o=0;o<this.blusherLenght;o++)i(o)}if(2==this.showPageIndex){var s=function(t){var n=cc.instantiate(c.eyePrefab);t<c.lipstickLenght/2?c.prepareLeftChild.push(n):c.prepareRightChild.push(n),n.setPosition(c.eyePos[t%3][0],c.eyePos[t%3][1]),c.makeupBundle.load(c.eyePath+(t+"/")+"eyefold",cc.SpriteFrame,function(e,t){cc.find("eyefold",n).getComponent(cc.Sprite).spriteFrame=t}),c.makeupBundle.load(c.eyePath+(t+"/")+"sclera",cc.SpriteFrame,function(e,t){cc.find("sclera",n).getComponent(cc.Sprite).spriteFrame=t}),c.makeupBundle.load(c.eyePath+(t+"/")+"pupil",cc.SpriteFrame,function(e,t){cc.find("pupil",n).getComponent(cc.Sprite).spriteFrame=t}),c.makeupBundle.load(c.eyePath+(t+"/")+"eyelash",cc.SpriteFrame,function(e,t){cc.find("eyelash",n).getComponent(cc.Sprite).spriteFrame=t}),n.on(cc.Node.EventType.TOUCH_START,function(){e.isPickUp},c),n.on(cc.Node.EventType.TOUCH_MOVE,c.touchMove,c)},c=this;for(o=0;o<this.eyeLenght;o++)s(o)}if(3==this.showPageIndex){var u=function(t){var n=new cc.Node,o=new cc.Node;o.addComponent(cc.Sprite),t<l.lipstickLenght/2?l.prepareLeftChild.push(n):l.prepareRightChild.push(n),n.width=200,n.height=100,o.parent=n,n.setPosition(l.eyePos[t%3][0],l.eyePos[t%3][1]),l.makeupBundle.load(l.eyebrowPath+t,cc.SpriteFrame,function(e,t){o.getComponent(cc.Sprite).spriteFrame=t}),n.on(cc.Node.EventType.TOUCH_START,function(){e.isPickUp},l)},l=this;for(o=0;o<this.eyeblowLength;o++)u(o)}},t.prototype.guideAni=function(){var e=this;this.guideNode.parent.active=!0,this.guideNode.setPosition(217.059,-40.354);var t=this.guideNode.getPosition(),n=0;cc.tween(this.guideNode).by(this.guideTime,{position:cc.v3(-this.guideMoveX,0)}).call(function(){e.guideNode.setPosition(t),2==++n&&(e.guideNode.parent.active=!1,cc.Tween.stopAllByTarget(e.guideNode))}).union().repeatForever().start()},t.prototype.touchStart=function(e){this.stayPos=this.hand.position,this.startLocation=e.getLocation()},t.prototype.touchMove=function(e){var t=this;if(!this.isPlayingAni)if(this.isPickUp){this.stayPos||(this.stayPos=this.hand.position,this.startLocation=e.getLocation());var n=this.startLocation.sub(e.getLocation()),o=this.stayPos.sub(cc.v3(n.x,n.y));this.hand.setPosition(o);var r=f.default.convertToNew(this.bodyPart,cc.v3(0,0),this.node),i=r.sub(this.hand.position).mag(),a=f.default.convertToNew(this.takeParent,this.takeInitPos,this.node),s=a.sub(this.hand.position).mag(),c=function(){t.handLayDownAni(a,function(){t.takeItem.angle=0,t.takeItem.parent=t.takeParent,t.takeItem.setPosition(t.takeInitPos),t.isPickUp=!1,t.takeItem=t.takeParent=null})};i<200&&(this.isPlayingAni=!0,cc.tween(this.hand).to(.2,{x:0,y:r.y-70}).call(this.makeUpCall).by(.5,{x:50}).by(.5,{x:-50}).by(.5,{x:50}).by(.5,{x:-50}).by(.5,{x:50}).call(function(){c()}).start()),s<100&&(this.isPlayingAni=!0,c())}else{var u=e.getStartLocation().x-e.getLocationX();Math.abs(u)>100&&!this.isPlayingAni&&(console.log("\u89e6\u53d1\u7ffb\u9875",u/Math.abs(u)),this.pageTurningAni(u/Math.abs(u)))}},t.prototype.addMakeUp=function(e,t,n){var o,r=this;switch(cc.log("\u5316\u5986\u90e8\u4f4d\uff1a",e),cc.log("\u70b9\u51fb\u4e8b\u4ef6\uff1a",n),cc.log("\u5e8f\u53f7\uff1a",t),p.default.playEAudio("getitem"),l.bodyInfo[e]=t,e){case"lipstick":o=e+"/mouth/",this.lips.opacity=100,cc.tween(this.lips).to(1.5,{opacity:255}).start(),this.makeupBundle.load(o+t+"/lipLine",cc.SpriteFrame,function(e,t){r.lipLine.getComponent(cc.Sprite).spriteFrame=t}),this.makeupBundle.load(o+t+"/lips",cc.SpriteFrame,function(e,t){r.lips.getComponent(cc.Sprite).spriteFrame=t});break;case"brush":o=this.blusherPath+"face/",this.lips.opacity=100,cc.tween(this.blusher).to(1.5,{opacity:255}).start(),this.blusher.setPosition(cc.v3(0,this.face_blushColorY[t])),this.makeupBundle.load(o+t,cc.SpriteFrame,function(e,t){r.blusher.getComponent(cc.Sprite).spriteFrame=t});break;case"eye":o=this.eyePath,this.makeupBundle.load(o+t+"/sclera",cc.SpriteFrame,function(e,t){r.sclera.getComponent(cc.Sprite).spriteFrame=t}),this.makeupBundle.load(o+t+"/eyefold",cc.SpriteFrame,function(e,t){r.eyefold.getComponent(cc.Sprite).spriteFrame=t}),this.makeupBundle.load(o+t+"/pupil",cc.SpriteFrame,function(e,t){r.pupil.getComponent(cc.Sprite).spriteFrame=t}),this.makeupBundle.load(o+t+"/eyelash",cc.SpriteFrame,function(e,t){r.eyelash.getComponent(cc.Sprite).spriteFrame=t}),this.makeupBundle.load(o+t+"/face",cc.SpriteFrame,function(e,n){cc.log(n),cc.log(o+t+"/face"),r.face.getComponent(cc.Sprite).spriteFrame=n}),this.makeupBundle.load(o+t+"/off",cc.SpriteFrame,function(e,t){r.close.getComponent(cc.Sprite).spriteFrame=t});break;case"eyebrow":o=this.eyebrowPath,this.makeupBundle.load(o+t,cc.SpriteFrame,function(e,t){r.brow.getComponent(cc.Sprite).spriteFrame=t})}cc.log("\u76ee\u6807",this[e+"Default"]);for(var i=0,a=this[e+"Default"];i<a.length;i++){var s=a[i];cc.log(s),s.active=!1}this.checkNext()},t.prototype.checkNext=function(){for(var e=0,t=0,n=["lipstick","brush","eye","eyebrow"];t<n.length;t++){var o=n[t];l.bodyInfo[o]&&e++}cc.log("\u5df2\u7ecf\u5316\u5986\u6b21",e),this.nextButton.interactable=this.checkNum<=e},t.prototype.remover=function(e){p.default.playEAudio("revocation");for(var t={lipstick:["lipLine","lips"],brush:["blusher"],eye:["close","face","eyelash","pupil","eyefold","sclera"],eyebrow:["brow"]},n=0,o=["lipstick","brush","eye","eyebrow"];n<o.length;n++){var r=o[n];if("all"==e||e==r){l.bodyInfo[r]=null;for(var i=0,a=t[r];i<a.length;i++){var s=a[i];this.clearSprite(this[s])}for(var c=0,u=this[r+"Default"];c<u.length;c++)(s=u[c]).active=!0}}this.checkNext(),cc.log("\u5378\u5986",l.bodyInfo)},t.prototype.clearSprite=function(e){e.getComponent(cc.Sprite).spriteFrame=null},t.prototype.nextPage=function(){p.default.playEAudio("click"),cc.log("\u5c1d\u8bd5\u53d1\u9001nextStep\u4e8b\u4ef6"),this.node.dispatchEvent(new cc.Event.EventCustom("nextStep",!0))},i([c(cc.Node)],t.prototype,"left",void 0),i([c(cc.Node)],t.prototype,"right",void 0),i([c(cc.Node)],t.prototype,"body",void 0),i([c(cc.Node)],t.prototype,"facialItem",void 0),i([c(cc.Node)],t.prototype,"facialPanel",void 0),i([c(cc.Node)],t.prototype,"removeItem",void 0),i([c(cc.Node)],t.prototype,"removePanel",void 0),i([c(cc.Node)],t.prototype,"acne",void 0),i([c(cc.Node)],t.prototype,"boxBg",void 0),i([c(cc.Node)],t.prototype,"external",void 0),i([c(cc.Node)],t.prototype,"turn",void 0),i([c(cc.Node)],t.prototype,"guideNode",void 0),i([c(cc.Node)],t.prototype,"touch",void 0),i([c(cc.Node)],t.prototype,"hand",void 0),i([c(cc.Prefab)],t.prototype,"eyePrefab",void 0),i([c(cc.Prefab)],t.prototype,"lipstickPrefab",void 0),i([c(cc.Prefab)],t.prototype,"brushPrefab",void 0),i([c(cc.Node)],t.prototype,"blusher",void 0),i([c(cc.Node)],t.prototype,"brushDefault",void 0),i([c(cc.Node)],t.prototype,"lips",void 0),i([c(cc.Node)],t.prototype,"lipLine",void 0),i([c(cc.Node)],t.prototype,"lipstickDefault",void 0),i([c(cc.Node)],t.prototype,"brow",void 0),i([c(cc.Node)],t.prototype,"eyebrowDefault",void 0),i([c(cc.Node)],t.prototype,"face",void 0),i([c(cc.Node)],t.prototype,"close",void 0),i([c(cc.Node)],t.prototype,"eyefold",void 0),i([c(cc.Node)],t.prototype,"sclera",void 0),i([c(cc.Node)],t.prototype,"pupil",void 0),i([c(cc.Node)],t.prototype,"eyelash",void 0),i([c(cc.Node)],t.prototype,"eyeDefault",void 0),i([c(cc.Button)],t.prototype,"nextButton",void 0),i([c(cc.Node)],t.prototype,"noTouch",void 0),i([c(cc.Node)],t.prototype,"facialGuide",void 0),i([s],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../SimulationInfo":"SimulationInfo","../bundleInfo":"bundleInfo","../control_mgr":"control_mgr","../sound_mgr":"sound_mgr","../temporaryStrategy":"temporaryStrategy"}],printscreen_mgr:[function(e,t,n){"use strict";cc._RF.push(t,"97771ZsPJxKGLBj9A3hXeSB","printscreen_mgr");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],remaking:[function(e,t,n){"use strict";cc._RF.push(t,"a8183GTpZlP8bMcH3HIZfb1","remaking");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstNum=1,t._runQueue=[],t}return r(t,e),t.prototype.logQueue=function(){cc.log(this._runQueue)},t.prototype.getQueue=function(e){if(void 0===e&&(e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}),0!=this._runQueue.length){var t=this._runQueue.shift();return e(this._runQueue[0]),t}},t.prototype.pushQueue=function(e){this._runQueue.push(e)},t.prototype.clearQueue=function(){this._runQueue=[]},t.prototype.onLoad=function(){this.init()},t.prototype.start=function(){},t.prototype.init=function(){this.node.on("nextStep",this.nextPage,this),this.node.on("again",this.again,this),this.settingNode.on(cc.Node.EventType.TOUCH_END,this.openSetting,this);for(var e=0,t=this.node.children;e<t.length;e++){var n=t[e];"background"!=n.name&&("top"!=n.name?n.active=!1:n.zIndex=100)}this.runStage()},t.prototype.runStage=function(){this.firstStage()},t.prototype.firstStage=function(){var e=this,t=["unpack","wardrobe","ornament","demo"];(function(n){cc.find(t[n],e.node).active=!0;for(var o=n;o<t.length;o++)e.pushQueue(cc.find(t[o],e.node))})(this.firstNum)},t.prototype.again=function(){cc.log("\u6210\u529f\u63a5\u6536again\u4e8b\u4ef6"),this.clearQueue(),this.firstStage()},t.prototype.nextPage=function(e){cc.log("\u6210\u529f\u63a5\u6536nextStep\u4e8b\u4ef6"),cc.log("\u53d1\u9001\u8282\u70b9"+e.target.name),this.getQueue(function(e){e.active=!0}).active=!1,this.logQueue()},t.prototype.openSetting=function(){cc.log("\u5c1d\u8bd5\u53d1\u9001openSetting\u4e8b\u4ef6"),this.node.dispatchEvent(new cc.Event.EventCustom("openSetting",!0))},i([c(cc.Node)],t.prototype,"settingNode",void 0),i([c(Number)],t.prototype,"firstNum",void 0),i([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],setting:[function(e,t,n){"use strict";cc._RF.push(t,"86e7244S+VNOrg4B7J9lN9W","setting");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../sound_mgr"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Material=[],t}return r(t,e),t.prototype.start=function(){this.initButton()},t.prototype.initButton=function(){this.closeButton.on(cc.Node.EventType.TOUCH_END,this.closeSelf.bind(this))},t.prototype.closeSelf=function(){a.default.playEAudio("click"),this.node.active=!1},t.prototype.setENum=function(e){var t=a.default.getEVolume();a.default.setEVolume(Number(!t)),e.target.getComponent(cc.Sprite).setMaterial(0,this.Material[Number(t)])},t.prototype.setBNum=function(e){var t=a.default.getBVolume();a.default.setBVolume(Number(!t)),e.target.getComponent(cc.Sprite).setMaterial(0,this.Material[Number(t)])},i([u(cc.Node)],t.prototype,"closeButton",void 0),i([u(cc.Node)],t.prototype,"bSoundButton",void 0),i([u(cc.Node)],t.prototype,"eSoundButton",void 0),i([u([cc.Material])],t.prototype,"Material",void 0),i([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../sound_mgr":"sound_mgr"}],sound_mgr:[function(e,t,n){"use strict";cc._RF.push(t,"91d9ccErsZB2ZK4jAsHQDRR","sound_mgr");var o,r,i,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=1,u=1,l={},d=cc._decorator,p=d.ccclass,f=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,t.prototype.start=function(){cc.resources.loadDir("audio",function(e,t){for(var o=0,r=t;o<r.length;o++){var i=r[o];l[i.name]=i}n.playBAudio("bgm")})},t.playBAudio=function(e){r=cc.audioEngine.play(l[e],!0,c)},t.setBVolume=function(e){c=e,null!=r?cc.audioEngine.setVolume(r,e):console.error("\u672a\u64ad\u653e\u80cc\u666f\u97f3\u4e50")},t.getBVolume=function(){return c},t.playEAudio=function(e){i=cc.audioEngine.play(l[e],!1,u)},t.setEVolume=function(e){u=e,cc.audioEngine.setVolume(i,e)},t.getEVolume=function(){return u},n=s([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{}],temporaryStrategy:[function(e,t,n){"use strict";cc._RF.push(t,"e66d6NGv+5LzJateJ448riV","temporaryStrategy"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.convertToNew=function(e,t,n){var o=e.convertToWorldSpaceAR(t);return n.convertToNodeSpaceAR(o)},e.getDistanceMag=function(e,t){return e.sub(t).mag()},e.kTDecimals=function(e){return Math.floor(100*e)/100},e.creatJosnFile=function(e,t){var n=JSON.stringify(e);this.saveForBrowser(n,t)},e.saveForBrowser=function(e,t){if(cc.sys.isBrowser){cc.log("\u6d4f\u89c8\u5668");var n=new Blob([e],{type:"application/json"}),o=document.createElement("a");o.download=t,o.innerHTML="Download File",null!=window.webkitURL&&(o.href=window.webkitURL.createObjectURL(n)),o.click()}},e.toLowerCaseFirst=function(e){if(!e)return"";var t=e.toLowerCase()[0];return e.replace(e[0],t)},e.shiftCipher=function(e,t){for(var n=(e=e.toUpperCase()).length,o="",r=0;r<n;r++){var i=e.charCodeAt(r);if(i>=65&&i<=90){var a=i+t;a>90&&(a-=26),o+=String.fromCharCode(a)}else o+=e.charAt(r)}return o.toLowerCase()},e.decryptShiftCipher=function(e,t){for(var n=(e=e.toUpperCase()).length,o="",r=0;r<n;r++){var i=e.charCodeAt(r);if(i>=65&&i<=90){var a=i-t;a<65&&(a+=26),o+=String.fromCharCode(a)}else o+=e.charAt(r)}return o.toLowerCase()},e}();n.default=o,cc._RF.pop()},{}],unpack:[function(e,t,n){"use strict";cc._RF.push(t,"6c6a3CRYL1M8LoA/fPfoOIN","unpack");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../sound_mgr"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchDownNum=100,t.unpackAniTime=1,t.unpackGuideTime=1,t.unpackGuideMoveY=-400,t.isGuidePlay=!1,t}return r(t,e),t.prototype.onEnable=function(){this.initUI(),this.init()},t.prototype.init=function(){this.unpackGuideMove(),this.startNode.once(cc.Node.EventType.TOUCH_END,this.nextPage.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchDollBox,this)},t.prototype.initUI=function(){this.guideNode.active=!0,this.arrow.active=!0,this.dollBox.getComponent(cc.Sprite).fillRange=1,this.tearDown.getComponent(cc.Sprite).fillRange=0,this.tearDown.opacity=255,this.tearDown.setPosition(0,397.203),this.startNode.active=!1},t.prototype.touchDollBox=function(e){e.getStartLocation().y-e.getLocationY()>this.touchDownNum&&(this.node.targetOff(this),this.tearDownAni(),this.guideNode.active=!1,this.arrow.active=!1)},t.prototype.unpackGuideMove=function(){var e=this;if(!this.isGuidePlay){this.isGuidePlay=!0;var t=this.guideNode.getPosition();cc.tween(this.guideNode).by(this.unpackGuideTime,{position:cc.v3(0,this.unpackGuideMoveY)}).call(function(){e.guideNode.setPosition(t)}).union().repeatForever().start()}},t.prototype.tearDownAni=function(){var e=this,t=this.dollBox.getComponent(cc.Sprite),n=this.tearDown.getComponent(cc.Sprite);a.default.playEAudio("turning"),cc.tween(t).to(this.unpackAniTime,{fillRange:0}).start(),cc.tween(n).to(this.unpackAniTime,{fillRange:-1}).start(),cc.tween(this.tearDown).by(this.unpackAniTime,{position:cc.v3(0,2*-this.tearDown.height),opacity:-255}).call(function(){e.startNode.active=!0}).start()},t.prototype.nextPage=function(){a.default.playEAudio("click"),cc.log("\u5c1d\u8bd5\u53d1\u9001nextStep\u4e8b\u4ef6"),this.node.dispatchEvent(new cc.Event.EventCustom("nextStep",!0))},i([u(cc.Node)],t.prototype,"guideNode",void 0),i([u(cc.Node)],t.prototype,"dollBox",void 0),i([u(cc.Node)],t.prototype,"tearDown",void 0),i([u(cc.Node)],t.prototype,"startNode",void 0),i([u(cc.Node)],t.prototype,"arrow",void 0),i([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../sound_mgr":"sound_mgr"}],wardrobe:[function(e,t,n){"use strict";cc._RF.push(t,"4b0e2Zk+9dEJJb1qQuK4/NT","wardrobe");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../temporaryStrategy"),s=e("../SimulationInfo"),c=e("../control_mgr"),u=e("../bundleInfo"),l=e("../sound_mgr"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guideTime=2,t.guideMoveX=350,t.stayPos=null,t.holdItem=null,t.isItemMove=!1,t.backWaitTime=1,t.isPlayingAni=!1,t.fitOnDistance=200,t.backDistance=50,t.destination=[470,305,70],t.defaultSkinZIndex=10,t.defaultFaceZIndex=10,t.handMoveTime=.5,t.handInitialPosition=cc.v3(-11,-935),t.itemArrar=[],t.classifyList=[null,null,null,null,null,null,null,null,null,null,null],t.WRArr=[],t.showPageIndex=0,t.itemScale=.6,t.isTouch=!1,t.checkNum=3,t.openOutLine=!0,t}return r(t,e),t.prototype.onEnable=function(){this.holdItem&&(this.holdItem.node.destroy(),this.holdItem=null);for(var e=0,t=this.classifyList;e<t.length;e++)(c=t[e])&&c.node&&(c.isUse=this.face,c.node.destroy());this.hand.setPosition(this.handInitialPosition);for(var n=Array.from(this.left.children),o=Array.from(this.right.children),r=0,i=n;r<i.length;r++)(c=i[r]).destroy();for(var a=0,s=o;a<s.length;a++){var c;(c=s[a]).destroy()}this.showPageIndex=0,cc.find("hair/default",this.body).active=!0,this.classifyList=[null,null,null,null,null,null,null,null,null,null,null],this.init(),this.nextButton.interactable=!1},t.prototype.start=function(){c.info.wardrobeCom=this},t.prototype.init=function(){this.getSimulationCInfo(),this.guideAni(),this.getPageCostume(),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this)},t.prototype.showTips=function(){var e=[204.61,-202.311][Math.floor(2*Math.random())],t=[264.803,411.279,376.795][Math.floor(3*Math.random())],n=cc.find("tip"+Math.floor(3*Math.random()),this.node);n.opacity=0,n.setPosition(e,t),cc.Tween.stopAllByTarget(n),cc.tween(n).by(.3,{y:20,opacity:255}).by(.6,{y:40}).by(.3,{y:20,opacity:-255}).call(function(){n.opacity=0,n.setPosition(e,t)}).start()},t.prototype.touchStart=function(){this.stayPos&&(this.stayPos=this.hand.position)},t.prototype.touchMove=function(e){var t=this;if(!c.info.isDrag)if(this.holdItem&&!this.isPlayingAni){var n=e.getStartLocation().sub(e.getLocation()),o=this.stayPos.sub(cc.v3(n.x,n.y));this.hand.setPosition(o);var r=this.destination[this.itemPosClassify()],i=a.default.getDistanceMag(cc.v3(0,r),o),u=cc.v3(this.holdItem.initialPos[0],this.holdItem.initialPos[1]),l=this[this.holdItem.direction],d=a.default.convertToNew(l,u,this.node),p=a.default.getDistanceMag(d,o),f=a.default.toLowerCaseFirst(s.classify[this.holdItem.classifyIndex]),h=this.body.getChildByName(f),g=a.default.convertToNew(h,cc.v3(this.holdItem.bodyPos[0],this.holdItem.bodyPos[1]),this.node);if(i<this.fitOnDistance&&(console.log("\u914d\u4ef6\u8282\u70b9",h),this.handAni(g,1,function(){t.holdItem.node.parent=h,t.holdItem.node.setPosition(t.holdItem.bodyPos[0],t.holdItem.bodyPos[1]),t.holdItem.isUse=!0,t.itemReplace(t.holdItem.classifyIndex,t.holdItem),t.holdItem=null,t.showTips()})),p<this.backDistance&&!this.isItemMove){var y=this.holdItem;cc.tween(y.node).to(this.handMoveTime,{scale:1.05}).call(function(){y.node.setScale(t.itemScale)}).start(),this.handAni(d,this.itemScale,function(){y.node.parent=l;var e=cc.v3(y.initialPos[0],y.initialPos[1]);cc.log("\u653e\u56de",e),y.node.setPosition(e),y.node.setScale(t.itemScale),t.holdItem=null})}}else{var m=e.getStartLocation().x-e.getLocationX();Math.abs(m)>100&&!this.isPlayingAni&&(console.log("\u89e6\u53d1\u7ffb\u9875",m/Math.abs(m)),this.pageTurning(m/Math.abs(m)))}},t.prototype.itemReplace=function(e,t){var n=this,o=function(e){var t=2*n.showPageIndex;t==e.boxIndex||t+1==e.boxIndex?(e.isUse=!1,e.node.parent=n[e.direction],e.node.setPosition(e.initialPos[0],e.initialPos[1]),e.node.setScale(n.itemScale)):(cc.log("\u975e\u672c\u9875\u5220\u9664_\u66ff\u6362"),e.isUse=!1,e.node.destroy())};this.classifyList[e]&&(o(this.classifyList[e]),l.default.playEAudio("revocation")),this.holdItem?this.classifyList[e]=t:this.classifyList[e]=null,this.defaultItem(e),e!=s.classify.Clothes&&e!=s.classify.Pants&&e!=s.classify.Coat||!this.classifyList[s.classify.Set]||(o(this.classifyList[s.classify.Set]),this.classifyList[s.classify.Set]=null,l.default.playEAudio("revocation")),(this.classifyList[s.classify.Clothes]||this.classifyList[s.classify.Pants]||this.classifyList[s.classify.Coat])&&e==s.classify.Set&&(this.classifyList[s.classify.Clothes]&&(o(this.classifyList[s.classify.Clothes]),this.classifyList[s.classify.Clothes]=null),this.classifyList[s.classify.Pants]&&(o(this.classifyList[s.classify.Pants]),this.classifyList[s.classify.Pants]=null),this.classifyList[s.classify.Coat]&&(o(this.classifyList[s.classify.Coat]),this.classifyList[s.classify.Coat]=null),l.default.playEAudio("revocation")),this.check()},t.prototype.handAni=function(e,t,n){var o=this;this.isPlayingAni=!0,cc.tween(this.hand).to(this.handMoveTime,{position:e,scale:t}).call(n).to(this.handMoveTime,{position:this.handInitialPosition}).call(function(){o.isPlayingAni=!1,l.default.playEAudio("hold")}).start()},t.prototype.guideAni=function(){var e=this;this.guideNode.parent.active=!0,this.guideNode.setPosition(217.059,-40.354);var t=this.guideNode.getPosition(),n=0;cc.tween(this.guideNode).by(this.guideTime,{position:cc.v3(-this.guideMoveX,0)}).call(function(){e.guideNode.setPosition(t),2==++n&&(e.guideNode.parent.active=!1,cc.Tween.stopAllByTarget(e.guideNode))}).union().repeatForever().start()},t.prototype.getPageCostume=function(){cc.log(u.bundle),this.costumeBundle=u.bundle.costumeBundle,this.showCostume()},t.prototype.createAInitItem=function(e,t,n,o){var r=this;void 0===o&&(o=!1),this.costumeBundle.load(e.id+"",cc.SpriteFrame,function(i,s){var u,d=cc.v3(e.initialPos[0],e.initialPos[1],0);e.isUse||((u=new cc.Node).addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=s,u.setPosition(d));var p=new cc.Node;if(r.openOutLine&&(p.addComponent(cc.Sprite),p.getComponent(cc.Sprite).spriteFrame=s,p.getComponent(cc.Sprite).setMaterial(0,r.outlineMaterial),p.setScale(r.itemScale),p.setPosition(d)),o?(r.openOutLine&&r.turn.addChild(p),e.isUse||r.turn.addChild(u)):(r.openOutLine&&r[n].addChild(p),e.isUse||r[n].addChild(u)),!e.isUse){u.setScale(r.itemScale),e.node=u,e.boxIndex=t,e.direction=n,e.isUse=!1,r.itemArrar.push(e),u.on(cc.Node.EventType.TOUCH_START,function(){if(!(c.info.isDrag||r.holdItem||r.isItemMove||r.isPlayingAni))if(e.isUse)r.itemReplace(e.classifyIndex,e),cc.log("\u975e\u672c\u9875\u70b9\u51fb\u5220\u9664");else{r.holdItem=e;var t=a.default.convertToNew(r[n],u.position,r.node);r.isItemMove=!0,setTimeout(function(){r.isItemMove=!1},1e3*r.backWaitTime),r.isPlayingAni=!0,cc.tween(r.hand).to(r.handMoveTime,{position:t,scale:r.itemScale}).call(function(){l.default.playEAudio("hold"),r.stayPos=r.hand.position,r.isPlayingAni=!1,u.parent=r.hand;var e=a.default.convertToNew(r[n],u.position,r.hand);r.holdItem.node.setPosition(e),r.holdItem.node.setScale(1.1),cc.tween(r.hand).to(r.handMoveTime,{scale:1}).start(),cc.tween(r.holdItem.node).to(r.handMoveTime,{scale:1}).start()}).start()}},r);var f=function(){var t=this;if(c.info.isDrag)e.isUse?(e.bodyPos[0]=e.node.x,e.bodyPos[1]=e.node.y):(e.initialPos[0]=e.node.x,e.initialPos[1]=e.node.y);else if(!this.isPlayingAni){var o=cc.v3(e.initialPos[0],e.initialPos[1]),r=a.default.convertToNew(this[n],o,this.node);r.sub(this.hand.position).mag()<this.backDistance&&(cc.tween(e.node).to(this.handMoveTime,{scale:1.05}).call(function(){e.node.setScale(t.itemScale)}).start(),this.handAni(r,this.itemScale,function(){e.node.parent=t[n];var o=cc.v3(e.initialPos[0],e.initialPos[1]);e.node.setPosition(o),e.node.setScale(t.itemScale),t.holdItem=null}))}};u.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(c.info.isDrag){var o=t.getLocation();o.x-=cc.winSize.width/2,e.isUse?o.y-=cc.winSize.height/2+u.parent.y:(o.x-=this[n].x,o.y-=cc.winSize.height/2-50-u.parent.parent.y-150),Math.abs(o.x)>u.parent.width/2-50&&(o.x=(u.parent.width/2-50)*o.x/Math.abs(o.x)),Math.abs(o.y)>u.parent.height/2-50&&(o.y=(u.parent.height/2-50)*o.y/Math.abs(o.y)),u.setPosition(o)}},r),u.on(cc.Node.EventType.TOUCH_END,f,r),u.on(cc.Node.EventType.TOUCH_CANCEL,f,r)}})},t.prototype.itemPosClassify=function(){switch(this.holdItem.classifyIndex){case s.classify.FaceDecor:case s.classify.Headwear:case s.classify.Hair:case s.classify.Pendant:return 0;case s.classify.Clothes:case s.classify.Set:case s.classify.Holdit:return 1;case s.classify.Pants:case s.classify.Coat:case s.classify.Socks:case s.classify.Shoes:return 2}},t.prototype.showCostume=function(){for(var e=2*this.showPageIndex,t=e+1,n=this.WRArr[e],o=this.WRArr[t],r=0,i=n;r<i.length;r++){var a=i[r];this.createAInitItem(a,e,"left")}for(var s=0,c=o;s<c.length;s++)a=c[s],this.createAInitItem(a,t,"right")},t.prototype.getItem=function(){return this.itemArrar},t.prototype.defaultItem=function(e){var t=a.default.toLowerCaseFirst(s.classify[e]),n=this.body.getChildByName(t).getChildByName("default");n&&(n.active=!this.classifyList[e])},t.prototype.pageTurningAni=function(e){var t,n,o=this;this.isPlayingAni=!0,e>0?(t=this.right,n=this.left):(t=this.left,n=this.right),this.turn.x=t.x,this.turn.active=!0;for(var r=[],i=0,a=t.children;i<a.length;i++){var s=a[i];r.push(s)}for(var c=0,u=r;c<u.length;c++)(s=u[c]).parent=this.turn;console.log("\u663e\u793a\u7b2c"+this.showPageIndex+"\u9875");var d=2*this.showPageIndex,p=d+1;cc.log("\u5de6\u9875",d),cc.log("\u53f3\u9875",p);var f=this.WRArr[d],h=this.WRArr[p];if(e>0)for(var g=0,y=h;g<y.length;g++)s=y[g],this.createAInitItem(s,p,"right");else for(var m=0,v=f;m<v.length;m++)s=v[m],this.createAInitItem(s,d,"left");cc.tween(this.turn).to(.5,{scaleX:0,x:0}).call(function(){for(var t=0,n=r;t<n.length;t++)(s=n[t]).destroy();if(e>0)for(var i=0,a=f;i<a.length;i++){var s=a[i];o.createAInitItem(s,d,"left",!0)}else for(var c=0,u=h;c<u.length;c++)s=u[c],o.createAInitItem(s,p,"right",!0)}).to(.5,{scaleX:1,x:-1*t.x}).call(function(){for(var e=0,t=Array.from(n.children);e<t.length;e++)t[e].destroy();for(var r=0,i=Array.from(o.turn.children);r<i.length;r++)i[r].parent=n;o.turn.active=!1,o.isPlayingAni=!1}).start(),l.default.playEAudio("turning")},t.prototype.pageTurning=function(e){this.showPageIndex+=e,console.log(e),this.showPageIndex<0&&(this.showPageIndex=this.WRArr.length/2-1),this.showPageIndex>=this.WRArr.length/2&&(this.showPageIndex=0),this.pageTurningAni(e)},t.prototype.check=function(){cc.log("\u68c0\u67e5\u6700\u4f4e\u9700\u6c42");for(var e=0,t=0;t<this.classifyList.length;t++)this.classifyList[t]?(e++,c.bodyInfo[a.default.toLowerCaseFirst(s.classify[t])]=this.classifyList[t].id):c.bodyInfo[a.default.toLowerCaseFirst(s.classify[t])]&&(c.bodyInfo[a.default.toLowerCaseFirst(s.classify[t])]=null);cc.log(c.bodyInfo),this.checkNum,this.nextButton.interactable=e>=this.checkNum},t.prototype.nextPage=function(){l.default.playEAudio("click"),cc.log("\u5c1d\u8bd5\u53d1\u9001nextStep\u4e8b\u4ef6"),this.node.dispatchEvent(new cc.Event.EventCustom("nextStep",!0))},t.prototype.getSimulationCInfo=function(){for(var e in cc.log(s.BInfo),s.BInfo)cc.log("\u5173\u5361"+e+"\u6570\u636e",s.BInfo[e]);var t=s.BInfo[0].wardrobe0;for(var n in cc.log("wardrobe0",t),this.WRArr=[],t)for(var o in s.CInfo){for(var r=null,i=0;i<s.CInfo[o].page.length;i++)s.CInfo[o].page[i]==t[n]&&(r=i);if(null!=r){this.WRArr[n]||(this.WRArr[n]=[]);var a={node:null,isUse:!1,initialPos:s.CInfo[o].pagePos[r],pageIndex:r};a=Object.assign(a,s.CInfo[o]),this.WRArr[n].push(a),cc.log(a)}}return cc.log(s.CInfo),cc.log("\u5f53\u524d\u5173\u5361\u8863\u67dc\u6570\u636e",this.WRArr),this.WRArr[0],cc.log("\u7b2c\u4e00\u9875",this.WRArr[0]),this.WRArr},i([f(cc.Node)],t.prototype,"guideNode",void 0),i([f(cc.Node)],t.prototype,"cabinet",void 0),i([f(cc.Node)],t.prototype,"left",void 0),i([f(cc.Node)],t.prototype,"right",void 0),i([f(cc.Node)],t.prototype,"turn",void 0),i([f(cc.Node)],t.prototype,"hand",void 0),i([f(cc.Node)],t.prototype,"body",void 0),i([f(cc.Node)],t.prototype,"skin",void 0),i([f(cc.Node)],t.prototype,"face",void 0),i([f(cc.Material)],t.prototype,"outlineMaterial",void 0),i([f(cc.Material)],t.prototype,"gray",void 0),i([f(cc.Button)],t.prototype,"nextButton",void 0),i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../SimulationInfo":"SimulationInfo","../bundleInfo":"bundleInfo","../control_mgr":"control_mgr","../sound_mgr":"sound_mgr","../temporaryStrategy":"temporaryStrategy"}]},{},["Loader","cos-js-sdk-v5.min","SimulationInfo","build_mgr","bundleInfo","bundle_mgr","controlPanel","control_mgr","hallBuild","item_ctrl","onlineInfo","printscreen_mgr","sound_mgr","temporaryStrategy","cabinet","demoEnd","loading","ornament","remaking","setting","unpack","wardrobe"]);